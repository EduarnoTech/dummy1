{"ast":null,"code":"import _toConsumableArray from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import IconButton from'@mui/material/IconButton';import Menu from'@mui/material/Menu';import MenuItem from'@mui/material/MenuItem';import MoreVertIcon from'@mui/icons-material/MoreVert';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ITEM_HEIGHT=48;export default function MoreMenu(_ref){var data=_ref.data,setCurrentChat=_ref.setCurrentChat,setFinalMessage=_ref.setFinalMessage,scrollRef=_ref.scrollRef,setScrollView_=_ref.setScrollView_,handleCloseModal=_ref.handleCloseModal,setAllNotes=_ref.setAllNotes,setPage=_ref.setPage;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var open=Boolean(anchorEl);var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event,wa_id){var _res_$data,res_;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setAnchorEl(event.currentTarget);_context.prev=1;_context.next=4;return axios.get(\"\".concat(localStorage.getItem('api'),\"/api/conversations/findContact/\").concat(wa_id));case 4:res_=_context.sent;setCurrentChat(res_===null||res_===void 0?void 0:(_res_$data=res_.data)===null||_res_$data===void 0?void 0:_res_$data.result[0]);setScrollView_(false);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleClick(_x,_x2){return _ref2.apply(this,arguments);};}();var handleClose=function handleClose(){setAnchorEl(null);};var openInChat=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(wa_id,time){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(localStorage.getItem('api'),\"/api/messages/filteredMsg/\").concat(wa_id,\"/\").concat(time));case 3:res=_context2.sent;setFinalMessage(_toConsumableArray(res===null||res===void 0?void 0:res.data));setPage(Math.floor((res===null||res===void 0?void 0:res.data.length)/20)+1);handleCloseModal();setAllNotes([]);setScrollView_(false);window.scrollTo(0,scrollRef.current.offsetTop);_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function openInChat(_x3,_x4){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"more\",id:\"long-button\",\"aria-controls\":open?'long-menu':undefined,\"aria-expanded\":open?'true':undefined,\"aria-haspopup\":\"true\",onClick:function onClick(e){return handleClick(e,data===null||data===void 0?void 0:data.wa_id);},children:/*#__PURE__*/_jsx(MoreVertIcon,{})}),/*#__PURE__*/_jsx(Menu,{id:\"long-menu\",MenuListProps:{'aria-labelledby':'long-button'},anchorEl:anchorEl,open:open,onClose:handleClose,PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5,width:'20ch'}},children:/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){return openInChat(data===null||data===void 0?void 0:data.wa_id,data===null||data===void 0?void 0:data.createdAt);},children:\"Show in chat\"},'i')})]});}","map":{"version":3,"names":["useState","IconButton","Menu","MenuItem","MoreVertIcon","axios","ITEM_HEIGHT","MoreMenu","data","setCurrentChat","setFinalMessage","scrollRef","setScrollView_","handleCloseModal","setAllNotes","setPage","anchorEl","setAnchorEl","open","Boolean","handleClick","event","wa_id","currentTarget","get","localStorage","getItem","res_","result","console","log","handleClose","openInChat","time","res","Math","floor","length","window","scrollTo","current","offsetTop","undefined","e","style","maxHeight","width","createdAt"],"sources":["C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/src/components/notes/MoreMenu.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport axios from 'axios';\r\n\r\nconst ITEM_HEIGHT = 48;\r\n\r\nexport default function MoreMenu({\r\n  data,\r\n  setCurrentChat,\r\n  setFinalMessage,\r\n  scrollRef,\r\n  setScrollView_,\r\n  handleCloseModal,\r\n  setAllNotes,\r\n  setPage\r\n}) {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleClick = async (event, wa_id) => {\r\n    setAnchorEl(event.currentTarget);\r\n    try {\r\n      const res_ = await axios.get(\r\n        `${localStorage.getItem('api')}/api/conversations/findContact/${wa_id}`\r\n      );\r\n      setCurrentChat(res_?.data?.result[0]);\r\n      setScrollView_(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const openInChat = async (wa_id, time) => {\r\n    try {\r\n      const res = await axios.get(\r\n        `${localStorage.getItem('api')}/api/messages/filteredMsg/${wa_id}/${time}`\r\n      );\r\n      setFinalMessage([...res?.data]);\r\n      setPage(Math.floor(res?.data.length/20) + 1);\r\n      handleCloseModal();\r\n      setAllNotes([]);\r\n      setScrollView_(false);\r\n      window.scrollTo(0, scrollRef.current.offsetTop);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-label='more'\r\n        id='long-button'\r\n        aria-controls={open ? 'long-menu' : undefined}\r\n        aria-expanded={open ? 'true' : undefined}\r\n        aria-haspopup='true'\r\n        onClick={(e) => handleClick(e, data?.wa_id)}\r\n      >\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu\r\n        id='long-menu'\r\n        MenuListProps={{\r\n          'aria-labelledby': 'long-button',\r\n        }}\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        PaperProps={{\r\n          style: {\r\n            maxHeight: ITEM_HEIGHT * 4.5,\r\n            width: '20ch',\r\n          },\r\n        }}\r\n      >\r\n        <MenuItem\r\n          key='i'\r\n          onClick={() => openInChat(data?.wa_id, data?.createdAt)}\r\n        >\r\n          Show in chat\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}