{"ast":null,"code":"import _slicedToArray from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./moreMenu.css';import IconButton from'@material-ui/core/IconButton';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import MoreVertIcon from'@material-ui/icons/MoreVert';import NotificationsIcon from'@material-ui/icons/Notifications';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoreMenu=function MoreMenu(_ref){var arrivalMessage=_ref.arrivalMessage;var _useState=useState(),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];var uniqueValuesSet=new Set();useEffect(function(){var filteredArr=arrivalMessage.reverse().filter(function(obj){var isPresentInSet=uniqueValuesSet.has(obj.waId);uniqueValuesSet.add(obj.waId);return!isPresentInSet;});setOptions(filteredArr);},[arrivalMessage]);//   const options = filteredArr;\nvar ITEM_HEIGHT=48;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var open=Boolean(anchorEl);var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var truncString=function truncString(str,max,add){add=add||'...';return typeof str==='string'&&str.length>max?str.substring(0,max)+add:str;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"more\",\"aria-controls\":\"long-menu\",\"aria-haspopup\":\"true\",onClick:handleClick,children:/*#__PURE__*/_jsx(NotificationsIcon,{className:(options===null||options===void 0?void 0:options.length)>0?'notification':'no_noti'})}),/*#__PURE__*/_jsx(Menu,{id:\"long-menu\",anchorEl:anchorEl,keepMounted:true,open:open,onClose:handleClose,PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5,width:'20ch'}},children:(options===null||options===void 0?void 0:options.length)>0?options===null||options===void 0?void 0:options.map(function(option){return/*#__PURE__*/_jsxs(MenuItem,{// selected={option === 'None'}\nonClick:handleClose,style:{fontSize:'14px',fontWeight:'bold'},children:[truncString(option.senderName,10,'...'),\" (\",truncString(option.text,3,'..'),\")\"]},option.id);}):/*#__PURE__*/_jsx(MenuItem,{// selected={option === 'None'}\nonClick:handleClose,children:\"No new messages\"},'noMsg')})]});};export default MoreMenu;","map":{"version":3,"names":["React","useState","useEffect","IconButton","Menu","MenuItem","MoreVertIcon","NotificationsIcon","MoreMenu","arrivalMessage","options","setOptions","uniqueValuesSet","Set","filteredArr","reverse","filter","obj","isPresentInSet","has","waId","add","ITEM_HEIGHT","anchorEl","setAnchorEl","open","Boolean","handleClick","event","currentTarget","handleClose","truncString","str","max","length","substring","style","maxHeight","width","map","option","fontSize","fontWeight","senderName","text","id"],"sources":["C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/src/components/dropDown/MoreMenu.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './moreMenu.css'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\n\r\nconst MoreMenu = ({ arrivalMessage }) => {\r\n  const [options, setOptions] = useState();\r\n  const uniqueValuesSet = new Set();\r\n\r\n  useEffect(() => {\r\n    const filteredArr = arrivalMessage.reverse().filter((obj) => {\r\n      const isPresentInSet = uniqueValuesSet.has(obj.waId);\r\n      uniqueValuesSet.add(obj.waId);\r\n      return !isPresentInSet;\r\n    });\r\n    setOptions(filteredArr);\r\n  }, [arrivalMessage]);\r\n  //   const options = filteredArr;\r\n\r\n  const ITEM_HEIGHT = 48;\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const truncString = (str, max, add) => {\r\n    add = add || '...';\r\n    return (typeof str === 'string' && str.length > max ? str.substring(0,max)+add : str);\r\n };\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-label='more'\r\n        aria-controls='long-menu'\r\n        aria-haspopup='true'\r\n        onClick={handleClick}\r\n      >\r\n        <NotificationsIcon className={options?.length>0 ? 'notification' : 'no_noti'} />\r\n      </IconButton>\r\n      <Menu\r\n        id='long-menu'\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={open}\r\n        onClose={handleClose}\r\n        PaperProps={{\r\n          style: {\r\n            maxHeight: ITEM_HEIGHT * 4.5,\r\n            width: '20ch',\r\n          },\r\n        }}\r\n      >\r\n        {options?.length > 0 ? (\r\n          options?.map((option) => (\r\n            <MenuItem\r\n              key={option.id}\r\n              // selected={option === 'None'}\r\n              onClick={handleClose}\r\n              style={{fontSize: '14px', fontWeight: 'bold'}}\r\n            >\r\n              {truncString(option.senderName, 10, '...')} ({truncString(option.text, 3, '..')})\r\n            </MenuItem>\r\n          ))\r\n        ) : (\r\n          <MenuItem\r\n            key={'noMsg'}\r\n            // selected={option === 'None'}\r\n            onClick={handleClose}\r\n          >\r\n            No new messages\r\n          </MenuItem>\r\n        )}\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MoreMenu;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}