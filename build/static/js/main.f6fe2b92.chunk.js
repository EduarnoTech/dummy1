(this["webpackJsonpchat-dashboard"]=this["webpackJsonpchat-dashboard"]||[]).push([[0],{238:function(e,t,n){},250:function(e,t,n){},336:function(e,t,n){},355:function(e,t,n){},363:function(e,t,n){},367:function(e,t,n){},368:function(e,t,n){},370:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},377:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(26),s=n.n(i),l=(n(336),n(3)),c=n(284),r=n(37),d=n(4),u=n(8),p=n(15),j=n(14),v=n(17),x=(n(238),n(254)),b=n.n(x),g=n(19),f=n(11),m=n.n(f),h=(n(355),localStorage.getItem("api")),O=h+"/api/messages",y=h+"/api/messages/sendSession",S=h+"/api/messages/sendMedia",_=h+"/api/conversations/addContact",w=h+"/api/conversations/chatLabel",k=h+"/api/conversations/chatAgent",C=h+"/api/conversations/pinChat",I=h+"/api/conversations/markChat",T=h+"/api/conversations/stickComments",z=h+"/api/conversations/fetchStickComments",A=h+"/api/messages/sendTemplate",N=h+"/api/conversations",D=h+"/api/sessions/createSession",P=n(179),R=n(39),W=n.n(R),E=n(220),B=n.n(E),L=n(288),F=n(506),M=n(153),U=n.n(M),K=n(495),H=n(508),Y=n(505),V=n(503),q=n(520),G=n(524),J=n(521),Q=n(473),X=n(1);function Z(e){var t=e.handleStickComments,n=e.setStickComments,o=e.stickComments,i=e.wa_id,s=e.fetchStickComments,c=a.useState(!1),r=Object(l.a)(c,2),d=r[0],u=r[1];console.log({stickComments:o});var p=function(){u(!1)};return Object(X.jsxs)("div",{children:[Object(X.jsx)(Y.a,{onClick:function(){s(i),u(!0)},children:"Comments"}),Object(X.jsxs)(q.a,{open:d,onClose:p,children:[Object(X.jsx)(Q.a,{children:"Add Comments"}),Object(X.jsx)(J.a,{children:Object(X.jsx)(V.a,{placeholder:"write your comments here!",multiline:!0,onChange:function(e){return n(e.target.value)},value:o,rows:2,maxRows:6,style:{width:"30rem"}})}),Object(X.jsxs)(G.a,{children:[Object(X.jsx)(Y.a,{onClick:p,children:"Cancel"}),Object(X.jsx)(Y.a,{onClick:function(){return t(i,o)},children:"Add"})]})]})]})}var $=n(58),ee=n.n($),te=n(9),ne=n(478),ae=n(89),oe=n(166),ie=["className"],se=Object(te.a)((function(e){var t=e.className,n=Object(g.a)(e,ie);return Object(X.jsx)(ne.a,Object(v.a)(Object(v.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(d.a)({},"& .".concat(ae.a.tooltip),{backgroundColor:"rgba(80, 80, 80, 0.92)",color:"#ffff",fontWeight:"500",maxWidth:350,fontSize:t.typography.pxToRem(12),border:"1px solid rgba(80, 80, 80, 0.92)",overflowX:"hidden",overflowY:"scroll",maxHeight:"300px"})}));function le(e){var t,n=e.apiUrl,o=e.conversation,i=(e.currentUser,e.currentChat),s=(e.finalMessage,e.arrivalMessage,e.alertMsg,e.alert,e.setAlert,e.setPinned),c=e.setMarkChat,r=e.setAlertUpdate,d=Object(a.useState)([]),p=Object(l.a)(d,2),v=p[0],x=(p[1],Object(a.useState)([])),b=Object(l.a)(x,2),g=(b[0],b[1],Object(a.useState)([])),f=Object(l.a)(g,2),h=f[0],O=(f[1],Object(a.useState)()),y=Object(l.a)(O,2),S=(y[0],y[1],Object(a.useRef)(),Object(a.useRef)(),Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AGENT_1:"Chaitanya",REACT_APP_AGENT_2:"Nityananda",REACT_APP_AGENT_3:"Advaita",REACT_APP_AGENT_4:"Abhay",REACT_APP_AGENT_ADMIN:"Admin",REACT_APP_API_194:"https://annular-arena-331607.el.r.appspot.com/d1",REACT_APP_API_7070:"https://annular-arena-331607.el.r.appspot.com/d6",REACT_APP_API_7091:"https://annular-arena-331607.el.r.appspot.com/d2",REACT_APP_API_77618:"https://annular-arena-331607.el.r.appspot.com/d3",REACT_APP_API_8777:"https://annular-arena-331607.el.r.appspot.com/d4",REACT_APP_API_9065:"https://annular-arena-331607.el.r.appspot.com/d5",REACT_APP_API_9661:"https://annular-arena-331607.el.r.appspot.com/d7",REACT_APP_API_KEY_194:"JMjJNtiGmSiet1O9OXJOExGhAK",REACT_APP_API_KEY_7070:"Z3HKqEweJBHrBi2SrxvhLLsSAK",REACT_APP_API_KEY_7091:"qjuT6BExOEWmhKqtGSOidRVSAK",REACT_APP_API_KEY_77618:"S5OBuKrYYzZepp9hLtPcep3BAK",REACT_APP_API_KEY_8777:"TOgICT5gGovocnHe8aMb1jKwAK",REACT_APP_API_KEY_9065:"Kia1AQk1PbjWk0LtpLnFEyttAK",REACT_APP_API_KEY_9661:"CmdeEku9DElAn3HaBtQVUQk6AK",REACT_APP_ID1:"EduarnoD_1",REACT_APP_ID2:"EduarnoD_2",REACT_APP_ID3:"EduarnoD_3",REACT_APP_ID4:"EduarnoD_4",REACT_APP_ID5:"EduarnoD_5",REACT_APP_ID6:"EduarnoD_6",REACT_APP_ID7:"EduarnoD_7",REACT_APP_PASS1:"Chaitanya#D_1",REACT_APP_PASS2:"Nityananda#D_2",REACT_APP_PASS3:"Advaita#D_3",REACT_APP_PASS4:"Gadadhara#D_4",REACT_APP_PASS5:"Srivas#D_5",REACT_APP_PASS6:"Abhay#D_6",REACT_APP_PASS7:"Krishna#D_7"}).REACT_APP_PUBLIC_FOLDER,Object(a.useState)(null)),_=Object(l.a)(S,2),w=_[0],k=_[1],A=Object(a.useState)(),N=Object(l.a)(A,2),D=N[0],P=N[1],R=Object(a.useState)(),E=Object(l.a)(R,2),M=E[0],Y=E[1],V=Boolean(w),q=function(){k(null)};console.log(v);var G=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.newMsgCount>0)){e.next=12;break}return e.prev=1,a={newMsgCount:0,timestamp:Math.floor((new Date).getTime()/1e3)},e.next=5,m.a.put("".concat(n||localStorage.getItem("api"),"/api/conversations/").concat(t),a,{headers:{}});case 5:e.sent,r(Math.floor((new Date).getTime()/1e3)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();console.log(h);var J,Q=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pinContact:!n},e.next=3,m.a.put(C+"/".concat(t),o,{headers:""});case 3:i=e.sent,s(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.updatedAt);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={markAsUnread:!n},e.next=3,m.a.put(I+"/".concat(t),o,{headers:""});case 3:i=e.sent,c(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.updatedAt);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={comments:n},e.next=3,m.a.put(T+"/".concat(t),a,{headers:""});case 3:e.sent,ne(t),q();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(z+"/".concat(t));case 2:(n=e.sent).data&&P(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/messages/getNotes/").concat(t));case 3:n=e.sent,Y(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{className:(null===i||void 0===i?void 0:i.wa_id)==(null===o||void 0===o?void 0:o.wa_id)?"conversation highlighted":"conversation",onClick:function(){G(null===o||void 0===o?void 0:o.wa_id)},children:Object(X.jsxs)("div",{className:"userTab",children:[Object(X.jsx)(H.a,{className:"conversationImg",children:null===o||void 0===o||null===(t=o.name)||void 0===t?void 0:t.slice(0,2)}),Object(X.jsxs)("div",{style:{paddingBottom:"5px"},children:[Object(X.jsxs)("div",{className:"conversationName",children:["".concat(null===o||void 0===o?void 0:o.name).concat(null===o||void 0===o?void 0:o.wa_id.slice(0,3)),Object(X.jsx)(se,{placement:"right",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:M&&M.length>0?"Notes: ":"No Notes"}),M&&M.length>0&&Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px",maxHeight:"500px",overflowY:"scroll"},children:M.map((function(e){var t,n,a;return Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",fontWeight:"normal",padding:"8px 5px",borderBottom:"1px solid #ffff"},children:[Object(X.jsx)("div",{style:{display:"flex",flex:"60%",fontSize:"13px",fontWeight:"600",color:"high"===(null===e||void 0===e||null===(t=e.clientNotes)||void 0===t?void 0:t.priority)?"red":"medium"===(null===e||void 0===e||null===(n=e.clientNotes)||void 0===n?void 0:n.priority)?"royalblue":"#565555"},children:null===e||void 0===e||null===(a=e.clientNotes)||void 0===a?void 0:a.noteText}),Object(X.jsx)("div",{style:{display:"flex",alignSelf:"self-end",fontSize:"11px"},children:W()(new Date(1e3*e.timestamp)).format("lll")})]})}))})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"12px",cursor:"pointer",marginLeft:"1px"},onMouseEnter:function(){return ae(null===o||void 0===o?void 0:o.wa_id)}})})]}),Object(X.jsxs)("div",{style:{fontSize:"12px"},children:["ED".concat(null===o||void 0===o?void 0:o.uid),Object(X.jsx)("span",{className:"usertag_",children:(J=null===o||void 0===o?void 0:o.tags,J.length>17?"".concat(J.slice(0,17),".."):J.length<=17?J:void 0)})]})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"35%",flexDirection:"column",justifyContent:"flex-end"},children:[Object(X.jsxs)("span",{style:{display:"flex",flex:"1",justifyContent:"flex-end",padding:"10px",fontSize:"12px",fontWeight:"normal"},children:[(null===o||void 0===o?void 0:o.pinContact)&&Object(X.jsx)("span",{style:{marginRight:"14px",transform:"rotate(45deg)",cursor:"pointer"},children:Object(X.jsx)(B.a,{style:{fontSize:"15px"}})}),function(e){var t=(new Date).getTime()/1e3-e;return t/=3600,Math.abs(Math.round(t))}(null===o||void 0===o?void 0:o.timestamp)<24?W()(new Date(1e3*(null===o||void 0===o?void 0:o.timestamp)).toISOString()).format("hh:mm a"):W()(new Date(1e3*(null===o||void 0===o?void 0:o.timestamp)).toISOString()).format("L")]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignSelf:"flex-end"},children:[Object(X.jsx)("span",{style:{padding:"0px 10px",marginRight:"5px"},children:o.markAsUnread&&Object(X.jsx)(K.a,{badgeContent:"",color:"primary"})}),o.newMsgCount>0&&Object(X.jsx)("span",{style:{padding:"0px 10px",marginRight:"5px"},children:Object(X.jsx)(K.a,{badgeContent:o.newMsgCount,color:"success"})}),Object(X.jsxs)("span",{style:{paddingRight:"5px"},children:[Object(X.jsx)(U.a,{fontSize:"small",color:"action",onClick:function(e){e.stopPropagation(),k(e.currentTarget)}}),Object(X.jsxs)(L.a,{id:"basic-menu",anchorEl:w,open:V,onClose:q,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(X.jsx)(F.a,{onClick:function(e){e.stopPropagation(),Q(null===o||void 0===o?void 0:o.wa_id,null===o||void 0===o?void 0:o.pinContact),q()},children:null!==o&&void 0!==o&&o.pinContact?"Unpin chat":"Pin chat"}),Object(X.jsx)(F.a,{onClick:function(e){e.stopPropagation(),$(null===o||void 0===o?void 0:o.wa_id,null===o||void 0===o?void 0:o.markAsUnread),q()},children:null!==o&&void 0!==o&&o.markAsUnread?"Mark as read":"Mark as unread"}),Object(X.jsx)(F.a,{onClick:function(e){e.stopPropagation()},children:Object(X.jsx)(Z,{handleStickComments:te,fetchStickComments:ne,wa_id:null===o||void 0===o?void 0:o.wa_id,setStickComments:P,stickComments:D})})]})]})]})]})]})})}n(363),n(378);var ce=n(186),re=n.n(ce),de=n(226),ue=n.n(de),pe=n(258),je=n.n(pe),ve=n(259),xe=n.n(ve),be={"Content-Type":"application/json","D360-API-KEY":localStorage.getItem("api_key")},ge=n(257),fe=n.n(ge),me=n(498),he=n(260),Oe=n.n(he),ye=function(e){var t,n,o,i,s,c,r,d,x,b,g,f,h,O,y,S,_,w,k,C,I,T,z,A,N,D,P,R,E,B,L,F,M=e.apiUrl,U=e.message,K=(e.msgArr,e.own),H=e.ownAlt,Y=e.setForward,V=e.mulForward,q=e.setMulForward,G=e.setVisible,J=e.showSelector,Q=e.setShowSelector,Z=e.status,$=Object(a.useState)(),ee=Object(l.a)($,2),te=(ee[0],ee[1],Object(a.useState)()),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=Object(a.useState)(),se=Object(l.a)(ie,2),le=se[0],ce=se[1],de=Object(a.useState)(),pe=Object(l.a)(de,2),ve=pe[0],ge=pe[1],he=Object(a.useState)(),ye=Object(l.a)(he,2);ye[0],ye[1];return console.log("stat",Z),console.log(U),Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o,i,s,l,c,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("image"==U.type||"video"==U.type||"document"==U.type||"voice"==U.type||"audio"==U.type||null!==U&&void 0!==U&&U.messages&&"image"==(null===U||void 0===U||null===(t=U.messages[0])||void 0===t?void 0:t.type)||null!==U&&void 0!==U&&U.messages&&"video"==(null===U||void 0===U||null===(n=U.messages[0])||void 0===n?void 0:n.type)||null!==U&&void 0!==U&&U.messages&&"voice"==(null===U||void 0===U||null===(a=U.messages[0])||void 0===a?void 0:a.type)||null!==U&&void 0!==U&&U.messages&&"audio"==(null===U||void 0===U||null===(o=U.messages[0])||void 0===o?void 0:o.type)||null!==U&&void 0!==U&&U.messages&&"document"==(null===U||void 0===U||null===(i=U.messages[0])||void 0===i?void 0:i.type))){e.next=4;break}return e.next=4,fetch("https://waba.360dialog.io/v1/media/".concat((null===U||void 0===U||null===(s=U.data)||void 0===s?void 0:s.id)||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(l=U.messages[0])||void 0===l||null===(c=l[null===U||void 0===U||null===(r=U.messages[0])||void 0===r?void 0:r.type])||void 0===c?void 0:c.id)),{headers:Object(v.a)({},be)}).then((function(e){return e.blob()})).then((function(e){oe((function(){return URL.createObjectURL(e)}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();e();var t=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o,i,s,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==U&&void 0!==U&&U.context&&null!==U&&void 0!==U&&null!==(t=U.context)&&void 0!==t&&t.id||null!==U&&void 0!==U&&U.messages&&null!==U&&void 0!==U&&null!==(n=U.messages[0])&&void 0!==n&&n.context)){e.next=23;break}return e.prev=1,e.next=4,m.a.get("".concat(M||localStorage.getItem("api"),"/api/messages/findMsg/").concat((null===U||void 0===U||null===(a=U.context)||void 0===a?void 0:a.id)||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(o=U.messages[0])||void 0===o||null===(i=o.context)||void 0===i?void 0:i.id)));case 4:if("template"!==(s=e.sent).data[0].eventType){e.next=10;break}ce(s.data[0].templateText),console.log(s.data[0]),e.next=18;break;case 10:if("text"!==s.data[0].type){e.next=14;break}ce(s.data[0].text.body),e.next=18;break;case 14:if("image"!==s.data[0].type&&"video"!==s.data[0].type&&"document"!==s.data[0].type){e.next=18;break}return ge(s.data[0].type),e.next=18,fetch("https://waba.360dialog.io/v1/media/".concat(null===(l=s.data[0].data)||void 0===l?void 0:l.id),{headers:Object(v.a)({},be)}).then((function(e){return e.blob()})).then((function(e){ce((function(){return URL.createObjectURL(e)}))}));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(){return e.apply(this,arguments)}}();t()}),[U]),console.log(ae),console.log(V),Object(X.jsx)(X.Fragment,{children:"template"===U.eventType?Object(X.jsx)("div",{className:"temp_message",children:Object(X.jsx)("p",{className:"temp_messageText",children:U.templateText})}):"note"===U.eventType?Object(X.jsx)("div",{className:"note_message",children:Object(X.jsxs)("p",{className:"note_messageText",children:[Object(X.jsx)("span",{style:{color:"high"===(null===U||void 0===U||null===(t=U.clientNotes)||void 0===t?void 0:t.priority)?"red":"medium"===(null===U||void 0===U||null===(n=U.clientNotes)||void 0===n?void 0:n.priority)?"royalblue":"#9b9b9b",fontSize:"12px",fontWeight:"700"},children:"NOTE: "}),U.clientNotes.noteText]})}):Object(X.jsxs)("div",{className:K||H?"message own":"message",children:[Object(X.jsxs)("div",{className:K||H?"messageTop _own_":"messageTop",children:[J&&Object(X.jsx)(me.a,{size:"small",style:{placeSelf:"center",marginRight:"15px"},onChange:function(){if(null!==V&&void 0!==V&&V.find((function(e){var t,n,a,o,i,s,l,c,r,d,u,p,j,v;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.body)&&(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.body)==(null===U||void 0===U||null===(a=U.text)||void 0===a?void 0:a.body)||(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.body)&&(null===U||void 0===U?void 0:U.messages)&&(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.body)==(null===U||void 0===U||null===(s=U.messages[0])||void 0===s?void 0:s[null===U||void 0===U||null===(l=U.messages[0])||void 0===l?void 0:l.type].body)||(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.id)&&(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.id)==(null===U||void 0===U||null===(d=U.data)||void 0===d?void 0:d.id)||(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.id)&&(null===U||void 0===U?void 0:U.messages)&&(null===e||void 0===e||null===(p=e.data)||void 0===p?void 0:p.id)==(null===U||void 0===U||null===(j=U.messages[0])||void 0===j?void 0:j[null===U||void 0===U||null===(v=U.messages[0])||void 0===v?void 0:v.type].id)}))){var e=null===V||void 0===V?void 0:V.findIndex((function(e){var t,n,a,o,i,s,l,c,r,d,u,p;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.body)&&(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.body)===(null===U||void 0===U||null===(a=U.text)||void 0===a?void 0:a.body)||(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.id)&&(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.id)===(null===U||void 0===U||null===(s=U.data)||void 0===s?void 0:s.id)||(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.body)&&(null===U||void 0===U?void 0:U.messages)&&(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.body)===(null===U||void 0===U||null===(r=U.messages[0])||void 0===r?void 0:r[null===U||void 0===U||null===(d=U.messages[0])||void 0===d?void 0:d.type].body)||e.data.id&&(null===U||void 0===U?void 0:U.messages)&&e.data.id===(null===U||void 0===U||null===(u=U.messages[0])||void 0===u?void 0:u[null===U||void 0===U||null===(p=U.messages[0])||void 0===p?void 0:p.type].id)}));V.splice(e,1)}else{var t,n,a;q([].concat(Object(p.a)(V),[{type:(null===U||void 0===U?void 0:U.type)||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(t=U.messages[0])||void 0===t?void 0:t.type),data:(null===U||void 0===U?void 0:U.data)||U.text||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(n=U.messages[0])||void 0===n?void 0:n[null===U||void 0===U||null===(a=U.messages[0])||void 0===a?void 0:a.type])}]))}}}),"image"===U.type||null!==U&&void 0!==U&&U.messages&&"image"==(null===U||void 0===U||null===(o=U.messages[0])||void 0===o?void 0:o.type)?Object(X.jsxs)("div",{className:K||H?"messageImage own_":"messageImage",children:[Object(X.jsx)("img",{src:ae,className:K||H?"imageBox ownimg_":"imageBox"}),Object(X.jsx)("div",{style:{textAlign:"start",padding:"0px 7px 0px 7px",fontSize:"13px",width:"-webkit-fill-available"},children:(null===U||void 0===U||null===(i=U.data)||void 0===i?void 0:i.caption)||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(s=U.messages[0])||void 0===s||null===(c=s[null===U||void 0===U||null===(r=U.messages[0])||void 0===r?void 0:r.type])||void 0===c?void 0:c.caption)})]}):"video"===U.type||null!==U&&void 0!==U&&U.messages&&"video"==(null===U||void 0===U||null===(d=U.messages[0])||void 0===d?void 0:d.type)?Object(X.jsxs)("div",{className:K||H?"messageVideo ownVid":"messageVideo",children:[Object(X.jsx)("video",{controls:!0,src:ae,className:K||H?"videoBox ownVid_":"videoBox"}),Object(X.jsx)("div",{style:{textAlign:"start",padding:"0px 7px 0px 7px",fontSize:"13px",width:"-webkit-fill-available"},children:(null===U||void 0===U||null===(x=U.data)||void 0===x?void 0:x.caption)||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(b=U.messages[0])||void 0===b||null===(g=b[null===U||void 0===U||null===(f=U.messages[0])||void 0===f?void 0:f.type])||void 0===g?void 0:g.caption)})]}):"voice"===U.type||"audio"===U.type||null!==U&&void 0!==U&&U.messages&&"voice"==(null===U||void 0===U||null===(h=U.messages[0])||void 0===h?void 0:h.type)||null!==U&&void 0!==U&&U.messages&&"audio"==(null===U||void 0===U||null===(O=U.messages[0])||void 0===O?void 0:O.type)?Object(X.jsx)(fe.a,{src:ae,style:{marginBottom:"15px"},controls:!0}):"document"===U.type||null!==U&&void 0!==U&&U.messages&&"document"==(null===U||void 0===U||null===(y=U.messages[0])||void 0===y?void 0:y.type)?Object(X.jsx)("div",{className:K||H?"messageDocs own_":"messageDocs",children:Object(X.jsx)("a",{href:ae,target:"_blank",children:null!==U&&void 0!==U&&U.messages?(null===U||void 0===U||null===(S=U.messages[0])||void 0===S||null===(_=S.document)||void 0===_?void 0:_.filename)||(null===U||void 0===U||null===(w=U.messages[0])||void 0===w||null===(k=w.document)||void 0===k?void 0:k.caption):U.data.filename?U.data.filename:U.data.filename?null:U.data.caption})}):"button"===U.type||null!==U&&void 0!==U&&U.messages&&"button"==(null===U||void 0===U||null===(C=U.messages[0])||void 0===C?void 0:C.type)?Object(X.jsxs)("div",{children:[Object(X.jsx)("p",{className:"messageTextContext",children:le}),Object(X.jsx)("p",{className:"messageTextReplyBtn",children:null!==U&&void 0!==U&&U.messages?null===U||void 0===U||null===(I=U.messages[0])||void 0===I||null===(T=I.button)||void 0===T?void 0:T.text:null!==U&&void 0!==U&&U.replyButton?null===U||void 0===U?void 0:U.replyButton:null})]}):Object(X.jsxs)("div",{style:{whiteSpace:"pre-wrap"},children:[null!==U&&void 0!==U&&U.context||null!==U&&void 0!==U&&U.messages&&null!==U&&void 0!==U&&null!==(z=U.messages[0])&&void 0!==z&&z.context?Object(X.jsx)("div",{children:"image"===ve||"video"===ve||"document"===ve?Object(X.jsx)("div",{className:"messageFileContext",children:Object(X.jsx)("a",{href:le,target:"_blank",children:"file link"})}):Object(X.jsx)("p",{className:"messageTextContext",children:le})}):null,Object(X.jsx)("p",{className:U.context||null!==U&&void 0!==U&&U.messages&&null!==U&&void 0!==U&&null!==(A=U.messages[0])&&void 0!==A&&A.context?"messageTextReply":"messageText",children:null!==U&&void 0!==U&&U.messages?null===U||void 0===U||null===(N=U.messages[0])||void 0===N||null===(D=N.text)||void 0===D?void 0:D.body:null!==U&&void 0!==U&&null!==(P=U.text)&&void 0!==P&&P.body?null===U||void 0===U||null===(R=U.text)||void 0===R?void 0:R.body:null})]})]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[K||H?Object(X.jsx)(X.Fragment,{children:"read"===U.status||"read"==(null===Z||void 0===Z||null===(E=Z.find((function(e){return(null===e||void 0===e?void 0:e.msgId)==(null===U||void 0===U?void 0:U.id)})))||void 0===E?void 0:E.msgStatus)?Object(X.jsx)(ue.a,{className:"seen"}):"delivered"===U.status||"delivered"==(null===Z||void 0===Z||null===(B=Z.find((function(e){return(null===e||void 0===e?void 0:e.msgId)==(null===U||void 0===U?void 0:U.id)})))||void 0===B?void 0:B.msgStatus)?Object(X.jsx)(ue.a,{className:"delivered"}):"sent"===U.status||"sent"==(null===Z||void 0===Z||null===(L=Z.find((function(e){return(null===e||void 0===e?void 0:e.msgId)==(null===U||void 0===U?void 0:U.id)})))||void 0===L?void 0:L.msgStatus)?Object(X.jsx)(je.a,{className:"sent"}):Object(X.jsx)(xe.a,{className:"notsent"})}):null,Object(X.jsx)("div",{className:"messageBottom",children:W()((null===U||void 0===U?void 0:U.createdAt)||(null===U||void 0===U?void 0:U.messages)&&new Date(1e3*(null===U||void 0===U||null===(F=U.messages[0])||void 0===F?void 0:F.timestamp))).format("lll")}),Object(X.jsxs)("div",{className:"fowardCont",children:[Object(X.jsx)(re.a,{className:"forward",onClick:function(){var e,t,n;Y({type:(null===U||void 0===U?void 0:U.type)||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(e=U.messages[0])||void 0===e?void 0:e.type),data:(null===U||void 0===U?void 0:U.data)||U.text||(null===U||void 0===U?void 0:U.messages)&&(null===U||void 0===U||null===(t=U.messages[0])||void 0===t?void 0:t[null===U||void 0===U||null===(n=U.messages[0])||void 0===n?void 0:n.type])}),G(!0)}}),Object(X.jsx)(Oe.a,{className:"forward",onClick:function(){return Q(!0)}})]})]})]})})},Se=localStorage.getItem("api")+"/api/conversations/getContacts/search",_e=(n(367),n(122)),we=n.n(_e),ke=n(156),Ce=n.n(ke),Ie=n(514),Te=n(119),ze=n.n(Te),Ae=n(494),Ne=function(e){var t=e.apiKey,n=(e.visible,e.setVisible),o=e.forward,i=e.setForwarded,s=e.forwarded,c=e.mulForward,r=e.setMulForward,d=e.setForwardMsg,v=e.getCustomersUrl,x=Object(a.useState)([]),b=Object(l.a)(x,2),g=b[0],f=b[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),_=O[0],w=O[1],k=Object(a.useState)(!1),C=Object(l.a)(k,2),I=C[0],T=C[1],z=Object(a.useState)(!1),A=Object(l.a)(z,2),N=(A[0],A[1]),D=Object(a.useState)(),P=Object(l.a)(D,2),R=(P[0],P[1]),W=Object(a.useState)(),E=Object(l.a)(W,2),B=E[0],L=E[1],F=Object(a.useState)(),M=Object(l.a)(F,2),U=M[0],K=M[1],H=Object(a.useState)(!1),Y=Object(l.a)(H,2),V=Y[0],q=Y[1],G=Object(a.useState)(1),J=Object(l.a)(G,2),Q=J[0],Z=J[1],$=Object(a.useRef)();Object(a.useEffect)((function(){var e=localStorage.getItem("agent"),t=function(){var t=Object(j.a)(Object(u.a)().mark((function t(){var n,a,o;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get(v+"/".concat(e),{params:{page:1,limit:20}},{headers:""});case 3:o=t.sent,console.log(o.status),L(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.result),K(null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.length),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.Error);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()}),[]);var ee=function(){n(!1),r([])};console.log(o);console.log(g);var te=function(){var e=Object(j.a)(Object(u.a)().mark((function e(n){var a,l,p,j,v,x,b,f,h,O,_,w,k,C,I;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),!(c.length>0)){e.next=50;break}a=0;case 3:if(!(a<c.length)){e.next=48;break}l=0;case 5:if(!(l<g.length)){e.next=45;break}if("text"!==c[a].type){e.next=26;break}return p={recipient_type:"individual",to:g[l],conversationId:"",name:"",from:"",wa_id:g[l],text:{body:c[a].data.body},type:c[a].type,data:"",isOwner:!0},e.prev=8,e.next=11,m.a.post(y,p,{headers:""});case 11:e.sent,ee(),i(!s),r([]),d("Message forwarded!"),T(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(8),d("Something went wrong!"),r([]),console.log(e.t0);case 24:e.next=42;break;case 26:return O={recipient_type:"individual",to:g[l],type:c[a].type,data:{id:null===(j=c[a])||void 0===j||null===(v=j.data)||void 0===v?void 0:v.id,filename:(null===(x=c[a])||void 0===x||null===(b=x.data)||void 0===b?void 0:b.filename)&&(null===(f=c[a])||void 0===f||null===(h=f.data)||void 0===h?void 0:h.filename)},name:"",from:"",wa_id:g[l],timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:""},e.prev=27,e.next=30,m.a.post(S,O,{headers:{"D360-API-KEY":t||localStorage.getItem("api_key")}});case 30:e.sent,ee(),i(!s),r([]),d("Message forwarded!"),T(!1),e.next=42;break;case 38:e.prev=38,e.t1=e.catch(27),d("Something went wrong!"),console.log(e.t1);case 42:l++,e.next=5;break;case 45:a++,e.next=3;break;case 48:e.next=91;break;case 50:_=0;case 51:if(!(_<g.length)){e.next=91;break}if("text"!==o.type){e.next=72;break}return w={recipient_type:"individual",to:g[_],conversationId:"",name:"",from:"",wa_id:g[_],text:{body:o.data.body},type:o.type,data:"",isOwner:!0},e.prev=54,e.next=57,m.a.post(y,w,{headers:""});case 57:e.sent,ee(),i(!s),r([]),d("Message forwarded!"),setTimeout((function(){d(null)}),1e3),T(!1),e.next=70;break;case 66:e.prev=66,e.t2=e.catch(54),d("Something went wrong!"),console.log(e.t2);case 70:e.next=88;break;case 72:return I={recipient_type:"individual",to:g[_],type:o.type,data:{id:o.data.id,caption:o.data.caption,filename:(null===o||void 0===o||null===(k=o.data)||void 0===k?void 0:k.filename)&&(null===o||void 0===o||null===(C=o.data)||void 0===C?void 0:C.filename)},name:"",from:"",wa_id:g[_],timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:""},e.prev=73,e.next=76,m.a.post(S,I,{headers:{"D360-API-KEY":t||localStorage.getItem("api_key")}});case 76:e.sent,ee(),i(!s),r([]),d("Message forwarded!"),T(!1),e.next=88;break;case 84:e.prev=84,e.t3=e.catch(73),d("Something went wrong!"),console.log(e.t3);case 88:_++,e.next=51;break;case 91:case"end":return e.stop()}}),e,null,[[8,19],[27,38],[54,66],[73,84]])})));return function(t){return e.apply(this,arguments)}}(),ne=B,ae=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("agent"),w(t.target.value),q(!0),e.prev=3,e.next=6,m.a.get(v+"/".concat(n,"/").concat(t.target.value),{params:{page:1,limit:20}},{headers:""});case 6:i=e.sent,console.log(i.data),q(!1),L(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.result),K(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.length),Z(1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i,s,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("agent"),!_){e.next=18;break}return q(!0),Z(n),e.prev=4,e.next=7,m.a.get(v+"/".concat(a,"/").concat(_),{params:{page:n,limit:20}},{headers:""});case 7:i=e.sent,console.log(i.data),L(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.result),q(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:e.next=32;break;case 18:return q(!0),Z(n),e.prev=20,e.next=23,m.a.get(v+"/".concat(a),{params:{page:n,limit:20}},{headers:""});case 23:l=e.sent,console.log(l.data),L(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.result),q(!1),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(20),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[4,13],[20,29]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{children:Object(X.jsx)("div",{id:"id01",className:"modal",ref:$,children:Object(X.jsxs)("form",{className:"modal-content",children:[Object(X.jsxs)("header",{style:{height:"95px",backgroundColor:"#04787c",position:"absolute",width:"436px",borderRadius:"4px 4px 0px 0px"},children:[Object(X.jsx)(Ce.a,{fontSize:"medium",style:{color:"#cccc",margin:"12px 10px -5px 10px",cursor:"pointer"},onClick:ee}),Object(X.jsx)("span",{style:{fontSize:"19px",margin:"0px 0px 0px 10px",fontWeight:"400",color:"#ffff"},children:"Forward message to"}),I?Object(X.jsx)(Ie.a,{style:{color:"#ffff",margin:"0px 0px -5px 169px",height:"28px",width:"28px"}}):g.length>0?Object(X.jsx)(we.a,{style:{color:"#ffff",margin:"0px 0px -5px 170px",cursor:"pointer"},onClick:te}):Object(X.jsx)(we.a,{style:{color:"#cccc",margin:"0px 0px -5px 170px",cursor:"default"}}),Object(X.jsx)("input",{placeholder:"Search for users",className:"searchConversation",onChange:function(e){return ae(e)}})]}),V?Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsxs)("div",{className:"container",children:[ne&&(null===ne||void 0===ne?void 0:ne.map((function(e){return Object(X.jsxs)("div",{className:g.find((function(t){return t==e.wa_id}))?"selected_card":(e.wa_id,"card"),onClick:function(){return function(e){if(g.find((function(t){return t==e}))){var t=g.indexOf(e),n=g.splice(t,1);console.log(g),f(g),console.log(n),R(n[0]),N(!1)}else f([].concat(Object(p.a)(g),[e])),N(!0)}(e.wa_id)},children:[g.find((function(t){return t==e.wa_id}))&&Object(X.jsx)(ze.a,{fontSize:"small",style:{color:"rgb(11 145 102)"}}),Object(X.jsxs)("label",{for:e.id,style:{marginLeft:"10px",cursor:"pointer"},children:[e.name," [","ED"+e.uid,"]"]})]})}))),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",margin:"8px"},count:Math.ceil(U/20),page:Q,onChange:oe})]})]})})})},De=n.p+"static/media/openChat2.ab01b0be.png",Pe=n(279),Re=n.n(Pe),We=n(283),Ee=n.n(We),Be=n(518),Le=n(281),Fe=n.n(Le),Me=n(276),Ue=n.n(Me),Ke=n(489),He=(n(368),n(481),n(492),n(526),n(178),n(369),n(516)),Ye=n(517),Ve=n(278),qe=n.n(Ve),Ge=(n(287),n(277)),Je=n.n(Ge),Qe=(n(370),n(189)),Xe=n.n(Qe),Ze=n(499),$e=n(527),et=n(96),tt=n.n(et),nt=n(509),at=n(528),ot=n(221),it=n.n(ot),st=n(529),lt=n(157),ct=n.n(lt),rt=n(158),dt=n.n(rt),ut=n(502),pt=n(496),jt=n(188),vt=n.n(jt),xt=n(475);function bt(e){var t=a.useState(!1),n=Object(l.a)(t,2),o=n[0],i=n[1],s=a.useState(),c=Object(l.a)(s,2),r=c[0],d=c[1],u=function(){i(!1),e.setReason(!1),e.setReasonDialog(!1)};return a.useEffect((function(){e.reasonDialog?i(!0):i(!1)}),[e.reasonDialog]),Object(X.jsx)("div",{children:Object(X.jsxs)(q.a,{open:o,onClose:u,children:[Object(X.jsx)(Q.a,{children:"Reason"}),Object(X.jsx)(J.a,{children:Object(X.jsx)(xt.a,{"aria-label":"minimum height",placeholder:"Write the reason!",minRows:3,style:{width:200},onChange:function(e){return d(e)}})}),Object(X.jsxs)(G.a,{children:[Object(X.jsx)(Y.a,{onClick:u,children:"Cancel"}),Object(X.jsx)(Y.a,{onClick:function(t){t.preventDefault(),e.setReasonVal(r),e.setReason(!0)},children:"Send"}),Object(X.jsx)("span",{children:e.visibleCircularbar&&Object(X.jsx)(Ie.a,{style:{height:"25px",width:"25px"}})})]})]})})}var gt=localStorage.getItem("namespace"),ft=localStorage.getItem("waid"),mt=(localStorage.getItem("device"),gt),ht=ft,Ot=["className"],yt=o.a.forwardRef((function(e,t){return Object(X.jsx)(pt.a,Object(v.a)({elevation:6,ref:t,variant:"filled"},e))})),St=Object(te.a)((function(e){var t=e.className,n=Object(g.a)(e,Ot);return Object(X.jsx)(ne.a,Object(v.a)(Object(v.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(d.a)({},"& .".concat(ae.a.tooltip),{backgroundColor:"rgba(80, 80, 80, 0.92)",color:"#ffff",fontWeight:"500",maxWidth:350,fontSize:t.typography.pxToRem(12),border:"1px solid rgba(80, 80, 80, 0.92)",overflowX:"hidden",overflowY:"scroll",maxHeight:"300px"})})),_t=function(e){e.apiUrl;var t,n,o,i,s,c,r,d,p=e.conversation,v=e.setTutorTagUpdated,x=(e.setTutorRatingUpdated,e.updated),b=e.setUpdated,g=Object(a.useState)([]),f=Object(l.a)(g,2),h=f[0],O=(f[1],Object(a.useState)([])),y=Object(l.a)(O,2),S=(y[0],y[1],Object(a.useState)()),_=Object(l.a)(S,2),w=(_[0],_[1],Object(a.useState)(2)),k=Object(l.a)(w,2),C=(k[0],k[1],Object(a.useState)(-1)),I=Object(l.a)(C,2),T=(I[0],I[1],Object(a.useState)(!1)),z=Object(l.a)(T,2),A=z[0],N=z[1],D=Object(a.useState)(),P=Object(l.a)(D,2),R=P[0],W=P[1],E=Object(a.useState)(),B=Object(l.a)(E,2),L=(B[0],B[1],Object(a.useState)(!1)),F=Object(l.a)(L,2),M=F[0],K=F[1],Q=Object(a.useState)(),Z=Object(l.a)(Q,2),$=Z[0],te=Z[1],ne=Object(a.useState)(null===p||void 0===p?void 0:p.writer),ae=Object(l.a)(ne,2),ie=(ae[0],ae[1]),se=Object(a.useState)(!1),le=Object(l.a)(se,2),ce=le[0],re=le[1],de=Object(a.useState)(""),ue=Object(l.a)(de,2),pe=ue[0],je=ue[1],ve=Object(a.useState)(!1),xe=Object(l.a)(ve,2),be=xe[0],ge=xe[1],fe=Object(a.useState)(!1),me=Object(l.a)(fe,2),he=(me[0],me[1],Object(a.useState)(!1)),Oe=Object(l.a)(he,2),ye=(Oe[0],Oe[1],Object(a.useState)()),Se=Object(l.a)(ye,2),_e=(Se[0],Se[1],Object(a.useState)()),we=Object(l.a)(_e,2),ke=(we[0],we[1],"top"),Ce="center",Ie=Object(a.useState)(""),Te=Object(l.a)(Ie,2),ze=Te[0],Ae=Te[1],Ne=Object(a.useState)(!1),De=Object(l.a)(Ne,2),Pe=De[0],Re=De[1],We=function(e,t){"clickaway"!==t&&Re(!1)},Ee=function(e){e.preventDefault(),ge(!0)},Be=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i,s,l,c,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===p||void 0===p||!p.wa_id){e.next=8;break}return console.log({reasonVal:pe}),r={name:null===p||void 0===p?void 0:p.name,from:"",wa_id:null===p||void 0===p?void 0:p.wa_id,templateName:"tutor_inactive_active_template",templateText:"Hi ".concat(p.name,", Your account is ").concat("active"===n?"unblocked":"blocked"," ").concat(void 0!==pe&&0!==(null===pe||void 0===pe||null===(a=pe.target)||void 0===a||null===(o=a.value)||void 0===o?void 0:o.length)?"Reason: ".concat(null===pe||void 0===pe||null===(i=pe.target)||void 0===i?void 0:i.value):" "),template:{namespace:mt,language:"en"},param1:"active"===n?"ACTIVATED":"BLOCKED",param2:p.name,param3:"active"===n?"activated":"blocked",param4:void 0!==pe&&0!==(null===pe||void 0===pe||null===(s=pe.target)||void 0===s||null===(l=s.value)||void 0===l?void 0:l.length)?"Reason: ".concat(null===pe||void 0===pe||null===(c=pe.target)||void 0===c?void 0:c.value," "):" ",button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.next=6,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/tutorActiveInactiveTemplate"),r,{headers:""}).then(function(){var e=Object(j.a)(Object(u.a)().mark((function e(a){var o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={status:n},e.next=3,m.a.put("".concat(localStorage.getItem("api"),"/api/tutor/setTutorStatus/").concat(t),o);case 3:console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e)}));case 6:e.next=10;break;case 8:console.log("WhatsApp number is not valid"),alert("Invalid WhatsApp Number!");case 10:te(n),b(!x),K(!1),re(!1),ge(!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ce){e.next=7;break}return K(!0),t={wa_id:"+".concat(null===p||void 0===p?void 0:p.wa_id)},e.next=5,m.a.post("".concat(localStorage.getItem("api"),"/api/conversations/contactValidation"),t);case 5:"invalid"===(n=e.sent).data.contacts[0].status?(ge(!1),re(!1),K(!1),Re(!0),Ae(n.data.contacts[0].status+" contact")):(console.log({valtest:"done"}),"inactive"===(null===p||void 0===p?void 0:p.tutor_status)?Be(null===p||void 0===p?void 0:p.tutor_id,"active"):Be(null===p||void 0===p?void 0:p.tutor_id,"inactive"));case 7:case"end":return e.stop()}}),e)}))),[ce]);var Le=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={status:n},e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/tutor/setTutorWriterStatus/").concat(t),a);case 4:ie(n),b(!x),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Fe=Object(a.useState)(!1),Me=Object(l.a)(Fe,2),Ue=Me[0],Ke=Me[1],He=function(){Ke(!1)},Ye=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={tag:R},e.prev=1,e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/tutor/addTag/").concat(null===p||void 0===p?void 0:p.tutor_id),t);case 4:e.sent,Ke(!1),v(R),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.Error);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ve=Object(a.useState)(null),qe=Object(l.a)(Ve,2),Ge=qe[0],Je=(qe[1],Boolean(Ge),function(){N(!A)});console.log(h);return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("div",{className:A?"tutorlist highlighted":"tutorlist",children:Object(X.jsxs)("div",{className:"userTab",children:[Object(X.jsx)(H.a,{className:"conversationImg",children:null===p||void 0===p||null===(t=p.name)||void 0===t?void 0:t.slice(0,2)}),Object(X.jsxs)("div",{style:{paddingBottom:"5px"},children:[Object(X.jsxs)("div",{className:"conversationName",children:["".concat(null===p||void 0===p?void 0:p.name)," ",(null===p||void 0===p?void 0:p.writer)&&Object(X.jsx)("span",{children:Object(X.jsx)(vt.a,{fontSize:"small",style:{fontSize:"14px"}})}),Object(X.jsx)("span",{style:{fontSize:"12px",color:"green",marginLeft:"5px"},children:(null===p||void 0===p?void 0:p.highlights)&&(null===p||void 0===p?void 0:p.highlights.map((function(e){var t,n;return Object(X.jsxs)("span",{children:[null===e||void 0===e||null===(t=e.path)||void 0===t?void 0:t.slice(0,1),": ",null===e||void 0===e||null===(n=e.texts)||void 0===n?void 0:n.map((function(e){return Object(X.jsxs)("span",{children:[e.value,"\xa0"]})}))]})})))})]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",fontSize:"12px"},children:[null===p||void 0===p?void 0:p.tutor_id," ",Object(X.jsx)("span",{style:{color:"green",fontWeight:"800",marginLeft:"5px",fontSize:"13px",cursor:"pointer"},children:Object(X.jsx)(St,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{style:{marginBottom:"10px"},children:"Sessions Done:"}),null===p||void 0===p||null===(n=p.sessions_done)||void 0===n?void 0:n.map((function(e){return Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginTop:"5px"},children:["\u2022"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:e})]})}))]}),children:Object(X.jsx)("span",{children:(null===p||void 0===p?void 0:p.sessions_done)&&"["+(null===p||void 0===p||null===(o=p.sessions_done)||void 0===o?void 0:o.filter((function(e,t,n){return n.indexOf(e)===t})).length)+"]"})})}),Object(X.jsxs)($e.a,{sx:{width:200,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[Object(X.jsx)(Ze.a,{name:"read-only",size:"small",value:(null===p||void 0===p?void 0:p.rating)/2,precision:.1,emptyIcon:Object(X.jsx)(tt.a,{style:{opacity:.55},fontSize:"inherit"}),readOnly:!0}),"\xa0",Object(X.jsx)("span",{style:{fontSize:"13px",fontWeight:"700"},children:null===(i=""+(null===p||void 0===p?void 0:p.rating)/2)||void 0===i?void 0:i.slice(0,4)}),Object(X.jsx)("span",{children:Object(X.jsx)(St,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{style:{marginBottom:"10px"},children:"Last 5 reviews"}),null===p||void 0===p||null===(s=p.rating_and_reviews)||void 0===s||null===(c=s.slice(Math.max((null===p||void 0===p||null===(r=p.rating_and_reviews)||void 0===r?void 0:r.length)-5,0)))||void 0===c?void 0:c.map((function(e){return Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginTop:"5px"},children:["-"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:e.reviews})]})}))]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"16px",cursor:"pointer"}})})})]})]})]}),Object(X.jsx)("div",{style:{display:"flex",flex:"10%",flexDirection:"column",justifyContent:"center"},children:Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",alignSelf:"flex-end",cursor:"pointer"},children:Object(X.jsx)("span",{style:{paddingRight:"5px"},children:A?Object(X.jsx)(Xe.a,{fontSize:"medium",color:"action",onClick:Je}):Object(X.jsx)(U.a,{fontSize:"medium",color:"action",onClick:Je})})})})]})}),A&&Object(X.jsxs)("div",{className:"conversationDetails",children:[Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"7px"},children:[Object(X.jsxs)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:["Highest Degree: ",Object(X.jsx)("span",{children:null===p||void 0===p?void 0:p.highest_degree})]}),"active"===(null===p||void 0===p?void 0:p.tutor_status)?Object(X.jsxs)("span",{style:{marginTop:"-8px",cursor:"pointer"},onClick:Ee,children:[console.log({valTestConv:null===p||void 0===p?void 0:p.tutor_status,checked:$}),Object(X.jsx)(ct.a,{fontSize:"large"})]}):"inactive"==(null===p||void 0===p?void 0:p.tutor_status)?Object(X.jsx)("span",{style:{marginTop:"-8px",cursor:"pointer"},onClick:Ee,children:Object(X.jsx)(dt.a,{fontSize:"large",color:"disabled"})}):null,Object(X.jsx)(ut.a,{open:Pe,autoHideDuration:2e3,onClose:We,anchorOrigin:{vertical:ke,horizontal:Ce},children:Object(X.jsx)(yt,{onClose:We,severity:"info",sx:{width:"100%"},children:ze})},ke+Ce)]}),be&&Object(X.jsx)(bt,{setReason:re,setReasonVal:je,setReasonDialog:ge,reasonDialog:be,visibleCircularbar:M}),Object(X.jsx)("div",{style:{margin:"15px 7px 7px 7px"},children:Object(X.jsxs)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:["College:"," ",Object(X.jsx)("span",{children:(null===p||void 0===p?void 0:p.academic_info)&&(null===p||void 0===p||null===(d=p.academic_info[0])||void 0===d?void 0:d.college)})]})}),Object(X.jsx)("div",{style:{margin:"23px 7px 7px 7px"},children:Object(X.jsxs)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:["WhatsApp: ",Object(X.jsx)("span",{children:null===p||void 0===p?void 0:p.wa_id})]})}),Object(X.jsx)("div",{style:{margin:"23px 7px 7px 7px"},children:Object(X.jsxs)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:["Email: ",Object(X.jsx)("span",{children:null===p||void 0===p?void 0:p.email})]})}),Object(X.jsxs)("div",{style:{margin:"15px 7px 7px 7px"},children:[Object(X.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:"Subjects known:"}),(null===p||void 0===p?void 0:p.subjects)&&(null===p||void 0===p?void 0:p.subjects.map((function(e){return Object(X.jsx)(nt.a,{style:{margin:"6px"},label:e})})))]}),Object(X.jsxs)("div",{style:{margin:"15px 7px 7px 7px"},children:[Object(X.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:"Add tag:"}),(null===p||void 0===p?void 0:p.tags)&&(null===p||void 0===p?void 0:p.tags.map((function(e){return Object(X.jsx)(nt.a,{style:{margin:"6px"},label:e,color:"primary"})}))),Object(X.jsxs)(at.a,{style:{height:"36px",width:"36px"},color:"primary","aria-label":"add",children:[Object(X.jsx)(it.a,{onClick:function(){Ke(!0)}}),Object(X.jsxs)(q.a,{open:Ue,onClose:He,children:[Object(X.jsxs)(J.a,{children:[Object(X.jsx)(st.a,{children:"Add New Tag"}),Object(X.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Tag Name",type:"text",value:R,onChange:function(e){return W(e.target.value)},fullWidth:!0,variant:"standard"})]}),Object(X.jsxs)(G.a,{children:[Object(X.jsx)(Y.a,{onClick:He,children:"Cancel"}),Object(X.jsx)(Y.a,{onClick:Ye,children:"Add"})]})]})]})]}),Object(X.jsxs)("div",{style:{display:"flex",margin:"15px 7px 7px 7px"},children:[Object(X.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px"},children:"Writer:"}),null!==p&&void 0!==p&&p.writer?Object(X.jsx)("span",{style:{marginTop:"-8px",cursor:"pointer"},onClick:function(){return Le(null===p||void 0===p?void 0:p.tutor_id,!1)},children:Object(X.jsx)(ct.a,{fontSize:"large",color:"primary"})}):null!==p&&void 0!==p&&p.writer?null:Object(X.jsx)("span",{style:{marginTop:"-8px",cursor:"pointer"},onClick:function(){return Le(null===p||void 0===p?void 0:p.tutor_id,!0)},children:Object(X.jsx)(dt.a,{fontSize:"large",color:"disabled"})})]})]})]})},wt=n(224),kt=n.n(wt),Ct=n(533),It=n(484),Tt=n(493),zt=n(534),At=(n(250),n(371),n(108)),Nt=n.n(At),Dt=n(270),Pt=n.n(Dt),Rt=n(120),Wt=n.n(Rt),Et=n(535),Bt=n(107),Lt=n.n(Bt),Ft=n(263),Mt=n.n(Ft),Ut=n(161),Kt=n.n(Ut),Ht=n(497),Yt=n(511),Vt=n(522),qt=n(477),Gt=n(485),Jt=n(222),Qt=n(141),Xt=n.n(Qt),Zt=n(142),$t=n.n(Zt),en=n.p+"static/media/cancelledPic3.16caf3da.png",tn=n(515),nn=n(262),an=n.n(nn),on=["children","onClose"],sn=Object(te.a)(q.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),ln=function(e){var t=e.children,n=e.onClose,a=Object(g.a)(e,on);return Object(X.jsxs)(Q.a,Object(v.a)(Object(v.a)({sx:{m:0,p:2}},a),{},{children:[t,n?Object(X.jsx)(tn.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(X.jsx)(an.a,{})}):null]}))},cn={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"};function rn(e){var t=e.rating_and_reviews,n=(e.tutorId,e.handleAssignTutorRating,e.setShowTutorRatingBox),o=e.showTutorRatingBox,i=(e.setSendTutorRating,e.setStoreTutorRating),s=a.useState(!1),c=Object(l.a)(s,2),r=c[0],d=c[1],u=a.useState(+(null===t||void 0===t?void 0:t.rating)/2),p=Object(l.a)(u,2),j=p[0],x=p[1],b=a.useState(+(null===t||void 0===t?void 0:t.speed)/2),g=Object(l.a)(b,2),f=g[0],m=g[1],h=a.useState(+(null===t||void 0===t?void 0:t.accuracy)/2),O=Object(l.a)(h,2),y=O[0],S=O[1],_=a.useState(+(null===t||void 0===t?void 0:t.legitimacy)/2),w=Object(l.a)(_,2),k=w[0],C=w[1],I=a.useState(null===t||void 0===t?void 0:t.reviews),T=Object(l.a)(I,2),z=T[0],A=T[1],N=a.useState({hoverRating:""+ +(null===t||void 0===t?void 0:t.rating)/2,hoverSpeed:""+ +(null===t||void 0===t?void 0:t.speed)/2,hoverAccuracy:""+ +(null===t||void 0===t?void 0:t.accuracy)/2,hoverLegitimacy:""+ +(null===t||void 0===t?void 0:t.legitimacy)/2,hoverReview:null===t||void 0===t?void 0:t.reviews}),D=Object(l.a)(N,2),P=D[0],R=D[1],W=function(){d(!1),n(!1)};console.log({rating_and_reviews:t});return a.useEffect((function(){d(!!o)}),[o]),Object(X.jsx)("div",{children:Object(X.jsxs)(sn,{onClose:W,"aria-labelledby":"customized-dialog-title",open:r,children:[Object(X.jsx)(ln,{id:"customized-dialog-title",onClose:W,children:"\xa0 Rating & Reviews"}),Object(X.jsxs)(J.a,{dividers:!0,style:{textAlign:"left",margin:"0px 25px"},children:[Object(X.jsxs)(oe.a,{gutterBottom:!0,style:{marginBottom:"20px"},children:[Object(X.jsx)("h3",{style:{marginBottom:"10px"},children:"Overall rating"}),Object(X.jsxs)($e.a,{sx:{width:200,display:"flex",alignItems:"center"},children:[Object(X.jsx)(Ze.a,{name:"hover-feedback",value:j,style:{fontSize:"35px"},precision:.5,onChange:function(e,t){x(t)},onChangeActive:function(e,t){R(Object(v.a)(Object(v.a)({},P),{},{hoverRating:t}))},emptyIcon:Object(X.jsx)(tt.a,{style:{opacity:.55},fontSize:"inherit"})}),null!==j&&Object(X.jsx)($e.a,{sx:{ml:2},children:cn[-1!==P.hoverRating?P.hoverRating:j]})]})]}),Object(X.jsx)(oe.a,{gutterBottom:!0,style:{marginBottom:"30px",borderTop:"2px solid rgb(241, 241, 241)"},children:Object(X.jsx)("h3",{style:{marginBottom:"-10px"},children:"Rate attributes "})}),Object(X.jsxs)(oe.a,{gutterBottom:!0,style:{marginBottom:"30px"},children:[Object(X.jsx)("h5",{style:{marginBottom:"3px"},children:"Speed "}),Object(X.jsxs)($e.a,{sx:{width:200,display:"flex",alignItems:"center"},children:[Object(X.jsx)(Ze.a,{name:"hover-feedback",value:f,precision:.5,onChange:function(e,t){m(t)},onChangeActive:function(e,t){R(Object(v.a)(Object(v.a)({},P),{},{hoverSpeed:t}))},emptyIcon:Object(X.jsx)(tt.a,{style:{opacity:.55},fontSize:"inherit"})}),null!==f&&Object(X.jsx)($e.a,{sx:{ml:2},children:cn[-1!==P.hoverSpeed?P.hoverSpeed:f]})]})]}),Object(X.jsxs)(oe.a,{gutterBottom:!0,style:{marginBottom:"30px"},children:[Object(X.jsx)("h5",{style:{marginBottom:"3px"},children:"Legitimacy"}),Object(X.jsxs)($e.a,{sx:{width:200,display:"flex",alignItems:"center"},children:[Object(X.jsx)(Ze.a,{name:"hover-feedback",value:k,precision:.5,onChange:function(e,t){C(t)},onChangeActive:function(e,t){R(Object(v.a)(Object(v.a)({},P),{},{hoverLegitimacy:t}))},emptyIcon:Object(X.jsx)(tt.a,{style:{opacity:.55},fontSize:"inherit"})}),null!==k&&Object(X.jsx)($e.a,{sx:{ml:2},children:cn[-1!==P.hoverLegitimacy?P.hoverLegitimacy:k]})]})]}),Object(X.jsxs)(oe.a,{gutterBottom:!0,style:{marginBottom:"20px"},children:[Object(X.jsx)("h5",{style:{marginBottom:"3px"},children:"Accuracy"}),Object(X.jsxs)($e.a,{sx:{width:200,display:"flex",alignItems:"center"},children:[Object(X.jsx)(Ze.a,{name:"hover-feedback",value:y,precision:.5,onChange:function(e,t){S(t)},onChangeActive:function(e,t){R(Object(v.a)(Object(v.a)({},P),{},{hoverAccuracy:t}))},emptyIcon:Object(X.jsx)(tt.a,{style:{opacity:.55},fontSize:"inherit"})}),null!==y&&Object(X.jsx)($e.a,{sx:{ml:2},children:cn[-1!==P.hoverAccuracy?P.hoverAccuracy:y]})]})]}),Object(X.jsxs)(oe.a,{gutterBottom:!0,style:{borderTop:"2px solid rgb(241, 241, 241)",marginBottom:"20px"},children:[Object(X.jsx)("h3",{style:{marginBottom:"10px"},children:"Review"}),Object(X.jsx)(V.a,{placeholder:"write your reviews!",multiline:!0,onChange:function(e){return A(e.target.value)},value:z,rows:2,maxRows:4,style:{width:"30rem"}})]})]}),Object(X.jsx)(G.a,{style:{padding:"13px 24px"},children:Object(X.jsx)(Y.a,{variant:"contained",onClick:function(){i({rating:""+2*+j,speed:""+2*+f,accuracy:""+2*+y,legitimacy:""+2*+k,reviews:z})},children:"Submit"})})]})})}var dn=n(162),un=n.n(dn),pn=["className"],jn=Object(te.a)((function(e){var t=e.className,n=Object(g.a)(e,pn);return Object(X.jsx)(ne.a,Object(v.a)(Object(v.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(d.a)({},"& .".concat(ae.a.tooltip),{backgroundColor:"rgba(80, 80, 80, 0.92)",color:"#ffff",fontWeight:"500",maxWidth:350,fontSize:t.typography.pxToRem(12),border:"1px solid rgba(80, 80, 80, 0.92)"})})),vn=function(e){var t,n,o,i=e.notified_tutors,s=e.assigned_tutors,c=e.tutor_interested,r=(e.tutor_dealt_amount,e.sessionId),d=e.setAssignedTutor,x=e.tutorPayout,b=e.subject,g=e.deadline,f=e.duration,h=e.updated,O=e.setUpdated,y=e.sessionType,S=Object(a.useState)("1"),_=Object(l.a)(S,2),w=_[0],k=_[1],C=Object(a.useState)(!1),I=Object(l.a)(C,2),T=I[0],z=I[1],A=Object(a.useState)(),N=Object(l.a)(A,2),D=N[0],P=N[1],R=Object(a.useState)(),E=Object(l.a)(R,2),B=E[0],L=E[1],F=Object(a.useState)(),M=Object(l.a)(F,2),U=M[0],K=M[1],H=Object(a.useState)(),Z=Object(l.a)(H,2),$=Z[0],te=Z[1],ne=Object(a.useState)(),ae=Object(l.a)(ne,2),ie=ae[0],se=ae[1],le=Object(a.useState)(),ce=Object(l.a)(le,2),re=ce[0],de=ce[1],ue=Object(a.useState)(),pe=Object(l.a)(ue,2),je=pe[0],ve=pe[1],xe=Object(a.useState)("IMPS"),be=Object(l.a)(xe,2),ge=be[0],fe=be[1],he=Object(a.useState)(!1),Oe=Object(l.a)(he,2),ye=Oe[0],Se=Oe[1],_e=Object(a.useState)(!1),we=Object(l.a)(_e,2),ke=we[0],Ce=we[1],Te=Object(a.useState)(),ze=Object(l.a)(Te,2),Ae=ze[0],Ne=ze[1],De=Object(a.useState)(0),Pe=Object(l.a)(De,2),Re=Pe[0],We=Pe[1],Ee=Object(a.useState)(!1),Be=Object(l.a)(Ee,2),Le=Be[0],Fe=Be[1],Me=Object(a.useState)(!1),Ue=Object(l.a)(Me,2),Ke=Ue[0],He=Ue[1],Ye=localStorage.getItem("device"),Ve=Object(a.useState)(""),qe=Object(l.a)(Ve,2),Ge=qe[0],Je=(qe[1],Object(a.useState)(!1)),Qe=Object(l.a)(Je,2),Xe=Qe[0],Ze=Qe[1],et=Object(a.useState)(),tt=Object(l.a)(et,2),at=tt[0],ot=tt[1],it=Object(a.useState)(),st=Object(l.a)(it,2),lt=st[0],ct=st[1],rt=Object(a.useState)(!1),dt=Object(l.a)(rt,2),ut=dt[0],pt=dt[1],jt=Object(a.useState)(),vt=Object(l.a)(jt,2),xt=vt[0],bt=vt[1],gt=Object(a.useState)(),ft=Object(l.a)(gt,2),Ot=ft[0],yt=ft[1];console.log(x);var St=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={session_id:r,tutor_id:t,tutor_dealt_amount:100*xt},e.prev=1,e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/assignedTutorUpdateAmount"),n);case 4:e.sent,pt(!1),O(!h),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log({err:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(n);case 2:(null===Ot||void 0===Ot?void 0:Ot.rating_and_reviews)&&(null===Ot||void 0===Ot||Ot.rating_and_reviews.map((function(e){e.sessionId===r&&We(e)}))),ct(n),Ze(!0);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,o,i,l,c,p,j,x,b,h,O,S,_;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.find((function(e){return e.tutor_id==t.tutor_id}))){e.next=45;break}if(n={tutor_duration:Ge||f},a={tutorId:t.tutor_id,sessions_assigned:{session_id:r,deadline:g,duration:f,type:y}},e.prev=3,!t.wa_id||!t.email){e.next=18;break}return l={session_id:r,assigned_tutor:Object(v.a)(Object(v.a)(Object(v.a)({},t),n),{},{medium:"wa-mail"})},e.next=8,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/asignTutor"),l,{headers:{"Content-Type":"application/json"}});case 8:return c=e.sent,e.next=11,Ut(t.wa_id,t.name,t.tutor_id);case 11:return e.next=13,Jt(t.email,t.name,t.tutor_id);case 13:return e.next=15,m.a.post("".concat(localStorage.getItem("api"),"/api/tutor/setTutorAssignedSession"),a,{headers:{"Content-Type":"application/json"}});case 15:d(null===c||void 0===c||null===(o=c.data)||void 0===o||null===(i=o.result)||void 0===i?void 0:i.assigned_tutors.length),e.next=40;break;case 18:if(!t.wa_id||t.email){e.next=30;break}return x={session_id:r,assigned_tutor:Object(v.a)(Object(v.a)(Object(v.a)({},t),n),{},{medium:"wa"})},e.next=22,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/asignTutor"),x,{headers:{"Content-Type":"application/json"}});case 22:return b=e.sent,e.next=25,Ut(t.wa_id,t.name,t.tutor_id);case 25:return e.next=27,m.a.post("".concat(localStorage.getItem("api"),"/api/tutor/setTutorAssignedSession"),a,{headers:{"Content-Type":"application/json"}});case 27:d(null===b||void 0===b||null===(p=b.data)||void 0===p||null===(j=p.result)||void 0===j?void 0:j.assigned_tutors.length),e.next=40;break;case 30:if(t.wa_id||!t.email){e.next=40;break}return S={session_id:r,assigned_tutor:Object(v.a)(Object(v.a)(Object(v.a)({},t),n),{},{medium:"mail"})},e.next=34,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/asignTutor"),S,{headers:{"Content-Type":"application/json"}});case 34:return _=e.sent,e.next=37,Jt(t.email,t.name,t.tutor_id);case 37:return e.next=39,m.a.post("".concat(localStorage.getItem("api"),"/api/tutor/setTutorAssignedSession"),a,{headers:{"Content-Type":"application/json"}});case 39:d(null===_||void 0===_||null===(h=_.data)||void 0===h||null===(O=h.result)||void 0===O?void 0:O.assigned_tutors.length);case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(3),console.log(e.t0);case 45:case"end":return e.stop()}}),e,null,[[3,42]])})));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n,a){var o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={name:t,from:"",wa_id:n,templateName:"cancelassigned_tutors",templateText:"Hi ".concat(t,", You are cancelled for the ").concat("Live Session"===y?"Live session":"General session"," with session id ").concat(r," "),template:{namespace:mt,language:"en"},param1:"".concat("Live Session"===y?"LIVE SESSION":"GENERAL SESSION"," UNASSIGNED"),param2:t,param3:"Live Session"===y?"Live session":"General session",param4:r,button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/tutorActiveInactiveTemplate"),o,{headers:""}).then(function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={status:"cancelled"},e.next=3,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/cancel-tutor/").concat(r,"/").concat(a),n);case 3:console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e)}));case 4:O(!h),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),At=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i,l,c,r,d,p,j;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),L(null===(a=s[t])||void 0===a?void 0:a.name),e.prev=2,e.next=5,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutorDetail/").concat(null===(o=s[t])||void 0===o?void 0:o.tutor_id));case 5:j=e.sent,K(null===j||void 0===j||null===(i=j.data)||void 0===i||null===(l=i.Bank)||void 0===l?void 0:l.acc_no),te(null===j||void 0===j||null===(c=j.data)||void 0===c||null===(r=c.Bank)||void 0===r?void 0:r.ifsc_code),se(null===j||void 0===j||null===(d=j.data)||void 0===d||null===(p=d.Bank)||void 0===p?void 0:p.upi_id),de(null===j||void 0===j?void 0:j.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:z(!0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Nt=function(){z(!1),de(null),ve(null)};Object(a.useEffect)(Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o,i,s,l,c,d,p,j,v,f,h,O,y,S,_,w,k,C,I,T,z,A,N,P,R,W,E,B,L,F,M,U,K;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===x||void 0===x||null===(t=x.payload)||void 0===t||null===(n=t.payout)||void 0===n||null===(a=n.entity)||void 0===a?void 0:a.id)!=Ae||"processed"!=(null===x||void 0===x||null===(o=x.payload)||void 0===o||null===(i=o.payout)||void 0===i||null===(s=i.entity)||void 0===s?void 0:s.status)){e.next=12;break}return W=null===x||void 0===x||null===(w=x.payload)||void 0===w||null===(k=w.payout)||void 0===k?void 0:k.entity,e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/update-tutor-payment-status/").concat(r,"/").concat(re.wa_id,"/").concat(Ae),W);case 4:return e.sent,Ce(!0),E={name:re.name,from:"",wa_id:re.wa_id,templateName:"paytutor_send_notify",templateText:"Hi *{{1}}*. This is Tutorpoint. An amount of *Rs {{2}}* has been sent to your bank account registered with us. Following are the details :   \n\n1. Session ID : *{{3}}*\n2. Tutor ID : *{{4}}*\n2. Session Subject and Topic : *{{5}}*\n3. Date and Time : *{{6}}*\n4. UTR No. : *{{7}}*\n5. TDS Deducted : *{{8}}*",template:{namespace:mt,language:"en"},param1:"Payout Received (Your rating for this session ".concat((null===re||void 0===re?void 0:re.session_rating)&&(null===re||void 0===re?void 0:re.session_rating.slice(0,4)),")"),param2:re.name,param3:"".concat((null===x||void 0===x||null===(C=x.payload)||void 0===C||null===(I=C.payout)||void 0===I||null===(T=I.entity)||void 0===T?void 0:T.amount)/100," INR"),param4:r,param5:"".concat(null===re||void 0===re?void 0:re.tutor_id," (Profile rating: ").concat(null!==re&&void 0!==re&&re.session_rating&&null!==re&&void 0!==re&&re.rating?null===(z=""+(+(null===re||void 0===re?void 0:re.rating)+ +(null===re||void 0===re?void 0:re.session_rating))/4)||void 0===z?void 0:z.slice(0,4):null===re||void 0===re||!re.session_rating||null!==re&&void 0!==re&&re.rating?"0":null===(A=""+(null===re||void 0===re?void 0:re.session_rating)/2)||void 0===A?void 0:A.slice(0,4),")"),param6:b,param7:new Date(g).toLocaleString(),param8:null===x||void 0===x||null===(N=x.payload)||void 0===N||null===(P=N.payout)||void 0===P||null===(R=P.entity)||void 0===R?void 0:R.utr,param9:!Ke&&null!==re&&void 0!==re&&re.pan?(.1*D).toString():Ke||null!==re&&void 0!==re&&re.pan?(0*D).toString():(.2*D).toString(),button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.next=9,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/tutorPaymentTemplate"),E,{headers:""});case 9:e.sent,e.next=26;break;case 12:if((null===x||void 0===x||null===(l=x.payload)||void 0===l||null===(c=l.payout)||void 0===c||null===(d=c.entity)||void 0===d?void 0:d.id)!=Ae||"reversed"!=(null===x||void 0===x||null===(p=x.payload)||void 0===p||null===(j=p.payout)||void 0===j||null===(v=j.entity)||void 0===v?void 0:v.status)){e.next=20;break}return F=null===x||void 0===x||null===(B=x.payload)||void 0===B||null===(L=B.payout)||void 0===L?void 0:L.entity,e.next=16,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/update-tutor-payment-status/").concat(r,"/").concat(re.wa_id,"/").concat(Ae),F);case 16:e.sent,Ce(!0),e.next=26;break;case 20:if((null===x||void 0===x||null===(f=x.payload)||void 0===f||null===(h=f.payout)||void 0===h||null===(O=h.entity)||void 0===O?void 0:O.id)!=Ae||"cancelled"!=(null===x||void 0===x||null===(y=x.payload)||void 0===y||null===(S=y.payout)||void 0===S||null===(_=S.entity)||void 0===_?void 0:_.status)){e.next=26;break}return K=null===x||void 0===x||null===(M=x.payload)||void 0===M||null===(U=M.payout)||void 0===U?void 0:U.entity,e.next=24,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/update-tutor-payment-status/").concat(r,"/").concat(re.wa_id,"/").concat(Ae),K);case 24:e.sent,Ce(!0);case 26:case"end":return e.stop()}}),e)}))),[x]);var Dt={username:"rzp_live_Jk4vwq7tyL9Aeg",password:"qUjOJWotN6x47WSDExJ4NURs"},Pt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o,i,s,l,c,d,p,j,x,b,g,f,y,S,_,w,k,C,I,T,z,A,N,P,R,W,E,B,L,F,M,U,K,H,Y,V,q,G,J,Q,X,Z,$,ee,te,ne,ae,oe,ie,se,le,ce,de,ue,pe;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("upi"!=je){e.next=53;break}if(Se(!0),t={name:re.name,email:re.email,contact:re.wa_id,type:"vendor",reference_id:re.tutor_id},e.prev=3,re.contact_id){e.next=37;break}return e.next=7,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/contacts"),t,{headers:Object(v.a)({},Dt)});case 7:if(a=e.sent,console.log(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.result),"bank"!=je){e.next=23;break}return x={contact_id:null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.contact_id,account_type:"bank_account",bank_account:{name:re.name,ifsc:null===re||void 0===re||null===(i=re.Bank)||void 0===i?void 0:i.ifsc_code,account_number:null===re||void 0===re||null===(s=re.Bank)||void 0===s?void 0:s.acc_no}},e.next=13,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/fund_accounts_bank/").concat(re.wa_id),x,{headers:Object(v.a)({},Dt)});case 13:return b=e.sent,g={account_number:"3434949239801329",fund_account_id:null===b||void 0===b||null===(l=b.data)||void 0===l?void 0:l.fund_bank_id,amount:!Ke&&null!==re&&void 0!==re&&re.pan?100*D-10*D:Ke||null!==re&&void 0!==re&&re.pan?100*D:100*D-20*D,currency:"INR",mode:ge,purpose:"vendor bill",reference_id:null===b||void 0===b||null===(c=b.data)||void 0===c?void 0:c.tutor_id,narration:"Tutor Fund Transfer",notes:{TDS:!Ke&&re.pan?.1*D:Ke||null!==re&&void 0!==re&&re.pan?0*D:.2*D,PAN:re.pan?null===re||void 0===re?void 0:re.pan:"",EMAIL:re.email,SESSION:r}},e.next=17,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payouts/").concat(re.wa_id,"/").concat(r),g,{headers:Object(v.a)({},Dt)});case 17:f=e.sent,console.log(null===f||void 0===f?void 0:f.data),Ne(null===f||void 0===f||null===(d=f.data)||void 0===d||null===(p=d.rpay)||void 0===p?void 0:p.id),console.log(null===b||void 0===b||null===(j=b.data)||void 0===j?void 0:j.result),e.next=35;break;case 23:if("upi"!=je){e.next=35;break}return I={contact_id:null===a||void 0===a||null===(y=a.data)||void 0===y?void 0:y.contact_id,account_type:"vpa",vpa:{address:null===re||void 0===re||null===(S=re.Bank)||void 0===S?void 0:S.upi_id}},e.next=27,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/fund_accounts_upi/").concat(re.wa_id),I,{headers:Object(v.a)({},Dt)});case 27:return T=e.sent,console.log(null===T||void 0===T?void 0:T.data),z={account_number:"3434949239801329",fund_account_id:null===T||void 0===T||null===(_=T.data)||void 0===_?void 0:_.fund_upi_id,amount:!Ke&&null!==re&&void 0!==re&&re.pan?100*D-10*D:Ke||null!==re&&void 0!==re&&re.pan?100*D:100*D-20*D,currency:"INR",mode:"UPI",purpose:"vendor bill",reference_id:null===T||void 0===T||null===(w=T.data)||void 0===w?void 0:w.tutor_id,narration:"Tutor Fund Transfer",notes:{TDS:!Ke&&re.pan?.1*D:Ke||null!==re&&void 0!==re&&re.pan?0*D:.2*D,PAN:re.pan?null===re||void 0===re?void 0:re.pan:"",EMAIL:re.email,SESSION:r}},e.next=32,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payouts/").concat(re.wa_id,"/").concat(r),z,{headers:Object(v.a)({},Dt)});case 32:A=e.sent,console.log(null===A||void 0===A?void 0:A.data),Ne(null===A||void 0===A||null===(k=A.data)||void 0===k||null===(C=k.rpay)||void 0===C?void 0:C.id);case 35:e.next=46;break;case 37:if(!(re.contact_id&&re.fund_upi_id&&re.fund_bank_id)){e.next=46;break}return console.log("already created"),R={account_number:"3434949239801329",fund_account_id:"bank"==je?re.fund_bank_id:"upi"==je?re.fund_upi_id:"",amount:!Ke&&null!==re&&void 0!==re&&re.pan?100*D-10*D:Ke||null!==re&&void 0!==re&&re.pan?100*D:100*D-20*D,currency:"INR",mode:"bank"==je?ge:"upi"==je?"UPI":"",purpose:"vendor bill",reference_id:re.tutor_id,narration:"Tutor Fund Transfer",notes:{TDS:!Ke&&re.pan?.1*D:Ke||null!==re&&void 0!==re&&re.pan?0*D:.2*D,PAN:re.pan?null===re||void 0===re?void 0:re.pan:"",EMAIL:re.email,SESSION:r}},e.next=42,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payouts/").concat(re.wa_id,"/").concat(r),R,{headers:Object(v.a)({},Dt)});case 42:W=e.sent,Ne(null===W||void 0===W||null===(N=W.data)||void 0===N||null===(P=N.rpay)||void 0===P?void 0:P.id),O(!h),console.log(null===W||void 0===W?void 0:W.data);case 46:e.next=51;break;case 48:e.prev=48,e.t0=e.catch(3),console.log(e.t0);case 51:e.next=107;break;case 53:if("bank"!=je){e.next=107;break}if(Se(!0),E={name:re.name,email:re.email,contact:re.wa_id,type:"vendor",reference_id:re.tutor_id},e.prev=56,re.contact_id){e.next=90;break}return e.next=60,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/contacts"),E,{headers:Object(v.a)({},Dt)});case 60:if(L=e.sent,console.log(null===L||void 0===L||null===(B=L.data)||void 0===B?void 0:B.result),"bank"!=je){e.next=76;break}return G={contact_id:null===L||void 0===L||null===(F=L.data)||void 0===F?void 0:F.contact_id,account_type:"bank_account",bank_account:{name:re.name,ifsc:null===re||void 0===re||null===(M=re.Bank)||void 0===M?void 0:M.ifsc_code,account_number:null===re||void 0===re||null===(U=re.Bank)||void 0===U?void 0:U.acc_no}},e.next=66,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/fund_accounts_bank/").concat(re.wa_id),G,{headers:Object(v.a)({},Dt)});case 66:return J=e.sent,Q={account_number:"3434949239801329",fund_account_id:null===J||void 0===J||null===(K=J.data)||void 0===K?void 0:K.fund_bank_id,amount:!Ke&&null!==re&&void 0!==re&&re.pan?100*D-10*D:Ke||null!==re&&void 0!==re&&re.pan?100*D:100*D-20*D,currency:"INR",mode:ge,purpose:"vendor bill",reference_id:null===J||void 0===J||null===(H=J.data)||void 0===H?void 0:H.tutor_id,narration:"Tutor Fund Transfer",notes:{TDS:!Ke&&re.pan?.1*D:Ke||null!==re&&void 0!==re&&re.pan?0*D:.2*D,PAN:re.pan?null===re||void 0===re?void 0:re.pan:"",EMAIL:re.email,SESSION:r}},e.next=70,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payouts/").concat(re.wa_id,"/").concat(r),Q,{headers:Object(v.a)({},Dt)});case 70:X=e.sent,console.log(null===X||void 0===X?void 0:X.data),Ne(null===X||void 0===X||null===(Y=X.data)||void 0===Y||null===(V=Y.rpay)||void 0===V?void 0:V.id),console.log(null===J||void 0===J||null===(q=J.data)||void 0===q?void 0:q.result),e.next=88;break;case 76:if("upi"!=je){e.next=88;break}return oe={contact_id:null===L||void 0===L||null===(Z=L.data)||void 0===Z?void 0:Z.contact_id,account_type:"vpa",vpa:{address:null===re||void 0===re||null===($=re.Bank)||void 0===$?void 0:$.upi_id}},e.next=80,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/fund_accounts_upi/").concat(re.wa_id),oe,{headers:Object(v.a)({},Dt)});case 80:return ie=e.sent,console.log(null===ie||void 0===ie?void 0:ie.data),se={account_number:"3434949239801329",fund_account_id:null===ie||void 0===ie||null===(ee=ie.data)||void 0===ee?void 0:ee.fund_upi_id,amount:!Ke&&null!==re&&void 0!==re&&re.pan?100*D-10*D:Ke||null!==re&&void 0!==re&&re.pan?100*D:100*D-20*D,currency:"INR",mode:"UPI",purpose:"vendor bill",reference_id:null===ie||void 0===ie||null===(te=ie.data)||void 0===te?void 0:te.tutor_id,narration:"Tutor Fund Transfer",notes:{TDS:!Ke&&re.pan?.1*D:Ke||null!==re&&void 0!==re&&re.pan?0*D:.2*D,PAN:re.pan?null===re||void 0===re?void 0:re.pan:"",EMAIL:re.email,SESSION:r}},e.next=85,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payouts/").concat(re.wa_id,"/").concat(r),se,{headers:Object(v.a)({},Dt)});case 85:le=e.sent,console.log(null===le||void 0===le?void 0:le.data),Ne(null===le||void 0===le||null===(ne=le.data)||void 0===ne||null===(ae=ne.rpay)||void 0===ae?void 0:ae.id);case 88:e.next=102;break;case 90:if(!re.contact_id||!re.fund_bank_id){e.next=101;break}return console.log("already created"),ue={account_number:"3434949239801329",fund_account_id:"bank"==je?re.fund_bank_id:"upi"==je?re.fund_upi_id:"",amount:!Ke&&null!==re&&void 0!==re&&re.pan?100*D-10*D:Ke||null!==re&&void 0!==re&&re.pan?100*D:100*D-20*D,currency:"INR",mode:"bank"==je?ge:"upi"==je?"UPI":"",purpose:"vendor bill",reference_id:re.tutor_id,narration:"Tutor Fund Transfer",notes:{TDS:!Ke&&re.pan?.1*D:Ke||null!==re&&void 0!==re&&re.pan?0*D:.2*D,PAN:re.pan?null===re||void 0===re?void 0:re.pan:"",EMAIL:re.email,SESSION:r}},e.next=95,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payouts/").concat(re.wa_id,"/").concat(r),ue,{headers:Object(v.a)({},Dt)});case 95:pe=e.sent,Ne(null===pe||void 0===pe||null===(ce=pe.data)||void 0===ce||null===(de=ce.rpay)||void 0===de?void 0:de.id),O(!h),console.log(null===pe||void 0===pe?void 0:pe.data),e.next=102;break;case 101:alert("Something is wrong with the user's bank details! Please try another payment method.");case 102:e.next=107;break;case 104:e.prev=104,e.t1=e.catch(56),console.log(e.t1);case 107:case"end":return e.stop()}}),e,null,[[3,48],[56,104]])})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutorDetail/").concat(t));case 3:n=e.sent,console.log(n.data),yt(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!at){e.next=19;break}return Fe(!0),n={rating:null===at||void 0===at?void 0:at.rating,speed:null===at||void 0===at?void 0:at.speed,accuracy:null===at||void 0===at?void 0:at.accuracy,legitimacy:null===at||void 0===at?void 0:at.legitimacy,reviews:null===at||void 0===at?void 0:at.reviews,session_done:r,session_rating:null===at||void 0===at?void 0:at.rating},e.prev=3,e.next=6,m.a.put("".concat(localStorage.getItem("api"),"/api/tutor/setTutorRating/").concat(t),n);case 6:return e.sent,e.next=9,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/tutor-session-rating/").concat(t,"/").concat(r),n);case 9:e.sent,O(!h),Fe(!1),Ze(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0.Error),Fe(!1);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(lt);case 2:case"end":return e.stop()}}),e)}))),[at]);var Ft=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={status:n},e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/unassign-tutor/").concat(r,"/").concat(t),a,{headers:""});case 4:e.sent,O(!h),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n,a){var o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={name:"",from:"",wa_id:t,templateName:"Live Session"==y?"sessionassigned_notify_".concat(ht):"Assignment"==y||"Project"==y?"generalsession_assigned_notify_".concat(ht):"",templateText:"Hi *{{1}}*, This is Tutorpoint\n\nWe have assigned a ".concat(y," with Session Id ").concat(r," to you. You had shown interest for this session. So Please click on the button below to accept it. \n\n*Accepting a Live session means you take responsibility to solve all the problems according to instructions given to you. You will provide clean and suitable answers to questions and submit the required files on time before deadline*\n\n*Poor performance in General Sessions will impact your ratings. Maintain high ratings to receive more work from us*"),template:{namespace:mt,language:"en"},param1:y+" Assigned",param2:n,param3:r,param4:"d".concat(Ye,"/tutorForm/").concat(r,"/").concat(a,"?accept_task=success"),button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/tutorAssignTemplate"),o,{headers:""});case 4:e.sent,O(!h),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n,a){var o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={name:n,email:t,from:"",templateName:"Live Session"==y?"sessionassigned_notify_".concat(ht):"Assignment"==y||"Project"==y?"generalsession_assigned_notify_".concat(ht):"",param1:y+" Assigned",param2:n,param3:r,param4:"d".concat(Ye,"/tutorForm/").concat(r,"/").concat(a,"?accept_task=success")},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/tutorAssignMailNotification"),o,{headers:""});case 4:e.sent,O(!h),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=0;case 2:if(!(a<n.length)){e.next=10;break}return o={sessionId:r,waId:t},e.next=6,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/payout-update/").concat(n[a].id),o,{headers:Object(v.a)({},Dt)});case 6:e.sent;case 7:a++,e.next=2;break;case 10:O(!h),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();var Zt=function(e){return(null===e||void 0===e?void 0:e.length)>12?"".concat(null===e||void 0===e?void 0:e.slice(0,12),".."):(null===e||void 0===e?void 0:e.length)<=12?e:void 0};return Object(X.jsx)("div",{children:Object(X.jsxs)(It.a,{value:w,children:[Object(X.jsx)($e.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(X.jsxs)(Tt.a,{onChange:function(e,t){k(t)},"aria-label":"lab API tabs example",centered:!0,children:[Object(X.jsx)(Ct.a,{label:"Interested Tutors",value:"1"}),Object(X.jsx)(Ct.a,{label:"Notified Tutors",value:"2"}),Object(X.jsx)(Ct.a,{label:"Assigned Tutors",value:"3"})]})}),Object(X.jsx)(zt.a,{value:"1",style:{padding:"15px"},children:Object(X.jsx)("div",{children:null===c||void 0===c?void 0:c.map((function(e,t){var n,a,o,i,l;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(X.jsx)("span",{style:{fontWeight:"800"},children:Zt(e.name)}),Object(X.jsxs)("span",{children:["\xa0",e.tutor_id]}),"\xa0",Object(X.jsx)("span",{children:Object(X.jsx)(jn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Highest Degree: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.highest_degree})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Department: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.dept})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["College/s: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.academic_info)&&(null===Ot||void 0===Ot||null===(n=Ot.academic_info[0])||void 0===n?void 0:n.college.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["WhatsApp: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.wa_id})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Subjects known: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.subjects)&&(null===Ot||void 0===Ot?void 0:Ot.subjects.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Tags: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.tags)&&(null===Ot||void 0===Ot?void 0:Ot.tags.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Rating: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.rating)&&Object(X.jsx)(nt.a,{size:"small",icon:Object(X.jsx)(Wt.a,{style:{color:"#ffff",fontSize:"14px"}}),label:null===(a=""+Ot.rating/2)||void 0===a?void 0:a.slice(0,4),color:"success"})})]})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"16px",cursor:"pointer"},onMouseEnter:function(){return Rt(e.tutor_id)},onMouseLeave:function(){return yt(null)}})})}),"\xa0 \xa0",Object(X.jsx)("span",{children:Object(X.jsx)(jn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{style:{marginBottom:"10px"},children:"Last 5 reviews and rating"}),null===Ot||void 0===Ot||null===(o=Ot.rating_and_reviews)||void 0===o||null===(i=o.slice(Math.max((null===Ot||void 0===Ot||null===(l=Ot.rating_and_reviews)||void 0===l?void 0:l.length)-5,0)))||void 0===i?void 0:i.map((function(e,t){return Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginTop:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:e.reviews&&"- ".concat(e.reviews,"  [").concat(e.rating,"\u2606]")})})}))]}),children:Object(X.jsx)("span",{style:{fontSize:"11px",border:"1px solid gray",borderRadius:"20px",padding:"3px"},onMouseEnter:function(){return Rt(e.tutor_id)},children:"Reviews"})})}),Object(X.jsx)("span",{style:{float:"right",cursor:"pointer"},onClick:function(){return wt(e)},children:s.find((function(t){return t.tutor_id==e.tutor_id}))?Object(X.jsx)(Kt.a,{fontSize:"medium"}):Object(X.jsx)(Mt.a,{fontSize:"medium"})})]},t),Object(X.jsx)("hr",{style:{width:"70%",marginLeft:"0px",marginBottom:"8px"}})]})}))})}),Object(X.jsx)(zt.a,{value:"2",style:{padding:"15px"},children:Object(X.jsx)("div",{children:null===i||void 0===i?void 0:i.map((function(e,t){var n,a;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(X.jsx)("span",{style:{fontWeight:"800"},children:Zt(e.name)}),Object(X.jsxs)("span",{children:["\xa0",e.tutor_id,"\xa0"]}),Object(X.jsx)("span",{children:Object(X.jsx)(jn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Highest Degree: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.highest_degree})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Department: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.dept})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["College/s: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.academic_info)&&(null===Ot||void 0===Ot||null===(n=Ot.academic_info[0])||void 0===n?void 0:n.college.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["WhatsApp: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.wa_id})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Subjects known: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.subjects)&&(null===Ot||void 0===Ot?void 0:Ot.subjects.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Tags: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.tags)&&(null===Ot||void 0===Ot?void 0:Ot.tags.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Notified At: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null!==e&&void 0!==e&&e.timestamp?W()(new Date(1e3*(null===e||void 0===e?void 0:e.timestamp))).format("lll"):"---"})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Rating: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.rating)&&Object(X.jsx)(nt.a,{size:"small",icon:Object(X.jsx)(Wt.a,{style:{color:"#ffff",fontSize:"14px"}}),label:null===(a=""+Ot.rating/2)||void 0===a?void 0:a.slice(0,4),color:"success"})})]})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"16px",cursor:"pointer"},onMouseEnter:function(){return Rt(e.tutor_id)},onMouseLeave:function(){return yt(null)}})})}),"wa"==e.medium&&Object(X.jsx)("span",{children:Object(X.jsx)(Xt.a,{fontSize:"small",color:"success",style:{marginRight:"5px",fontSize:"17px"}})}),"mail"==e.medium&&Object(X.jsx)("span",{children:Object(X.jsx)($t.a,{fontSize:"small",color:"success",style:{marginRight:"5px",fontSize:"17px"}})}),"wa-mail"==e.medium&&Object(X.jsxs)("span",{children:[Object(X.jsx)(Xt.a,{fontSize:"small",color:"success",style:{marginRight:"5px",fontSize:"17px"}})," ",Object(X.jsx)($t.a,{fontSize:"small",color:"success",style:{marginRight:"5px",fontSize:"17px"}})]})]},t),Object(X.jsx)("hr",{style:{width:"70%",marginLeft:"0px",marginBottom:"8px"}})]})}))})}),Object(X.jsx)(zt.a,{value:"3",style:{padding:"15px"},children:Object(X.jsxs)("div",{children:[s&&s.length>0?null===s||void 0===s?void 0:s.map((function(e,t){var n,a,o,i,l,c,r,d,u;return Object(X.jsxs)("div",{style:{backgroundImage:"url(".concat((null===e||void 0===e?void 0:e.tutor_cancelled)&&"cancelled"===(null===e||void 0===e?void 0:e.tutor_cancelled)&&en,")"),backgroundSize:"10rem",backgroundRepeat:"no-repeat",backgroundPosition:"right"},children:[Object(X.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(X.jsx)("span",{style:{fontWeight:"800"},children:Zt(e.name)}),Object(X.jsxs)("span",{children:["\xa0",e.tutor_id]}),"\xa0",Object(X.jsx)("span",{children:Object(X.jsx)(jn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Highest Degree: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.highest_degree})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Department: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.dept})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["College/s: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.academic_info)&&(null===Ot||void 0===Ot||null===(n=Ot.academic_info[0])||void 0===n?void 0:n.college.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["WhatsApp: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===Ot||void 0===Ot?void 0:Ot.wa_id})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Subjects known: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.subjects)&&(null===Ot||void 0===Ot?void 0:Ot.subjects.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Tags: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.tags)&&(null===Ot||void 0===Ot?void 0:Ot.tags.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Rating: ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===Ot||void 0===Ot?void 0:Ot.rating)&&Object(X.jsx)(nt.a,{size:"small",icon:Object(X.jsx)(Wt.a,{style:{color:"#ffff",fontSize:"14px"}}),label:null!==Ot&&void 0!==Ot&&Ot.rating&&null!==e&&void 0!==e&&e.session_rating?null===(a=""+(+(null===Ot||void 0===Ot?void 0:Ot.rating)+ +(null===e||void 0===e?void 0:e.session_rating))/4)||void 0===a?void 0:a.slice(0,4):null===Ot||void 0===Ot||!Ot.rating||null!==e&&void 0!==e&&e.session_rating?null!==Ot&&void 0!==Ot&&Ot.rating||null===e||void 0===e||!e.session_rating?"N/A":null===(i=""+(null===e||void 0===e?void 0:e.session_rating)/2)||void 0===i?void 0:i.slice(0,4):null===(o=""+(null===Ot||void 0===Ot?void 0:Ot.rating)/2)||void 0===o?void 0:o.slice(0,4),color:"success"})})]}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px",marginTop:"10px",display:"flex",justifyContent:"right"},children:(!(null!==e&&void 0!==e&&e.tutor_cancelled)||(null===e||void 0===e?void 0:e.tutor_cancelled)&&"cancelled"!==(null===e||void 0===e?void 0:e.tutor_cancelled))&&Object(X.jsx)("button",{style:{backgroundColor:"#ffff",color:"#FF0000",border:"0.5px solid #FF0000",borderRadius:"3px",height:"23px",cursor:"pointer",fontWeight:"600"},onClick:function(){return kt(e.name,e.wa_id,e.tutor_id)},children:"Cancel Tutor"})})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"16px",cursor:"pointer"},onMouseEnter:function(){return Rt(e.tutor_id)},onMouseLeave:function(){return yt(null)}})})}),"accepted"==(null===e||void 0===e?void 0:e.acceptance_status)&&Object(X.jsx)("span",{style:{color:"green",fontSize:"14px",marginLeft:"10px"},children:Object(X.jsx)(nt.a,{size:"small",label:"accepted",color:"success"})}),Object(X.jsxs)("span",{style:{float:"right",width:"110px",marginLeft:"15px"},children:[Object(X.jsx)("span",{children:Object(X.jsx)("div",{style:{fontWeight:"800",marginBottom:"5px"},children:e.tutor_id===lt&&ut?Object(X.jsxs)("span",{style:{fontWeight:"800"},children:[Object(X.jsx)("input",{type:"number",style:{width:"30%",height:"20px",marginTop:"5px",outline:"none",border:"none",borderBottom:"1px solid gray",borderRadius:"0px"},value:xt,onChange:function(e){return bt(e.target.value)},autoFocus:!0},t)," ","\xa0",null!==e&&void 0!==e&&e.tutor_cancelled?Object(X.jsxs)("button",{style:{border:"1px solid #e3e0e0",borderRadius:"2px",height:"25px"},disabled:!0,children:[Object(X.jsx)(Ie.a,{fontSize:"small",style:{width:"15px",height:"15px"}})," ","Update"]}):Object(X.jsx)("button",{style:{backgroundColor:"#1876D1",color:"#ffff",border:"none",borderRadius:"2px",height:"25px",cursor:"pointer"},onClick:function(){return St(null===e||void 0===e?void 0:e.tutor_id)},children:"Update"})]}):Object(X.jsx)("div",{style:{fontWeight:"800",marginBottom:"5px"},children:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{children:null!==e&&void 0!==e&&e.tutor_dealt_amount?"".concat((null===e||void 0===e?void 0:e.tutor_dealt_amount)/100," INR"):"--- INR"}),"\xa0",Object(X.jsx)("span",{style:{cursor:"pointer"},children:Object(X.jsx)(Lt.a,{fontSize:"x-small",style:{fontSize:"15px"},onClick:function(n){return function(e,t,n){e.preventDefault(),console.log({tutorId:t,ind:n}),ct(t),pt(!0),s.map((function(e){e.tutor_id===t&&bt(+e.tutor_dealt_amount/100+"")}))}(n,e.tutor_id,t)}},t)})]})})})}),null===e||void 0===e||!e.session_rating||null!==e&&void 0!==e&&e.tutor_cancelled?Object(X.jsx)(Y.a,{variant:"contained",size:"small",style:{maxWidth:"52px"},disabled:!0,children:"Pay"}):Object(X.jsx)(Y.a,{variant:"contained",size:"small",style:{maxWidth:"52px"},onClick:function(){return At(t,e)},children:"Pay"})]})]},t),Object(X.jsxs)("div",{style:{fontSize:"14px",fontWeight:"500",marginRight:"5px",marginBottom:"12px"},children:[Object(X.jsxs)("span",{children:["\xa0",Le||"assigned"!=(null===e||void 0===e?void 0:e.tutor_unassigned)?Object(X.jsx)(nt.a,{style:{cursor:"pointer"},size:"small",label:"Rating & Reviews",variant:"outlined",disabled:!0}):Object(X.jsx)(nt.a,{style:{cursor:"pointer"},size:"small",label:"Rating & Reviews",variant:"outlined",onClick:function(){return _t(e.rating_and_reviews,e.tutor_id)}})]}),"\xa0",Object(X.jsx)("span",{children:Object(X.jsx)(jn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{style:{marginBottom:"10px"},children:"Last 5 reviews and rating"}),null===Ot||void 0===Ot||null===(l=Ot.rating_and_reviews)||void 0===l||null===(c=l.slice(Math.max((null===Ot||void 0===Ot||null===(r=Ot.rating_and_reviews)||void 0===r?void 0:r.length)-5,0)))||void 0===c?void 0:c.map((function(e,t){return Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginTop:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:e.reviews&&"- ".concat(e.reviews,"  [").concat(e.rating,"\u2606]")})})}))]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"16px"}})})}),"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)?Object(X.jsx)("span",{style:{marginLeft:"20px"},children:Object(X.jsx)(nt.a,{style:{cursor:"pointer"},size:"small",label:"assigned",onClick:function(){return Ft(e.tutor_id,"unassigned")}})}):Object(X.jsx)("span",{style:{marginLeft:"20px"},children:Object(X.jsx)(nt.a,{style:{cursor:"pointer"},size:"small",label:"unassigned",variant:"outlined",onClick:function(){return Ft(e.tutor_id,"assigned")}})})]}),Object(X.jsxs)("p",{style:{margin:"0px",fontSize:"12.5px",color:"chocolate"},children:["All Payments: \xa0 ",(null===e||void 0===e?void 0:e.pout_info)&&(null===e||void 0===e?void 0:e.pout_info.length)>0&&Object(X.jsx)("div",{style:{cursor:"pointer",float:"right"},onClick:function(){return Qt(e.wa_id,e.pout_info)},children:Object(X.jsx)(un.a,{fontSize:"medium"})}),Object(X.jsx)("span",{children:(null===e||void 0===e?void 0:e.pout_info)&&(d=null===e||void 0===e?void 0:e.pout_info.sort((function(e,t){return t.created_at-e.created_at})),u=function(e){return e.id},Object(p.a)(new Map(d.map((function(e){return[u(e),e]}))).values())).map((function(e){return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("p",{style:{margin:"5px 0px"},children:[e.amount/100," ",e.currency," ("+e.status+")"," [TDS (",e.notes.TDS," INR)"," Amount (",+e.amount/100+e.notes.TDS," INR)]"," [Payment ID: ",e.id.replace("pout_",""),"]"]})})}))})]}),Object(X.jsx)("hr",{style:{width:"70%",marginLeft:"0px",marginBottom:"8px"}})]})})):Object(X.jsx)("div",{children:"No Tutors Assigned"}),Xe&&Object(X.jsx)(rn,{rating_and_reviews:Re,tutorId:lt,handleAssignTutorRating:Bt,setShowTutorRatingBox:Ze,showTutorRatingBox:Xe,setStoreTutorRating:ot})]})}),Object(X.jsxs)(q.a,{open:T,onClose:Nt,children:[Object(X.jsx)(Q.a,{children:"Tutor Payment"}),ye&&!ke?Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"120px 200px"},children:[Object(X.jsx)(Ie.a,{style:{alignSelf:"center",marginBottom:"30px"}}),Object(X.jsx)("em",{children:"Payment Processing..."})]}):ye&&ke?Object(X.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"120px 200px"},children:Object(X.jsxs)("em",{children:["Payment ",null===x||void 0===x||null===(t=x.payload)||void 0===t||null===(n=t.payout)||void 0===n||null===(o=n.entity)||void 0===o?void 0:o.status]})}):Object(X.jsxs)(J.a,{children:[Object(X.jsx)("label",{style:{fontSize:"13px"},children:"Tutor Name"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"text",value:B,fullWidth:!0,variant:"standard",style:{marginBottom:"30px"}}),Object(X.jsx)("label",{style:{fontSize:"13px"},children:"Amount"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"number",value:D,onChange:function(e){console.log(e.target.value),P(e.target.value)},style:{marginBottom:"5px"},fullWidth:!0,variant:"standard",autoComplete:"off",required:!0}),Object(X.jsxs)("div",{style:{marginBottom:"27px",fontSize:"13px"},children:["Actual amount:"," ",!Ke&&null!==re&&void 0!==re&&re.pan&&D?D-.1*D:Ke||null!==re&&void 0!==re&&re.pan||!D?Ke?D:"0":D-.2*D," ","INR, TDS:"," ",!Ke&&null!==re&&void 0!==re&&re.pan&&D?.1*D:Ke||null!==re&&void 0!==re&&re.pan||!D?"0":.2*D," ","INR"," ",Object(X.jsx)("span",{children:Object(X.jsx)(Et.a,{control:Object(X.jsx)(me.a,{checked:Ke,onChange:function(e){He(e.target.checked)},defaultChecked:!0,size:"small",style:{padding:"0px 4px"}}),label:"Without TDS",style:{marginLeft:"20px"}})})]}),Object(X.jsx)("div",{}),Object(X.jsxs)(Vt.a,{component:"fieldset",children:[Object(X.jsx)(qt.a,{component:"legend",children:"Choose Payment Option"}),Object(X.jsxs)(Yt.a,{row:!0,"aria-label":"gender",name:"row-radio-buttons-group",onChange:function(e){ve(e.target.value)},children:[Object(X.jsx)(Et.a,{value:"bank",control:Object(X.jsx)(Ht.a,{}),label:"Bank Transfer"}),Object(X.jsx)(Et.a,{value:"upi",control:Object(X.jsx)(Ht.a,{}),label:"UPI Transfer"})]})]}),Object(X.jsx)("div",{style:{marginTop:"20px"},children:"bank"===je?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("label",{style:{fontSize:"13px"},children:"Account Number"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"text",value:U,style:{marginBottom:"27px"},fullWidth:!0,variant:"standard"}),Object(X.jsx)("label",{style:{fontSize:"13px"},children:"IFSC"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"text",value:$,style:{marginBottom:"27px"},fullWidth:!0,variant:"standard"}),Object(X.jsx)("p",{style:{fontSize:"13px",padding:"3px 0px 8px 0px"},children:"Mode"}),Object(X.jsx)(Gt.a,{defaultValue:"NEFT",inputProps:{name:"amount",id:"uncontrolled-native"},onChange:function(e){fe(e.target.value),console.log(e.target.value)},children:Object(X.jsx)("option",{value:"IMPS",children:"IMPS"})})]}):"upi"===je?Object(X.jsx)(X.Fragment,{children:ie?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("label",{style:{fontSize:"13px"},children:"UPI ID"}),Object(X.jsx)(V.a,{margin:"dense",id:"upi",type:"text",value:ie,style:{marginBottom:"27px"},fullWidth:!0,variant:"standard",autoComplete:"off"})]}):Object(X.jsx)("p",{style:{textAlign:"center",color:"gray"},children:"UPI ID is not Available"})}):null})]}),D>=1e4&&Object(X.jsx)(J.a,{children:Object(X.jsx)("div",{style:{fontSize:"12px",color:"red"},children:"*Tutor amount should be less than 10,000 INR"})}),ye&&!ke?Object(X.jsx)("em",{style:{textAlign:"center",marginBottom:"45px",color:"coral"},children:"#Please don't close this window"}):ye&&ke?Object(X.jsx)(G.a,{children:Object(X.jsx)(Y.a,{onClick:function(){Se(!1),Ce(!1)},children:"Close"})}):Object(X.jsxs)(G.a,{children:[Object(X.jsx)(Y.a,{onClick:Nt,children:"Cancel"}),D>0&&D<1e4&&je?Object(X.jsx)(Y.a,{onClick:Pt,children:"Pay"}):Object(X.jsx)(Y.a,{disabled:!0,children:"Pay"})]})]})]})})},xn=n(268),bn=n.n(xn),gn=n(265),fn=n.n(gn),mn=n(264),hn=n.n(mn),On=n(271),yn=n.n(On),Sn=n(266),_n=n.n(Sn),wn=n(164),kn=(n(372),n(191)),Cn=n.n(kn),In=n(267),Tn=n.n(In),zn=n(269),An=n.n(zn),Nn=["className"],Dn=o.a.forwardRef((function(e,t){return Object(X.jsx)(pt.a,Object(v.a)({elevation:6,ref:t,variant:"filled"},e))})),Pn=Object(te.a)((function(e){var t=e.className,n=Object(g.a)(e,Nn);return Object(X.jsx)(ne.a,Object(v.a)(Object(v.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(d.a)({},"& .".concat(ae.a.tooltip),{backgroundColor:"rgba(80, 80, 80, 0.92)",color:"#ffff",fontWeight:"500",maxWidth:350,fontSize:t.typography.pxToRem(12),border:"1px solid rgba(80, 80, 80, 0.92)"})})),Rn=function(e){var t,n,o,i,s,c,r,d,x,b,g,f,h,O,y,S,_,w,k,C,I,T,z,A,N,D,P,R,E,B,L,F,M,U,K,H,V,Z,$,te,ne,ae,ie,se=e.conversation,le=e.tutorList,ce=e.setTutorList,re=e.searchTutor,de=e.tutorCount,ue=e.setAssignedTutor,pe=e.interestedTutors,je=e.clientPayment,ve=e.tutorPayout,xe=e.updated,be=e.setUpdated,ge=e.reload,fe=e.setReload,he=e.handleSearchTutors,Oe=Object(a.useState)([]),ye=Object(l.a)(Oe,2),Se=(ye[0],ye[1],Object(a.useState)([])),_e=Object(l.a)(Se,2),we=(_e[0],_e[1],Object(a.useState)([])),ke=Object(l.a)(we,2),Ce=(ke[0],ke[1],Object(a.useState)()),Te=Object(l.a)(Ce,2),Ne=(Te[0],Te[1],Object(a.useState)(2)),De=Object(l.a)(Ne,2),Pe=(De[0],De[1],Object(a.useState)(-1)),Re=Object(l.a)(Pe,2),We=(Re[0],Re[1],Object(a.useState)(!1)),Ee=Object(l.a)(We,2),Be=(Ee[0],Ee[1],Object(a.useState)()),Le=Object(l.a)(Be,2),Fe=(Le[0],Le[1],Object(a.useState)()),Me=Object(l.a)(Fe,2),Ue=(Me[0],Me[1],Object(a.useState)(!1)),Ke=Object(l.a)(Ue,2),Ye=Ke[0],Ve=Ke[1],qe=Object(a.useState)("paper"),Ge=Object(l.a)(qe,2),Je=Ge[0],Qe=Ge[1],Ze=Object(a.useRef)(null),et=Object(a.useState)(1),tt=Object(l.a)(et,2),at=tt[0],ot=tt[1],it=Object(a.useState)(!1),lt=Object(l.a)(it,2),ct=lt[0],rt=lt[1],dt=Object(a.useState)(!1),pt=Object(l.a)(dt,2),jt=pt[0],xt=pt[1],bt=Object(a.useState)(!1),gt=Object(l.a)(bt,2),ft=(gt[0],gt[1]),Ot=Object(a.useState)(),yt=Object(l.a)(Ot,2),St=yt[0],_t=yt[1],wt=Object(a.useState)([]),kt=Object(l.a)(wt,2),Ct=kt[0],It=kt[1],Tt=Object(a.useState)(!1),zt=Object(l.a)(Tt,2),At=zt[0],Dt=zt[1],Rt=Object(a.useState)(!1),Bt=Object(l.a)(Rt,2),Ft=Bt[0],Mt=Bt[1],Ut=Object(a.useState)(!1),Ht=Object(l.a)(Ut,2),Yt=Ht[0],Vt=Ht[1],qt=Object(a.useState)(!1),Qt=Object(l.a)(qt,2),Zt=Qt[0],en=Qt[1],tn=Object(a.useState)(""),nn=Object(l.a)(tn,2),an=(nn[0],nn[1]),on=Object(a.useState)(),sn=Object(l.a)(on,2),ln=sn[0],cn=sn[1],rn=Object(a.useState)("USD"),dn=Object(l.a)(rn,2),pn=dn[0],jn=dn[1],xn=Object(a.useState)(),gn=Object(l.a)(xn,2),mn=gn[0],On=gn[1],Sn=Object(a.useState)(),kn=Object(l.a)(Sn,2),In=kn[0],zn=kn[1],Nn=Object(a.useState)(!1),Rn=Object(l.a)(Nn,2),Wn=Rn[0],En=Rn[1],Bn=Object(a.useState)(),Ln=Object(l.a)(Bn,2),Fn=(Ln[0],Ln[1],Object(a.useState)()),Mn=Object(l.a)(Fn,2),Un=(Mn[0],Mn[1]),Kn=Object(a.useState)(null===se||void 0===se?void 0:se.show_paypal_url),Hn=Object(l.a)(Kn,2),Yn=(Hn[0],Hn[1],Object(a.useState)(!1)),Vn=Object(l.a)(Yn,2),qn=Vn[0],Gn=Vn[1],Jn=Object(a.useState)(!1),Qn=Object(l.a)(Jn,2),Xn=Qn[0],Zn=Qn[1],$n=Object(a.useState)(!1),ea=Object(l.a)($n,2),ta=ea[0],na=ea[1],aa=Object(a.useState)(!1),oa=Object(l.a)(aa,2),ia=oa[0],sa=oa[1],la=Object(a.useState)(!0),ca=Object(l.a)(la,2),ra=ca[0],da=ca[1],ua=Object(a.useState)("paid"==(null===se||void 0===se?void 0:se.payment_status)),pa=Object(l.a)(ua,2),ja=(pa[0],pa[1],Object(a.useState)()),va=Object(l.a)(ja,2),xa=va[0],ba=va[1],ga=Object(a.useState)(null!==se&&void 0!==se&&se.tutor_deadline?null===se||void 0===se?void 0:se.tutor_deadline:""),fa=Object(l.a)(ga,2),ma=fa[0],ha=fa[1],Oa=Object(a.useState)(null!==se&&void 0!==se&&se.tutor_duration?null===se||void 0===se?void 0:se.tutor_duration:""),ya=Object(l.a)(Oa,2),Sa=ya[0],_a=ya[1],wa=Object(a.useState)(1),ka=Object(l.a)(wa,2),Ca=ka[0],Ia=ka[1],Ta=Object(a.useState)(""),za=Object(l.a)(Ta,2),Aa=za[0],Na=za[1],Da=localStorage.getItem("device"),Pa="https://client-response.tutorpoint.in/d".concat(Da,"/live-session-form"),Ra={username:"rzp_live_Jk4vwq7tyL9Aeg",password:"qUjOJWotN6x47WSDExJ4NURs"},Wa=function(){Ve(!1),It([]),Dt(!1)},Ea=function(){En(!1)},Ba=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o,i,s,l,c,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/payments/getPaymentLink/").concat(se.plink_id),{headers:Object(v.a)({},Ra)});case 3:return s=e.sent,Na(s?"":"Error getting plink"),e.next=7,m.a.get("".concat(localStorage.getItem("api"),"/api/payments/virtual_accounts/").concat(se.va_id,"/payments"),{headers:Object(v.a)({},Ra)});case 7:return l=e.sent,Na(l?"":"Error in getting Va"),c=[],null===s||void 0===s||null===(t=s.data)||void 0===t||null===(n=t.payments)||void 0===n||n.map(function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.push({payment_id:null===t||void 0===t?void 0:t.payment_id,type:"plink"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===l||void 0===l||null===(a=l.data)||void 0===a||null===(o=a.items)||void 0===o||o.map(function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.push({payment_id:null===t||void 0===t?void 0:t.id,type:"vpa"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=14,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/refreshPaymentInfo"),{session_id:se.session_id,plink_id:se.plink_id,paymentIdAr:c,payment_status:null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.status},{headers:Object(v.a)({},Ra)});case 14:r=e.sent,console.log({resPlink:s}),r?(Na("success"),be(!xe),wn.b.success("Updated payment informations successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})):Na("Error in updating"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),wn.b.error("Something went wrong while updating payment informations!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();console.log({paymentStatusCheck:Aa}),Object(a.useEffect)((function(){if(Ye){var e=Ze.current;null!==e&&e.focus()}}),[Ye]),Object(a.useEffect)((function(){var e,t,n,a,o,i,s=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getclientinfo/").concat(null===se||void 0===se?void 0:se.client_id));case 2:t=e.sent,Un(null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={tutor_payment_status:t},e.prev=1,e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/updateTutorPaymentStatus/").concat(null===se||void 0===se?void 0:se.session_id),n);case 4:a=e.sent,console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();s(),"paid"!=(null===se||void 0===se?void 0:se.tutor_payment_status)&&null!==se&&void 0!==se&&se.assigned_tutors&&(null===se||void 0===se||null===(e=se.assigned_tutors)||void 0===e||null===(t=e.filter((function(e){return"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)})))||void 0===t?void 0:t.length)>0&&(null===se||void 0===se||null===(n=se.assigned_tutors)||void 0===n||null===(a=n.filter((function(e){return"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)})))||void 0===a?void 0:a.length)==(null===se||void 0===se||null===(o=se.assigned_tutors)||void 0===o||null===(i=o.filter((function(e){return"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)})))||void 0===i?void 0:i.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.pout_info)||void 0===t?void 0:t.filter((function(e){return"processed"==e.status})).length)>0})).length)&&l("paid")}),[]);var La=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={reference_id:"ssn_ref"+Math.floor((new Date).getTime()/1e3),session_id:null===se||void 0===se?void 0:se.session_id,amount:100*ln,currency:pn,show_default_blocks:qn},e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/new-payment-link"),t,{headers:Object(v.a)({},Ra)});case 4:return e.sent,n={name:"",from:"",wa_id:null===se||void 0===se?void 0:se.client_waId,templateName:"clientprice_setting_".concat(ht),templateText:"Hi *{{1}}*, This is Tutorpoint\n\nWe have set the price for the session with Session ID - {{2}}\nThe price is {{3}} {{4}}.\nPlease click on the button below to get back to the details and pay the required amount",template:{namespace:mt,language:"en"},param1:"Price Quoted for Session "+(null===se||void 0===se?void 0:se.session_id),param2:null===se||void 0===se?void 0:se.client_name,param3:null===se||void 0===se?void 0:se.session_id,param4:ln,param5:pn,param6:"d".concat(Da,"/live-session-form/").concat(null===se||void 0===se?void 0:se.session_id,"/").concat(null===se||void 0===se?void 0:se.client_id),button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.next=8,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/new-payment-notification"),n,{headers:""});case 8:e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Fa=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={session_id:null===se||void 0===se?void 0:se.session_id,receivers:{types:["bank_account","vpa"]},description:"Virtual Account created for tutorpoint",close_by:1681615838,notes:{project_name:"Banking Software"}},e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/virtual_accounts"),t,{headers:Object(v.a)({},Ra)});case 4:n=e.sent,console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Ma=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ln){e.next=9;break}return na(!0),e.next=4,La();case 4:return e.next=6,Fa();case 6:Zn(!1),na(!1),be(!xe);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ua=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sa(!0),t={session_id:null===se||void 0===se?void 0:se.session_id,tutor_dealt_amount:100*In},e.prev=2,e.next=5,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/update-tutor-amount"),t);case 5:e.sent,sa(!1),en(!1),be(!xe),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),sa(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Ka=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!re){e.next=18;break}return rt(!0),ot(n),e.prev=3,e.next=6,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors/").concat(re),{params:{page:n,limit:20}},{headers:""});case 6:a=e.sent,console.log(a.data),ce(a.data.result),rt(!1),Dt(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:e.next=33;break;case 18:return rt(!0),ot(n),e.prev=20,e.next=23,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors"),{params:{page:n,limit:20}},{headers:""});case 23:o=e.sent,console.log(o.data),ce(o.data.result),rt(!1),Dt(!1),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(20),console.log(e.t1);case 33:case"end":return e.stop()}}),e,null,[[3,13],[20,30]])})));return function(t,n){return e.apply(this,arguments)}}();console.log(Ct);var Ha=function(e){return wn.b.error("Failed to send WhatsApp notification to ".concat(e),{position:"top-right",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},Ya=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return da(!1),xt(!0),e.prev=2,t={sessionId:null===se||void 0===se?void 0:se.session_id,tutor_deadline:ma,tutor_duration:Sa},e.next=6,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/set-tutor-deadline"),t);case 6:e.sent,n=Object(u.a)().mark((function e(t){var n,a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:Ct[t].name,from:"",wa_id:Ct[t].wa_id,templateName:"Live Session"==se.type?"live_session_tutor_notify_".concat(ht):"Assignment"==se.type||"Project"==se.type?"assign_session_tutor_notify_".concat(ht):"",templateText:"Hey ! We have a session for you. \n\nSession ID : ".concat(null===se||void 0===se?void 0:se.session_id,"\nSubject/Topic name is *{{2}}* \nDate and Time is *{{3}}* \nDuration is *{{4}}*  \nWe will pay you *{{5}}* \n\nPlease check the study materials by pressing the button below. Are you confident in this subject? Can you perform very well in this session? If yes, then press on the below button to show your interest. \n\nPlease wait after you show your interest. We will get back to you shortly to get your confirmation for this session. \nDisclaimer:  \n*1.Never take these sessions casually. They impact your ratings.*  \n*2. Showing interest doesn't mean that we have assigned the session to you.*  \n\nTo stop receiving Whatsapp notifications from us, send an official email to us."),template:{namespace:mt,language:"en"},param1:"New "+(null===se||void 0===se?void 0:se.type)+" Available",param2:(null===se||void 0===se?void 0:se.type.slice(0,4).toUpperCase())+(null===se||void 0===se?void 0:se.session_id),param3:null===se||void 0===se?void 0:se.subject.toUpperCase(),param4:new Date(ma||(null===se||void 0===se?void 0:se.deadline)).toLocaleString(),param5:(Sa||(null===se||void 0===se?void 0:se.duration))+" (hh : mm)",param6:"".concat((null===se||void 0===se?void 0:se.tutor_dealt_amount)/100," INR"),param7:"d".concat(Da,"/tutorForm/").concat(null===se||void 0===se?void 0:se.session_id,"/").concat(Ct[t].tutor_id),button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/tutorTemplate"),n,{headers:""}).then(function(){var e=Object(j.a)(Object(u.a)().mark((function e(n){var a,o,i,s,l,c,r,d,p,j,v;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),!Ct[t].email){e.next=12;break}return s={name:Ct[t].name,email:Ct[t].email,tutorId:Ct[t].tutor_id,sessionId:null===se||void 0===se?void 0:se.session_id,wa_id:Ct[t].wa_id,templateName:"Live Session"==se.type?"live_session_tutor_notify_".concat(ht):"Assignment"==se.type||"Project"==se.type?"assign_session_tutor_notify_".concat(ht):"",param1:"New "+(null===se||void 0===se?void 0:se.type)+" Available",param2:(null===se||void 0===se?void 0:se.type.slice(0,4).toUpperCase())+(null===se||void 0===se?void 0:se.session_id),param3:null===se||void 0===se?void 0:se.subject.toUpperCase(),param4:new Date(ma||(null===se||void 0===se?void 0:se.deadline)).toLocaleString(),param5:(Sa||(null===se||void 0===se?void 0:se.duration))+" (hh : mm)",param6:"".concat((null===se||void 0===se?void 0:se.tutor_dealt_amount)/100," INR"),param7:"d".concat(Da,"/tutorForm/").concat(null===se||void 0===se?void 0:se.session_id,"/").concat(Ct[t].tutor_id)},e.next=5,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/tutorEmailNotification"),s,{headers:""});case 5:return l={session_id:se.session_id,notified_tutors:{name:null===(a=Ct[t])||void 0===a?void 0:a.name,wa_id:null===(o=Ct[t])||void 0===o?void 0:o.wa_id,tutor_id:null===(i=Ct[t])||void 0===i?void 0:i.tutor_id,timestamp:Math.floor(Date.now()/1e3),medium:"wa-mail"}},e.next=8,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/updateNotifiedTutors"),l,{headers:""});case 8:c=e.sent,console.log(c),e.next=17;break;case 12:return j={session_id:se.session_id,notified_tutors:{name:null===(r=Ct[t])||void 0===r?void 0:r.name,wa_id:null===(d=Ct[t])||void 0===d?void 0:d.wa_id,tutor_id:null===(p=Ct[t])||void 0===p?void 0:p.tutor_id,timestamp:Math.floor(Date.now()/1e3),medium:"wa"}},e.next=15,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/updateNotifiedTutors"),j,{headers:""});case 15:v=e.sent,console.log(v);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(j.a)(Object(u.a)().mark((function e(n){var a,o,i,s;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),Ha(Ct[t].name),s={name:Ct[t].name,email:Ct[t].email,tutorId:Ct[t].tutor_id,sessionId:null===se||void 0===se?void 0:se.session_id,wa_id:Ct[t].wa_id,templateName:"Live Session"==se.type?"live_session_tutor_notify_".concat(ht):"Assignment"==se.type||"Project"==se.type?"assign_session_tutor_notify_".concat(ht):"",param1:"New "+(null===se||void 0===se?void 0:se.type)+" Available",param2:(null===se||void 0===se?void 0:se.type.slice(0,4).toUpperCase())+(null===se||void 0===se?void 0:se.session_id),param3:null===se||void 0===se?void 0:se.subject.toUpperCase(),param4:new Date(ma||(null===se||void 0===se?void 0:se.deadline)).toLocaleString(),param5:(Sa||(null===se||void 0===se?void 0:se.duration))+" (hh : mm)",param6:"".concat((null===se||void 0===se?void 0:se.tutor_dealt_amount)/100," INR"),param7:"d".concat(Da,"/tutorForm/").concat(null===se||void 0===se?void 0:se.session_id,"/").concat(Ct[t].tutor_id),medium:"mail",notified_tutors:{name:null===(a=Ct[t])||void 0===a?void 0:a.name,wa_id:null===(o=Ct[t])||void 0===o?void 0:o.wa_id,tutor_id:null===(i=Ct[t])||void 0===i?void 0:i.tutor_id,timestamp:Math.floor(Date.now()/1e3),medium:"mail"}},e.next=5,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/tutorEmailNotification"),s,{headers:""});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:if(o={tutor_id:Ct[t].tutor_id},"tp"!==(null===(a=Ct[t])||void 0===a?void 0:a.device_type)){e.next=8;break}return e.next=8,m.a.post("https://device6chatapi.el.r.appspot.com/api/tutor/increaseNotificationCount",o,{headers:""});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),da(!0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),a=0;case 9:if(!(a<Ct.length)){e.next=14;break}return e.delegateYield(n(a),"t0",11);case 11:a++,e.next=9;break;case 14:return o={status:"Tutors Notified"},e.next=17,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/updateSessionStatus/").concat(null===se||void 0===se?void 0:se.session_id),o,{headers:""});case 17:e.sent,Ve(!1),It([]),Dt(!1),da(!0),be(!xe),xt(!1),e.next=32;break;case 26:e.prev=26,e.t1=e.catch(2),console.log(e.t1),da(!0),xt(!1),alert("Failed to send notification!");case 32:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),Va=function(){Mt(!1),Vt(!1),fe(!ge)},qa=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(an(t.target.value),console.log(t.target.value),!t.target.value){e.next=30;break}return n={status:t.target.value},a="Completed"===t.target.value?{clientId:null===se||void 0===se?void 0:se.client_id,sessionId:null===se||void 0===se?void 0:se.session_id,sessionStatus:"completed"}:{clientId:null===se||void 0===se?void 0:se.client_id,sessionId:null===se||void 0===se?void 0:se.session_id,sessionStatus:t.target.value},e.prev=5,e.next=8,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/updateSessionStatus/").concat(se.session_id),n);case 8:return e.sent,e.next=11,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/solutionFolderAccess"),a);case 11:if((o=e.sent)?console.log({resultSolutionAccess:o.data.driveType}):console.log("drive permission doesnot change"),!("Solution Sent"===t.target.value&&(null===se||void 0===se?void 0:se.notified_tutors.length)>0)){e.next=24;break}return e.prev=14,i={name:null===se||void 0===se?void 0:se.client_name,from:"",wa_id:null===se||void 0===se?void 0:se.client_waId,templateName:"session_done",templateText:"Hi ".concat(null===se||void 0===se?void 0:se.client_name,", The session with Session ID- ").concat(null===se||void 0===se?void 0:se.session_id," is completed now. You can view the solution by clicking the Solution button below."),template:{namespace:mt,language:"en"},param1:null===se||void 0===se?void 0:se.session_id,param2:null===se||void 0===se?void 0:se.client_name,param3:null===se||void 0===se?void 0:se.session_id,param4:null===se||void 0===se?void 0:se.folderlink.replace("https://drive.google.com/",""),button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.next=18,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/sessionCompleteTemplate"),i,{headers:""});case 18:be(!xe),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(14),console.log(e.t0);case 24:an(t.target.value),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(5),console.log(e.t1);case 30:case"end":return e.stop()}}),e,null,[[5,27],[14,21]])})));return function(t){return e.apply(this,arguments)}}(),Ga=Object(a.useRef)(null);Object(a.useEffect)((function(){if(Ft){var e=Ga.current;null!==e&&e.focus()}}),[Ft]);var Ja=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!mn){e.next=15;break}return n={session_id:se.session_id,agent_comments:{agent_comment:mn,timestamp:(new Date).toISOString()}},e.prev=3,e.next=6,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/saveAgentComment"),n);case 6:a=e.sent,console.log(a),On(""),be(!xe),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),Qa=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={amount:100*+xa},e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/initiate-refund/").concat(t),n,{headers:Object(v.a)({},Ra)});case 4:return a=e.sent,o={refundInfo:a.data},e.next=8,m.a.post("".concat(localStorage.getItem("api"),"/api/payments/refund/").concat(null===se||void 0===se?void 0:se.session_id,"/").concat(t),o,{headers:""});case 8:e.sent,be(!xe),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();console.log(je);var Xa,Za=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={sessionId:null===se||void 0===se?void 0:se.session_id,payment_status:t.target.checked?"paid":"not_paid"},e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/sessions/update-session-payment-status"),n);case 4:e.sent,be(!xe),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),$a="top",eo="center",to=Object(a.useState)(""),no=Object(l.a)(to,2),ao=no[0],oo=no[1],io=Object(a.useState)(!1),so=Object(l.a)(io,2),lo=so[0],co=so[1],ro=function(e,t){"clickaway"!==t&&co(!1)},uo=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={wa_id:"+".concat(t)},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/conversations/contactValidation"),n);case 4:a=e.sent,co(!0),oo(a.data.contacts[0].status+" contact"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),po=new Date,jo=new Date;return jo.setDate(po.getDate()+2),Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:"Live Session"==se.type?"sessionlist live":"Assignment"==se.type?"sessionlist":"Project"==se.type?"sessionlist project":"sessionlist notFilled",children:[Object(X.jsxs)("div",{style:{marginBottom:"-4px"},className:"userTab_",children:[Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:"38%"},children:[Object(X.jsx)("div",{style:{height:"22px",fontSize:"13px"},children:"SI:"}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px",fontWeight:"bolder"},children:["\xa0",null===se||void 0===se?void 0:se.session_id,Object(X.jsx)(Pn,{placement:"right",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Subject:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===se||void 0===se?void 0:se.subject})]}),(null===se||void 0===se?void 0:se.client_comments)&&Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Work Details:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===se||void 0===se?void 0:se.client_comments})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Created At:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:new Date(null===se||void 0===se?void 0:se.createdAt).toLocaleDateString("en-IN")+W()(null===se||void 0===se?void 0:se.createdAt).format(", h:mm a")})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Updated At:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:new Date(null===se||void 0===se?void 0:se.updatedAt).toLocaleDateString("en-IN")+W()(null===se||void 0===se?void 0:se.updatedAt).format(", h:mm a")})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Tutor Deadline:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:new Date(null===se||void 0===se?void 0:se.tutor_deadline).toLocaleDateString("en-IN")+W()(null===se||void 0===se?void 0:se.tutor_deadline).format(", h:mm a")})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Form Creator:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null!==se&&void 0!==se&&se.opExecutive?null===se||void 0===se?void 0:se.opExecutive:"N/A"})]})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"12px",cursor:"pointer",marginLeft:"1px"}})})]})]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:"24%"},children:[Object(X.jsx)("div",{style:{height:"22px",fontSize:"13px"},children:"CI:"}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px",fontWeight:"bolder"},children:["\xa0",se.client_id]})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"38%",flexDirection:"row",justifyContent:"end",fontSize:"14px",fontWeight:"800",maxWidth:"100px",textAlign:"center"},children:[Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",alignSelf:"center",cursor:"pointer",marginRight:"4px"},children:pe&&(null===pe||void 0===pe?void 0:pe.find((function(e){return e.session_id==se.session_id})))&&Object(X.jsx)("div",{className:"circle red"})}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignSelf:"center",cursor:"pointer"},onClick:(Xa="paper",function(){Ve(!0),Qe(Xa),ha(null===se||void 0===se?void 0:se.tutor_deadline),_a(null===se||void 0===se?void 0:se.tutor_duration)}),children:[se.notified_tutors&&se.tutor_interested&&se.notified_tutors.length>0&&se.tutor_interested.length>0?Object(X.jsx)(hn.a,{fontSize:"small"}):se.notified_tutors&&se.notified_tutors.length>0?Object(X.jsx)(fn.a,{fontSize:"small"}):Object(X.jsx)(Nt.a,{fontSize:"small"}),null!==se&&void 0!==se&&se.assigned_tutors&&se.assigned_tutors.length>0&&"accepted"==(null===se||void 0===se?void 0:se.assigned_tutors[0].acceptance_status)?Object(X.jsx)(Kt.a,{fontSize:"small",color:"success",style:{marginLeft:"1px"}}):se.assigned_tutors&&se.assigned_tutors.length>0&&Object(X.jsx)(Kt.a,{fontSize:"small",style:{marginLeft:"1px"}})]}),Object(X.jsxs)(q.a,{open:Ye,onClose:Wa,scroll:Je,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(X.jsxs)(Q.a,{style:{fontSize:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 10px 10px 24px"},id:"scroll-dialog-title",children:["TUTOR LIST",Object(X.jsx)("input",{type:"datetime-local",style:{width:"130px",outline:"none",borderRadius:"3px",border:"1px solid gray",fontFamily:"inherit"},value:ma,onChange:function(e){new Date(e.target.value)<new Date(null===se||void 0===se?void 0:se.deadline)?ha(e.target.value):alert("Tutor deadline must be before the session deadline!")}}),"Live Session"==(null===se||void 0===se?void 0:se.type)&&Object(X.jsx)(Jt.a,{style:{width:"60px",outline:"none",borderRadius:"3px",border:"1px solid gray"},format:"## : ##",placeholder:"Duration",value:Sa,onChange:function(e){return _a(e.target.value)},autoComplete:"off"}),Object(X.jsx)(Et.a,{label:"SELECT ALL",control:Object(X.jsx)(me.a,{size:"medium",color:"success",checked:At,onChange:function(){if(Ct.length>=0&&!1===At){var e=[];null===le||void 0===le||le.filter((function(e){return"active"==(null===e||void 0===e?void 0:e.tutor_status)})).forEach((function(t){Ct.find((function(e){return e.wa_id==t.wa_id}))||e.push(t)})),It([].concat(Object(p.a)(Ct),e)),Dt(!0)}else At&&(It([]),Dt(!1))}})})]}),Object(X.jsx)(Q.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0px 7px 15px 24px"},children:Object(X.jsx)("input",{placeholder:"Search for tutors",className:"chatMenuInput",onKeyPress:he})}),Object(X.jsx)(J.a,{dividers:"paper"===Je,style:{padding:"16px 0px"},children:ct?Object(X.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"255px 210px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsx)(st.a,{id:"scroll-dialog-description",ref:Ze,tabIndex:-1,children:Object(X.jsxs)(X.Fragment,{children:[null===le||void 0===le||null===(t=le.filter((function(e){return"active"==(null===e||void 0===e?void 0:e.tutor_status)})))||void 0===t?void 0:t.map((function(e,t){var n,a,o,i,s,l;return Object(X.jsxs)("div",{className:null!==Ct&&void 0!==Ct&&Ct.find((function(t){return t.wa_id==e.wa_id}))?"selected_card":St==e.wa_id?"card":null!==se&&void 0!==se&&se.notified_tutors&&null!==se&&void 0!==se&&se.notified_tutors.find((function(t){return t.tutor_id==e.tutor_id}))?"success_card":"card",onClick:function(){return function(e){if(null!==Ct&&void 0!==Ct&&Ct.find((function(t){return t.wa_id==e.wa_id}))){var t=null===Ct||void 0===Ct?void 0:Ct.findIndex((function(t){if(t.wa_id===e.wa_id)return!0}));console.log(t);var n=Ct.splice(t,1);console.log(Ct),It(Ct),console.log(n),_t(n[0].wa_id),ft(!1)}else It([].concat(Object(p.a)(Ct),[e])),ft(!0)}(e)},children:[Object(X.jsxs)("div",{style:{display:"flex"},children:[(null===Ct||void 0===Ct?void 0:Ct.find((function(t){return t.wa_id==e.wa_id})))&&Object(X.jsx)(ze.a,{fontSize:"small",style:{color:"rgb(11 145 102)"}}),Object(X.jsxs)("label",{for:e.tutor_id,style:{display:"flex",marginLeft:"10px",cursor:"pointer",fontSize:"15px"},children:[(null===se||void 0===se?void 0:se.notified_tutors)&&(null===se||void 0===se?void 0:se.notified_tutors.find((function(t){return t.tutor_id==e.tutor_id})))&&Object(X.jsx)(_n.a,{fontSize:"small",color:"success",style:{marginRight:"5px"}}),(null===se||void 0===se?void 0:se.notified_tutors)&&(null===se||void 0===se?void 0:se.notified_tutors.find((function(t){return t.tutor_id==e.tutor_id&&"mail"==t.medium})))&&Object(X.jsx)($t.a,{fontSize:"small",color:"success",style:{marginRight:"5px"}}),(null===se||void 0===se?void 0:se.notified_tutors)&&(null===se||void 0===se?void 0:se.notified_tutors.find((function(t){return t.tutor_id==e.tutor_id&&"wa"==t.medium})))&&Object(X.jsx)(Xt.a,{fontSize:"small",color:"success",style:{marginRight:"5px"}}),(null===se||void 0===se?void 0:se.notified_tutors)&&(null===se||void 0===se?void 0:se.notified_tutors.find((function(t){return t.tutor_id==e.tutor_id&&"wa-mail"==t.medium})))&&Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Xt.a,{fontSize:"small",color:"success",style:{marginRight:"5px"}})," ",Object(X.jsx)($t.a,{fontSize:"small",color:"success",style:{marginRight:"5px"}})]}),Object(X.jsx)("span",{style:{fontWeight:"600",marginRight:"5px"},children:(l=e.name,l.length>16?"".concat(l.slice(0,16),".."):l.length<=16?l:void 0)})," ",e.tutor_id,"\xa0",Object(X.jsx)("span",{children:Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Highest Degree:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===e||void 0===e?void 0:e.highest_degree})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Department:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===e||void 0===e?void 0:e.dept})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["College/s:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===e||void 0===e?void 0:e.academic_info)&&(null===e||void 0===e||null===(n=e.academic_info[0])||void 0===n?void 0:n.college.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["WhatsApp:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===e||void 0===e?void 0:e.wa_id})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Subjects known:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===e||void 0===e?void 0:e.subjects)&&(null===e||void 0===e?void 0:e.subjects.toString())})]}),Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Tags:"," ",Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===e||void 0===e?void 0:e.tags)&&(null===e||void 0===e?void 0:e.tags.toString())})]})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"16px"}})})}),(null===e||void 0===e?void 0:e.writer)&&Object(X.jsx)("span",{style:{marginLeft:"5px"},children:Object(X.jsx)(vt.a,{fontSize:"small",style:{fontSize:"14px"}})}),Object(X.jsx)("span",{children:Object(X.jsx)(Cn.a,{fontSize:"small",style:{fontSize:"18px"},onClick:function(){return uo(null===e||void 0===e?void 0:e.wa_id)}})}),Object(X.jsx)("span",{style:{fontSize:"12px",color:"green",marginLeft:"5px"},children:(null===e||void 0===e?void 0:e.highlights)&&(null===e||void 0===e?void 0:e.highlights.map((function(e){var t,n;return Object(X.jsxs)("span",{children:[null===e||void 0===e||null===(t=e.path)||void 0===t?void 0:t.slice(0,1),": ",null===e||void 0===e||null===(n=e.texts)||void 0===n?void 0:n.map((function(e){return Object(X.jsxs)("span",{children:[e.value,"\xa0"]})}))]})})))})]})]}),Object(X.jsx)("div",{style:{display:"flex"},children:(null===e||void 0===e?void 0:e.sessions_assigned)&&(null===e||void 0===e||null===(a=e.sessions_assigned)||void 0===a?void 0:a.filter((function(e){return new Date(e.deadline)>=po&&new Date(e.deadline)<=jo})))&&(null===e||void 0===e||null===(o=e.sessions_assigned)||void 0===o?void 0:o.filter((function(e){return new Date(e.deadline)>=po&&new Date(e.deadline)<=jo})).length)>=2&&Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:"WARNING!!!"}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:"This tutor is already assigned for 2 or more than 2 sessions in next 2 days.."}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:"Sessions Assigned:"}),null===e||void 0===e||null===(i=e.sessions_assigned)||void 0===i?void 0:i.filter((function(e){return new Date(e.deadline)>po&&new Date(e.deadline)<jo})).map((function(e){return Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:[Object(X.jsxs)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:["ID: ",null===e||void 0===e?void 0:e.session_id]}),Object(X.jsxs)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:["\xa0 | \xa0Type: ",null===e||void 0===e?void 0:e.type]})]})}))]}),children:Object(X.jsx)(Tn.a,{fontSize:"small",style:{fontSize:"21px"},color:"error"})})}),Object(X.jsx)($e.a,{sx:{width:150,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:Object(X.jsx)(nt.a,{size:"small",icon:Object(X.jsx)(Wt.a,{style:{color:"#ffff",fontSize:"14px"}}),label:null===(s=""+(null===e||void 0===e?void 0:e.rating)/2)||void 0===s?void 0:s.slice(0,4),color:"success"})})]})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",padding:"20px 45px 20px 30px"},count:Math.ceil(de/20),page:at,onChange:Ka})]})})}),jt&&Object(X.jsx)(He.a,{}),Object(X.jsxs)(G.a,{children:[Object(X.jsx)(Y.a,{onClick:Wa,children:"Close"}),"Live Session"==(null===se||void 0===se?void 0:se.type)&&ra&&Ct.length>0&&ma&&Sa||"Assignment"==(null===se||void 0===se?void 0:se.type)||"Project"==(null===se||void 0===se?void 0:se.type)&&ra&&Ct.length>0&&ma?Object(X.jsx)(Y.a,{onClick:Ya,children:"Send"}):Object(X.jsx)(Y.a,{disabled:!0,children:"Send"})]})]}),Object(X.jsx)("div",{children:Object(X.jsx)(ut.a,{open:lo,autoHideDuration:2e3,onClose:ro,anchorOrigin:{vertical:$a,horizontal:eo},children:Object(X.jsx)(Dn,{onClose:ro,severity:"info",sx:{width:"100%"},children:ao})},$a+eo)})]})]}),Object(X.jsxs)("div",{style:{marginBottom:"-4px"},className:"userTab_",children:[Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:"38%"},children:[Object(X.jsx)("div",{style:{height:"22px",fontSize:"13px"},children:"CA:\xa0"}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px"},children:[se.client_amount?se.client_amount/100+" "+se.currency:"---",je&&null!==je&&void 0!==je&&je.find((function(e){return e.payload.payment_link&&e.payload.payment_link.entity.id==se.plink_id&&"paid"==e.payload.payment_link.entity.status}))||"paid"==se.payment_status?Object(X.jsx)("span",{children:Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Amount Paid:"," "]}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===se||void 0===se||null===(n=se.payment_info)||void 0===n?void 0:n.length)>0?(null===se||void 0===se||null===(o=se.payment_info)||void 0===o||null===(i=o.filter((function(e){return"plink"==e.type})))||void 0===i?void 0:i.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))/100+" "+(null===se||void 0===se?void 0:se.currency)+" (via payment link)":"---"})}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===se||void 0===se||null===(s=se.payment_info)||void 0===s?void 0:s.filter((function(e){return"vpa"==e.type&&"captured"==e.status})))&&(null===se||void 0===se||null===(c=se.payment_info)||void 0===c?void 0:c.filter((function(e){return"vpa"==e.type&&"captured"==e.status})).length)>0&&(null===se||void 0===se||null===(r=se.payment_info)||void 0===r||null===(d=r.filter((function(e){return"vpa"==e.type&&"captured"==e.status})))||void 0===d?void 0:d.map((function(e){return null===e||void 0===e?void 0:e.amount})).reduce((function(e,t){return e+t}),0))/100+" INR (to vpa)"})})]}),children:Object(X.jsx)(ze.a,{fontSize:"x-small",style:{marginLeft:"3px",marginTop:"1px",fontSize:"15px",cursor:"pointer"}})})}):je&&null!==je&&void 0!==je&&je.find((function(e){return e.payload.payment_link&&e.payload.payment_link.entity.id==se.plink_id&&"partially_paid"==e.payload.payment_link.entity.status}))||"partially_paid"==se.payment_status?Object(X.jsx)("span",{children:Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Amount Paid:"," "]}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===se||void 0===se||null===(x=se.payment_info)||void 0===x?void 0:x.length)>0?(null===se||void 0===se||null===(b=se.payment_info)||void 0===b||null===(g=b.filter((function(e){return"plink"==e.type})))||void 0===g?void 0:g.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))/100+" "+(null===se||void 0===se?void 0:se.currency)+" (via payment link)":"---"})}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:(null===se||void 0===se||null===(f=se.payment_info)||void 0===f?void 0:f.filter((function(e){return"vpa"==e.type&&"captured"==e.status})))&&(null===se||void 0===se||null===(h=se.payment_info)||void 0===h?void 0:h.filter((function(e){return"vpa"==e.type&&"captured"==e.status})).length)>0&&(null===se||void 0===se||null===(O=se.payment_info)||void 0===O||null===(y=O.filter((function(e){return"vpa"==e.type&&"captured"==e.status})))||void 0===y?void 0:y.map((function(e){return null===e||void 0===e?void 0:e.amount})).reduce((function(e,t){return e+t}),0))/100+" INR (to vpa)"})})]}),children:Object(X.jsx)(bn.a,{fontSize:"x-small",style:{marginLeft:"3px",marginTop:"1px",cursor:"pointer",fontSize:"15px"}})})}):null,"refunded"==(null===se||void 0===se?void 0:se.refund_status)&&Object(X.jsx)("span",{children:Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Amount Refunded:"," "]}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:null===se||void 0===se||null===(S=se.payment_info)||void 0===S?void 0:S.map((function(e){var t;return(null===e||void 0===e?void 0:e.refund_info)&&(null===e||void 0===e||null===(t=e.refund_info)||void 0===t?void 0:t.filter((function(e){return"processed"==e.status})).map((function(e){return Object(X.jsxs)("div",{style:{display:"flex"},children:[(null===e||void 0===e?void 0:e.amount)/100," ",null===e||void 0===e?void 0:e.currency," [ID: ",null===e||void 0===e?void 0:e.id,"]"]})})))}))})})]}),children:Object(X.jsx)(An.a,{fontSize:"small",color:"error",style:{marginLeft:"3px",cursor:"pointer",fontSize:"17px"}})})})]}),Object(X.jsx)("div",{style:{fontSize:"13px",marginLeft:"3px"}})]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:"24%"},children:[Object(X.jsx)("div",{style:{height:"22px",fontSize:"13px"},children:"TA:\xa0"}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px"},children:[null!==se&&void 0!==se&&se.assigned_tutors&&(null===se||void 0===se||null===(_=se.assigned_tutors)||void 0===_?void 0:_.length)>0?(null===se||void 0===se||null===(w=se.assigned_tutors)||void 0===w||null===(k=w.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.pout_info)||void 0===t?void 0:t.length)>0})))||void 0===k?void 0:k.map((function(e){var t;return(null===e||void 0===e||null===(t=e.pout_info)||void 0===t?void 0:t.filter((function(e){return"processed"==e.status})).map((function(e){return null===e||void 0===e?void 0:e.amount})).reduce((function(e,t){return e+t}),0))/100})).reduce((function(e,t){return e+t}),0))+" INR":"---",(null===se||void 0===se?void 0:se.assigned_tutors)&&(null===se||void 0===se||null===(C=se.assigned_tutors)||void 0===C||null===(I=C.filter((function(e){return"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)})))||void 0===I?void 0:I.length)>0&&(null===se||void 0===se||null===(T=se.assigned_tutors)||void 0===T||null===(z=T.filter((function(e){return"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)})))||void 0===z?void 0:z.length)==(null===se||void 0===se||null===(A=se.assigned_tutors)||void 0===A||null===(N=A.filter((function(e){return"assigned"==(null===e||void 0===e?void 0:e.tutor_unassigned)})))||void 0===N?void 0:N.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.pout_info)||void 0===t?void 0:t.filter((function(e){return"processed"==e.status})).length)>0})).length)&&Object(X.jsx)("span",{children:Object(X.jsx)(ze.a,{fontSize:"x-small",style:{marginLeft:"3px",marginTop:"1px",fontSize:"15px"}})}),Object(X.jsx)("span",{children:Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Assigned Tutors:"," "]}),null!==se&&void 0!==se&&se.assigned_tutors&&(null===se||void 0===se?void 0:se.assigned_tutors.length)>0?null===se||void 0===se||null===(D=se.assigned_tutors)||void 0===D?void 0:D.map((function(e){var t,n,a;return Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsxs)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:[e.name,"\xa0|\xa0",e.tutor_id,"\xa0|\xa0",Object(X.jsx)("span",{children:null!==e&&void 0!==e&&e.pout_info?(null===e||void 0===e||null===(t=e.pout_info)||void 0===t||null===(n=t.filter((function(e){return"processed"==e.status})))||void 0===n||null===(a=n.map((function(e){return null===e||void 0===e?void 0:e.amount})))||void 0===a?void 0:a.reduce((function(e,t){return e+t}),0))/100+" INR":"---"})]})})})):Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:Object(X.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:"No Tutors Assigned"})})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"12px",cursor:"pointer",marginLeft:"1px"}})})})]})]}),Object(X.jsx)("div",{style:{display:"flex",flex:"38%",flexDirection:"row",justifyContent:"end",fontSize:"11px",fontWeight:"800",maxWidth:"100px",textAlign:"center"},children:Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",alignSelf:"center",textTransform:"capitalize"},children:se.work_status&&"New Task"!==se.work_status?Object(X.jsx)("span",{className:"Client Cancelled"==(null===se||void 0===se?void 0:se.work_status)||"Agent Cancelled"==(null===se||void 0===se?void 0:se.work_status)?"color_red":"Tutors Notified"==(null===se||void 0===se?void 0:se.work_status)?"color_blue":"Tutors Assigned"==(null===se||void 0===se?void 0:se.work_status)?"color_pink":"Completed"==(null===se||void 0===se?void 0:se.work_status)?"color_green":"black",children:se.work_status}):Object(X.jsx)("span",{style:{fontSize:"12px",color:"#fd3dca"},children:"New Task"})})})]}),Object(X.jsxs)("div",{className:"userTab_",children:[Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",flex:"38%"},children:Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px",fontWeight:"bolder",width:"145px"},children:null!==se&&void 0!==se&&se.deadline?new Date(null===se||void 0===se?void 0:se.deadline).toLocaleDateString("en-IN")+W()(null===se||void 0===se?void 0:se.deadline).format(", h:mm a"):"---"})}),Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",flex:"24%"},children:Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px",fontWeight:"bolder"},children:null!==se&&void 0!==se&&se.duration?"".concat(null===se||void 0===se||null===(P=se.duration)||void 0===P?void 0:P.slice(0,2),"h ").concat(null===se||void 0===se||null===(R=se.duration)||void 0===R?void 0:R.slice(4,7),"m"):"---"})}),Object(X.jsxs)("div",{style:{display:"flex",flex:"38%",flexDirection:"row",justifyContent:"end",fontSize:"12px",fontWeight:"800",maxWidth:"100px",textAlign:"end"},children:[Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",alignSelf:"flex-end"},children:(null===se||void 0===se?void 0:se.session_agent)&&(null===se||void 0===se?void 0:se.session_agent)}),Object(X.jsxs)("div",{style:{marginBottom:"-7px",cursor:"pointer"},children:[Object(X.jsx)(Pt.a,{fontSize:"small",onClick:function(){fe(!ge),Mt(!0)}}),Object(X.jsxs)(q.a,{open:Ft,onClose:Va,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(X.jsxs)(Q.a,{id:"scroll-dialog-title",style:{width:"525px"},children:[null===se||void 0===se?void 0:se.type," Details"]}),Object(X.jsxs)(J.a,{dividers:!1,style:{padding:"0px 32px 20px 32px"},children:[Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Session ID:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null===se||void 0===se?void 0:se.session_id})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Client ID:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null===se||void 0===se?void 0:se.client_id})]})]}),Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Work Details:"}),Object(X.jsx)("div",{style:{fontWeight:"800",paddingRight:"45px",maxWidth:"300px"},children:null!==se&&void 0!==se&&se.client_comments?null===se||void 0===se?void 0:se.client_comments:"---"})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Deadline:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null!==se&&void 0!==se&&se.deadline?W()(null===se||void 0===se?void 0:se.deadline).format("MMM Do YY, h:mm a"):"---"})]})]}),Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Duration:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null!==se&&void 0!==se&&se.duration?null===se||void 0===se?void 0:se.duration:"---"})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Client Amount:"}),null!==se&&void 0!==se&&se.client_amount&&!Xn?Object(X.jsx)("div",{style:{fontWeight:"800"},children:null!==se&&void 0!==se&&se.client_amount?Object(X.jsxs)("span",{style:{display:"flex"},children:[(null===se||void 0===se?void 0:se.client_amount)/100+" "+se.currency,!(null!==se&&void 0!==se&&se.payment_info)||0==se.payment_info.length&&Object(X.jsx)("span",{style:{cursor:"pointer",marginLeft:"5px"},children:Object(X.jsx)(Lt.a,{fontSize:"x-small",style:{fontSize:"15px"},onClick:function(){window.confirm("Warning!!! If you update the client amount field you will lost the old payment informations for this session. Would you like to continue?")&&Zn(!0)}})})]}):"---"}):null===se||void 0===se||!se.client_amount||Xn?Object(X.jsxs)("span",{style:{fontWeight:"800"},children:[Object(X.jsxs)("select",{name:"type",id:"type",className:"arrow",style:{width:"22%",height:"23px",padding:"0px",borderBottom:"1px solid gray",borderRadius:"0px"},value:pn,onChange:function(e){return jn(e.target.value)},required:!0,children:[Object(X.jsx)("option",{selected:!0,value:"USD",children:"USD"}),Object(X.jsx)("option",{value:"EUR",children:"EUR"}),Object(X.jsx)("option",{value:"BHD",children:"BHD"}),Object(X.jsx)("option",{value:"INR",children:"INR"}),Object(X.jsx)("option",{value:"CAD",children:"CAD"}),Object(X.jsx)("option",{value:"AUD",children:"AUD"}),Object(X.jsx)("option",{value:"GBP",children:"GBP"}),Object(X.jsx)("option",{value:"AED",children:"AED"})]}),Object(X.jsx)("input",{type:"number",style:{width:"30%",height:"20px",marginLeft:"5px",outline:"none",border:"none",borderBottom:"1px solid gray",borderRadius:"0px"},min:"1",max:"10",value:ln,onChange:function(e){return cn(e.target.value)}}),Object(X.jsx)(me.a,{size:"small",checked:qn,onChange:function(e){Gn(e.target.checked)},inputProps:{"aria-label":"controlled"}}),Object(X.jsx)("span",{style:{cursor:"pointer"},children:"PayPal"})," ","\xa0",ta?Object(X.jsxs)("button",{style:{border:"1px solid #e3e0e0",borderRadius:"2px",height:"25px"},disabled:!0,children:[Object(X.jsx)(Ie.a,{fontSize:"small",style:{width:"15px",height:"15px"}})," ","Update"]}):Object(X.jsx)("button",{style:{backgroundColor:"#1876D1",color:"#ffff",border:"none",borderRadius:"2px",height:"25px",cursor:"pointer"},onClick:Ma,children:"Update"})]}):null]})]}),Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsxs)("div",{style:{fontSize:"14px"},children:["Client Amount Paid:",Object(X.jsx)(Y.a,{variant:"contained",size:"small",color:"error",style:{fontSize:"10px",lineHeight:"1.6",minWidth:"57px",marginLeft:"15px"},onClick:function(){En(!0)},children:"Refund"}),Object(X.jsxs)(q.a,{open:Wn,onClose:Ea,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(X.jsx)(Q.a,{id:"alert-dialog-title",children:"Initiate Refunds to Client"}),Object(X.jsx)(J.a,{style:{paddingLeft:"0px",paddingRight:"0px",width:"500px"},children:Object(X.jsx)(st.a,{id:"alert-dialog-description",children:null===se||void 0===se||null===(E=se.payment_info)||void 0===E?void 0:E.map((function(e,t){var n,a,o;return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{style:{padding:"18px 26px 18px 26px",borderBottom:"1px solid lightgray"},children:[Object(X.jsxs)("div",{style:{display:"flex",fontWeight:"800"},children:[e.currency," ",e.amount/100," ",Object(X.jsxs)("span",{style:{fontSize:"14px",fontWeight:"500",marginLeft:"5px"},children:["on"," ",W()(new Date(1e3*(null===e||void 0===e?void 0:e.created_at)).toISOString()).format("MMM Do YYYY, h:mm a")]}),Object(X.jsx)("span",{style:{display:"flex",flex:"10%",justifyContent:"flex-end"},children:null!==e&&void 0!==e&&e.refund_info&&(null===e||void 0===e||null===(n=e.refund_info)||void 0===n?void 0:n.filter((function(e){return"processed"==e.status})).map((function(e){return null===e||void 0===e?void 0:e.amount})).reduce((function(e,t){return e+t}),0))==e.amount?Object(X.jsx)(Y.a,{variant:"contained",size:"small",color:"error",style:{fontSize:"9px",lineHeight:"1.6",minWidth:"57px",marginLeft:"15px"},disabled:!0,children:"Refund"}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("input",{style:{width:"75px",height:"18px",borderRadius:"4px",border:"1px solid lightgray",outline:"none"},type:"number",placeholder:"Amount",onChange:function(e){return ba(e.target.value)}}),Object(X.jsx)(Y.a,{variant:"contained",size:"small",color:"error",style:{fontSize:"9px",lineHeight:"1.6",minWidth:"57px",marginLeft:"15px"},onClick:function(){return Qa(e.id)},children:"Refund"})]})})]}),Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginTop:"8px"},children:["Payment ID:"," ",null===e||void 0===e||null===(a=e.id)||void 0===a?void 0:a.replace("pay_","")," ("+e.method+")",Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(null===e||void 0===e?void 0:e.refund_info)&&Object(X.jsx)("span",{style:{fontStyle:"italic",textDecoration:"underline"},children:"Refund ID/s:"}),(null===e||void 0===e?void 0:e.refund_info)&&(null===e||void 0===e||null===(o=e.refund_info)||void 0===o?void 0:o.filter((function(e){return"processed"==e.status})).map((function(e){var t;return Object(X.jsxs)("div",{style:{display:"flex"},children:[null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.replace("rfnd_","")," (",(null===e||void 0===e?void 0:e.amount)/100," ",null===e||void 0===e?void 0:e.currency,")"]})})))]})]})]},t)})}))})}),Object(X.jsx)(G.a,{children:Object(X.jsx)(Y.a,{onClick:Ea,children:"Close"})})]})]}),Object(X.jsxs)("div",{style:{fontWeight:"800",display:"flex",flexDirection:"column"},children:[(null===se||void 0===se||null===(B=se.payment_info)||void 0===B?void 0:B.length)>0?Object(X.jsxs)("div",{style:{display:"flex"},children:[(null===se||void 0===se||null===(L=se.payment_info)||void 0===L||null===(F=L.filter((function(e){return"plink"==e.type})))||void 0===F?void 0:F.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))/100+" "+(null===se||void 0===se?void 0:se.currency),Object(X.jsx)("span",{style:{display:"flex",alignSelf:"center",marginLeft:"5px",cursor:"pointer",color:""==Aa?"orange":"success"===Aa?"green":"red"},onClick:Ba,children:Object(X.jsx)(un.a,{fontSize:"small"})})]}):Object(X.jsxs)("div",{children:["---",Object(X.jsx)("span",{style:{cursor:"pointer",color:""==Aa?"orange":"success"===Aa?"green":"red"},onClick:Ba,children:Object(X.jsx)(un.a,{fontSize:"small"})})]}),Object(X.jsx)("div",{children:(null===se||void 0===se||null===(M=se.payment_info)||void 0===M?void 0:M.filter((function(e){return"vpa"==e.type&&"captured"==e.status})))&&(null===se||void 0===se||null===(U=se.payment_info)||void 0===U?void 0:U.filter((function(e){return"vpa"==e.type&&"captured"==e.status})).length)>0&&Object(X.jsx)(X.Fragment,{children:(null===se||void 0===se||null===(K=se.payment_info)||void 0===K||null===(H=K.filter((function(e){return"vpa"==e.type&&"captured"==e.status})))||void 0===H?void 0:H.map((function(e){return null===e||void 0===e?void 0:e.amount})).reduce((function(e,t){return e+t}),0))/100+" INR (paid to vpa)"})})]}),Object(X.jsxs)("div",{children:[Object(X.jsx)(Et.a,{control:Object(X.jsx)(me.a,{checked:"paid"==(null===se||void 0===se?void 0:se.payment_status),onChange:Za,size:"small",name:"payment"}),label:"Fully Paid"}),Object(X.jsx)("div",{style:{fontSize:"12px",marginTop:"-7px"},children:"(Use it only in case of bank transfer)"})]})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Total Amount Paid to Tutors:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null!==se&&void 0!==se&&se.assigned_tutors&&(null===se||void 0===se||null===(V=se.assigned_tutors)||void 0===V?void 0:V.length)>0?(null===se||void 0===se||null===(Z=se.assigned_tutors)||void 0===Z||null===($=Z.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.pout_info)||void 0===t?void 0:t.length)>0})))||void 0===$?void 0:$.map((function(e){var t;return(null===e||void 0===e||null===(t=e.pout_info)||void 0===t?void 0:t.filter((function(e){return"processed"==e.status})).map((function(e){return null===e||void 0===e?void 0:e.amount})).reduce((function(e,t){return e+t}),0))/100})).reduce((function(e,t){return e+t}),0))+" INR":"---"})]})]}),Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Subject:"}),Object(X.jsx)("div",{style:{fontWeight:"800",maxWidth:"300px",paddingRight:"45px"},children:null!==se&&void 0!==se&&se.subject?null===se||void 0===se?void 0:se.subject.toUpperCase():"---"})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Tutor Dealt Amount:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null!==se&&void 0!==se&&se.tutor_dealt_amount&&!Zt?Object(X.jsx)("div",{style:{fontWeight:"800"},children:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{children:(null===se||void 0===se?void 0:se.tutor_dealt_amount)/100+" INR"}),"\xa0",Object(X.jsx)("span",{style:{cursor:"pointer"},children:Object(X.jsx)(Lt.a,{fontSize:"x-small",style:{fontSize:"15px"},onClick:function(){return en(!0)}})})]})}):Object(X.jsxs)("span",{style:{fontWeight:"800"},children:[Object(X.jsx)("input",{type:"number",style:{width:"30%",height:"20px",marginLeft:"5px",marginTop:"5px",outline:"none",border:"none",borderBottom:"1px solid gray",borderRadius:"0px"},value:In,onChange:function(e){return zn(e.target.value)},autoFocus:!0})," ","\xa0",ia?Object(X.jsxs)("button",{style:{border:"1px solid #e3e0e0",borderRadius:"2px",height:"25px"},disabled:!0,children:[Object(X.jsx)(Ie.a,{fontSize:"small",style:{width:"15px",height:"15px"}})," ","Update"]}):Object(X.jsx)("button",{style:{backgroundColor:"#1876D1",color:"#ffff",border:"none",borderRadius:"2px",height:"25px",cursor:"pointer"},onClick:Ua,children:"Update"})]})})]})]}),Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Type:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:null!==se&&void 0!==se&&se.type?se.type:"---"})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Work Status:"}),Object(X.jsx)("div",{style:{fontWeight:"800"},children:Yt?Object(X.jsxs)(Gt.a,{defaultValue:null===se||void 0===se?void 0:se.work_status,inputProps:{name:"age",id:"uncontrolled-native"},style:{padding:"5px"},onChange:qa,children:[Object(X.jsx)("option",{value:"",children:"-select-"}),Object(X.jsx)("option",{value:"New Task",children:"New Task"}),Object(X.jsx)("option",{value:"Not Confirmed",children:"Not Confirmed"}),Object(X.jsx)("option",{value:"Tutors Notified",children:"Tutors Notified"}),Object(X.jsx)("option",{value:"Tutors Assigned",children:"Tutors Assigned"}),Object(X.jsx)("option",{value:"Pending",children:"Pending"}),Object(X.jsx)("option",{value:"In Progress",children:"In Progress"}),Object(X.jsx)("option",{value:"Follow Up",children:"Follow Up"}),Object(X.jsx)("option",{value:"Client Cancelled",children:"Client Cancelled"}),Object(X.jsx)("option",{value:"Agent Cancelled",children:"Agent Cancelled"}),Object(X.jsx)("option",{value:"Completed",children:"Completed"}),Object(X.jsx)("option",{value:"Solution Sent",children:"Send Solution"})]}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("span",{children:null!==se&&void 0!==se&&se.work_status?null===se||void 0===se?void 0:se.work_status:"New Task"}),"\xa0",Object(X.jsx)("span",{style:{cursor:"pointer"},children:Object(X.jsx)(Lt.a,{fontSize:"x-small",style:{fontSize:"15px"},onClick:function(){return Vt(!0)}})})]})})]})]}),Object(X.jsxs)(st.a,{style:{display:"flex",flexDirection:"row",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Agent Name & Comment:"}),Object(X.jsxs)("div",{style:{fontWeight:"800",marginTop:"5px"},children:[Object(X.jsx)("textarea",{id:"agentComment",name:"agentComment",value:mn,onChange:function(e){return On(e.target.value)},style:{width:"80%",borderRadius:"5px",padding:"5px 10px",border:"1px solid #d1d1d1",resize:"none",outline:"none",fontFamily:"sans-serif"},rows:"4",cols:"50",placeholder:"e.g. Sachin: *Your comments*"}),Object(X.jsx)("button",{style:{backgroundColor:"#1876D1",color:"#ffff",border:"none",borderRadius:"5px",height:"25px",cursor:"pointer"},onClick:Ja,children:"Update"})]})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"45%",flexDirection:"column"},children:[Object(X.jsxs)("div",{style:{fontSize:"14px"},children:["Agent Comments:",(null===se||void 0===se?void 0:se.agent_comments)&&(null===se||void 0===se||null===(te=se.agent_comments)||void 0===te?void 0:te.length)>0&&Object(X.jsx)("span",{children:Object(X.jsx)(Pn,{placement:"top",title:Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:["Old Comments:"," "]}),Object(X.jsx)(oe.a,{color:"inherit",style:{fontSize:"13.5px",fontWeight:"600",marginBottom:"5px"},children:null===se||void 0===se||null===(ne=se.agent_comments)||void 0===ne?void 0:ne.map((function(e){return Object(X.jsx)("div",{style:{fontSize:"12px",fontWeight:"normal"},children:e})}))})]}),children:Object(X.jsx)(ee.a,{fontSize:"small",style:{fontSize:"12px",cursor:"pointer",marginLeft:"1px"}})})})]}),Object(X.jsxs)("div",{style:{fontWeight:"800",fontSize:"14px",maxWidth:"270px"},children:[null!==se&&void 0!==se&&se.agent_comments_new&&(null===se||void 0===se?void 0:se.agent_comments_new.length)>0?null===se||void 0===se||null===(ae=se.agent_comments_new)||void 0===ae?void 0:ae.slice(0,Ca).map((function(e){return Object(X.jsxs)("div",{children:["[",W()(e.timestamp).format("MMM Do YY, h:mm a"),"] ",e.agent_comment]})})):"---",null!==se&&void 0!==se&&se.agent_comments_new&&(null===se||void 0===se?void 0:se.agent_comments_new.length)>1&&1==Ca?Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",color:"#5555ff",cursor:"pointer",fontSize:"12px"},onClick:function(){return Ia(null===se||void 0===se?void 0:se.agent_comments_new.length)},children:["Show More ",Object(X.jsx)(yn.a,{fontSize:"small"})]}):null!==se&&void 0!==se&&se.agent_comments_new&&(null===se||void 0===se?void 0:se.agent_comments_new.length)>1&&Ca>1?Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",color:"#5555ff",cursor:"pointer",fontSize:"12px"},onClick:function(){return Ia(1)},children:["Show Less ",Object(X.jsx)(Xe.a,{fontSize:"small"})]}):""]})]})]}),Object(X.jsxs)(st.a,{id:"scroll-dialog-description",ref:Ga,tabIndex:-1,style:{display:"flex",flexDirection:"column",padding:"10px 0px 20px 0px"},children:[Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column",marginBottom:"20px"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Folder G-Drive Link:"}),null!==se&&void 0!==se&&se.folderlink?Object(X.jsx)("a",{style:{width:"max-content"},href:null===se||void 0===se?void 0:se.folderlink,target:"_blank",children:"Click here"}):"---"]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column",marginBottom:"20px"},children:[Object(X.jsx)("div",{style:{fontSize:"14px"},children:"Form Link:"}),Object(X.jsx)("a",{style:{width:"max-content"},href:"".concat(Pa,"/").concat(se.session_id,"/").concat(se.client_id,"?agent=success&key=poc_y6d_ui9"),target:"_blank",children:"Form Link"})]}),Object(X.jsxs)("div",{style:{display:"flex",flex:"55%",flexDirection:"column"},children:[Object(X.jsxs)("div",{style:{fontSize:"14px"},children:["Tutors for this ",null===se||void 0===se?void 0:se.type,":"]}),null!==se&&void 0!==se&&se.notified_tutors&&(null===se||void 0===se||null===(ie=se.notified_tutors)||void 0===ie?void 0:ie.length)>0?Object(X.jsx)(vn,{notified_tutors:null===se||void 0===se?void 0:se.notified_tutors,assigned_tutors:null===se||void 0===se?void 0:se.assigned_tutors,tutor_interested:null===se||void 0===se?void 0:se.tutor_interested,sessionId:null===se||void 0===se?void 0:se.session_id,setAssignedTutor:ue,tutorPayout:ve,subject:null===se||void 0===se?void 0:se.subject,deadline:null===se||void 0===se?void 0:se.deadline,duration:null===se||void 0===se?void 0:se.duration,updated:xe,setUpdated:be,sessionType:se.type}):"---"]})]})]}),Object(X.jsx)(G.a,{children:Object(X.jsx)(Y.a,{onClick:Va,children:"Close"})})]})]})]})]}),Object(X.jsx)(wn.a,{position:"top-right",autoClose:1e4,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})},Wn=n(197),En=n.n(Wn),Bn=n(198),Ln=n.n(Bn),Fn=n(512),Mn=n(532),Un=n(488),Kn=n(501),Hn=n(486),Yn=n(487),Vn=n(491),qn=n(536),Gn=o.a.forwardRef((function(e,t){return Object(X.jsx)(pt.a,Object(v.a)({elevation:6,ref:t,variant:"filled"},e))})),Jn=function(e){var t=e.tutorList,n=e.setTutorList,i=e.searchTutor,s=e.tutorCount,c=e.interestedTutors,r=e.clientPayment,p=e.tutorPayout,x=e.handleSearchTutors,b=Object(a.useState)(1),g=Object(l.a)(b,2),f=g[0],h=g[1],O=Object(a.useState)("1"),y=Object(l.a)(O,2),S=y[0],_=y[1],w=Object(a.useState)([]),k=Object(l.a)(w,2),C=k[0],I=k[1],T=Object(a.useState)([]),z=Object(l.a)(T,2),A=(z[0],z[1],Object(a.useState)([])),N=Object(l.a)(A,2),D=(N[0],N[1],Object(a.useState)([])),P=Object(l.a)(D,2),R=(P[0],P[1],Object(a.useState)(0)),W=Object(l.a)(R,2),E=W[0],B=W[1],M=Object(a.useState)(1),U=Object(l.a)(M,2),H=U[0],Y=U[1],V=Object(a.useState)(!1),q=Object(l.a)(V,2),G=q[0],J=(q[1],Object(a.useState)("paper")),Q=Object(l.a)(J,2),Z=(Q[0],Q[1],Object(a.useRef)(null)),$=Object(a.useState)(1),ee=Object(l.a)($,2),te=(ee[0],ee[1],Object(a.useState)(!0)),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ie=Object(a.useState)("today"),se=Object(l.a)(ie,2),le=se[0],ce=se[1],re=Object(a.useState)(),de=Object(l.a)(re,2),ue=de[0],pe=de[1],je=Object(a.useState)(),ve=Object(l.a)(je,2),xe=ve[0],be=ve[1],ge=Object(a.useState)(!1),fe=Object(l.a)(ge,2),me=fe[0],he=fe[1],Oe=Object(a.useState)(!1),ye=Object(l.a)(Oe,2),Se=ye[0],_e=ye[1],we=Object(a.useState)(!1),ke=Object(l.a)(we,2),Ce=ke[0],Te=ke[1],ze=new Date;(new Date).setDate(ze.getDate()+1);var Ne=Object(a.useState)(!1),De=Object(l.a)(Ne,2),Pe=De[0],Re=(De[1],Object(a.useState)([null,null])),We=Object(l.a)(Re,2),Ee=We[0],Be=We[1],Le=Object(a.useState)(null),Fe=Object(l.a)(Le,2),Me=Fe[0],Ue=Fe[1],Ke=Object(a.useState)(null),He=Object(l.a)(Ke,2),Ye=He[0],Ve=He[1],qe=Object(a.useState)(null),Ge=Object(l.a)(qe,2),Je=Ge[0],Qe=Ge[1],Xe=Object(a.useState)(!1),Ze=Object(l.a)(Xe,2),et=Ze[0],tt=Ze[1],nt="bottom",at="right",ot=Object(a.useState)(!1),it=Object(l.a)(ot,2),st=it[0],lt=it[1];console.log(Ee),console.log(xe);Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a,o,i,s,l,c,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue){e.next=17;break}return e.prev=1,e.next=4,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getSessions/").concat(le,"/").concat(ue),{params:{page:f,limit:10}},{headers:""});case 4:n=e.sent,oe(!1),I(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.result),B(n.data.length),Y(f),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),oe(!1),console.log(e.t0.Error);case 15:e.next=66;break;case 17:if(!(et&&Me||Ye||Je||Ee[0]||Ee[1])){e.next=35;break}return e.prev=18,o={work_status:Me,payment_status:Ye,tutor_payment_status:Je,from:Ee[0],to:Ee[1]},e.next=22,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/filter/filterSessions"),o,{params:{page:f,limit:10}},{headers:""});case 22:i=e.sent,oe(!1),I(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.result),B(i.data.length),Y(f),e.next=33;break;case 29:e.prev=29,e.t1=e.catch(18),oe(!1),console.log(e.t1.Error);case 33:e.next=66;break;case 35:if(!Pe){e.next=52;break}return e.prev=36,e.next=39,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/filterSessionsByDate/").concat(Ee[0],"/").concat(Ee[1]),{params:{page:f,limit:10}},{headers:""});case 39:l=e.sent,oe(!1),I(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.result),B(l.data.length),Y(f),e.next=50;break;case 46:e.prev=46,e.t2=e.catch(36),oe(!1),console.log(e.t2.Error);case 50:e.next=66;break;case 52:return e.prev=52,e.next=55,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getSessions/").concat(le),{params:{page:f,limit:10}},{headers:""});case 55:r=e.sent,oe(!1),I(null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.result),B(r.data.length),Y(f),e.next=66;break;case 62:e.prev=62,e.t3=e.catch(52),oe(!1),console.log(e.t3.Error);case 66:case"end":return e.stop()}}),e,null,[[1,11],[18,29],[36,46],[52,62]])})));return function(){return e.apply(this,arguments)}}();e()}),[le,xe,me,Se,st]);var ct=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i,s,l,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue){e.next=18;break}return oe(!0),Y(n),e.prev=3,e.next=6,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getSessions/").concat(le,"/").concat(ue),{params:{page:n,limit:10}},{headers:""});case 6:a=e.sent,console.log(a.data),I(a.data.result),oe(!1),h(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:e.next=70;break;case 18:if(!et){e.next=37;break}return oe(!0),Y(n),e.prev=21,o={work_status:Me,payment_status:Ye,tutor_payment_status:Je,from:Ee[0],to:Ee[1]},e.next=25,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/filter/filterSessions"),o,{params:{page:n,limit:10}},{headers:""});case 25:i=e.sent,console.log(i.data),I(i.data.result),oe(!1),h(n),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),console.log(e.t1);case 35:e.next=70;break;case 37:if(!Pe){e.next=55;break}return oe(!0),Y(n),e.prev=40,e.next=43,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/filterSessionsByDate/").concat(Ee[0],"/").concat(Ee[1]),{params:{page:n,limit:10}},{headers:""});case 43:s=e.sent,console.log(s.data),I(s.data.result),oe(!1),h(n),e.next=53;break;case 50:e.prev=50,e.t2=e.catch(40),console.log(e.t2);case 53:e.next=70;break;case 55:return oe(!0),Y(n),e.prev=57,e.next=60,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getSessions/").concat(le),{params:{page:n,limit:10}},{headers:""});case 60:c=e.sent,console.log(c.data),I(null===c||void 0===c||null===(l=c.data)||void 0===l?void 0:l.result),oe(!1),h(n),e.next=70;break;case 67:e.prev=67,e.t3=e.catch(57),console.log(e.t3);case 70:case"end":return e.stop()}}),e,null,[[3,13],[21,32],[40,50],[57,67]])})));return function(t,n){return e.apply(this,arguments)}}(),rt=Object(a.useState)(null),dt=Object(l.a)(rt,2),pt=dt[0],jt=dt[1],vt=Boolean(pt),xt=function(){jt(null)},bt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe(t.target.value),"Enter"!=t.key){e.next=18;break}return oe(!0),e.prev=3,e.next=6,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getSessions/").concat(le,"/").concat(t.target.value),{params:{page:1,limit:10}},{headers:""});case 6:n=e.sent,console.log(n.data),oe(!1),I(n.data.result),B(n.data.length),Y(1),h(1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(G){var e=Z.current;null!==e&&e.focus()}}),[G]),Object(a.useEffect)((function(){c&&c.length>0&&Te(!1)}),[c]);var gt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={work_status:Me,payment_status:Ye,tutor_payment_status:Je,from:Ee[0],to:Ee[1]},e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/filter/filterSessions"),t,{params:{page:1,limit:10}},{headers:""});case 4:n=e.sent,console.log(n.data),I(n.data.result),B(n.data.length),Y(1),yt("right",!1),tt(!0),h(1),Ot(Object(v.a)(Object(v.a)({},ht),{},{right:!1})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),ft=Object(a.useState)({top:!1,left:!1,bottom:!1,right:!1}),mt=Object(l.a)(ft,2),ht=mt[0],Ot=mt[1],yt=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&Ot(Object(v.a)(Object(v.a)({},ht),{},Object(d.a)({},e,t)))}},St=Object(a.useState)([20,37]),_t=Object(l.a)(St,2),wt=(_t[0],_t[1],function(e){Ue(e.target.value)}),kt=function(e){Ve(e.target.value)},At=function(e){Qe(e.target.value)};console.log(Me);var Dt=function(e){return Object(X.jsxs)($e.a,{sx:{width:"top"===e||"bottom"===e?"auto":360},role:"presentation",onKeyDown:yt(e,!1),children:[Object(X.jsx)("div",{style:{padding:"18px",backgroundColor:"#04787C",color:"#ffff",fontSize:"18px",fontWeight:"600"},children:"Filters"}),Object(X.jsxs)(Mn.a,{children:[Object(X.jsx)(Kn.a,{button:!0,children:Object(X.jsx)(Hn.a,{primary:"Duration:"})},"Duration:"),Object(X.jsx)("div",{style:{display:"flex",alignItems:"center",padding:"0px 10px 0px 12px"},children:Object(X.jsx)(qn.a,{dateAdapter:Vn.a,children:Object(X.jsx)(Yn.a,{label:"Advanced keyboard",value:Ee,onChange:function(e){return Be(e)},renderInput:function(e,t){return Object(X.jsxs)(o.a.Fragment,{children:[Object(X.jsx)($e.a,{sx:{mx:1,fontSize:"14px"},children:" From "}),Object(X.jsx)("input",Object(v.a)(Object(v.a)({ref:e.inputRef},e.inputProps),{},{className:"dateRange"})),Object(X.jsx)($e.a,{sx:{mx:1,fontSize:"14px"},children:" to "}),Object(X.jsx)("input",Object(v.a)(Object(v.a)({ref:t.inputRef},t.inputProps),{},{className:"dateRange"}))]})}})})})]}),Object(X.jsxs)(Mn.a,{children:[Object(X.jsx)(Kn.a,{button:!0,children:Object(X.jsx)(Hn.a,{primary:"Session Status:"})},"Session Status:"),Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",marginLeft:"18px"},children:Object(X.jsxs)(Yt.a,{row:!0,"aria-label":"gender",name:"row-radio-buttons-group",value:Me,onChange:wt,children:[Object(X.jsx)(Et.a,{value:"New Task",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"New Task"}),Object(X.jsx)(Et.a,{value:"Not Confirmed",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Not Confirmed"}),Object(X.jsx)(Et.a,{value:"Tutors Notified",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Tutors Notified"}),Object(X.jsx)(Et.a,{value:"Tutors Assigned",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Tutors Assigned"}),Object(X.jsx)(Et.a,{value:"Pending",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Pending"}),Object(X.jsx)(Et.a,{value:"In Progress",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"In Progress"}),Object(X.jsx)(Et.a,{value:"Client Cancelled",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Client Cancelled"}),Object(X.jsx)(Et.a,{value:"Agent Cancelled",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Agent Cancelled"}),Object(X.jsx)(Et.a,{value:"Completed",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Completed"})]})})]}),Object(X.jsx)(Un.a,{}),Object(X.jsxs)(Mn.a,{children:[Object(X.jsx)(Kn.a,{button:!0,children:Object(X.jsx)(Hn.a,{primary:"Client Payment Status:"})},"Client Payment Status:"),Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",marginLeft:"18px"},children:Object(X.jsxs)(Yt.a,{row:!0,"aria-label":"gender",name:"row-radio-buttons-group",value:Ye,onChange:kt,children:[Object(X.jsx)(Et.a,{value:"not_paid",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Not Paid"}),Object(X.jsx)(Et.a,{value:"partially_paid",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Partially Paid"}),Object(X.jsx)(Et.a,{value:"paid",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Fully Paid"})]})})]}),Object(X.jsx)(Un.a,{}),Object(X.jsxs)(Mn.a,{children:[Object(X.jsx)(Kn.a,{button:!0,children:Object(X.jsx)(Hn.a,{primary:"Tutor Payment Status:"})},"Tutor Payment Status:"),Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",marginLeft:"18px"},children:Object(X.jsxs)(Yt.a,{row:!0,"aria-label":"gender",name:"row-radio-buttons-group",value:Je,onChange:At,children:[Object(X.jsx)(Et.a,{value:"not_paid",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Payment pending"}),Object(X.jsx)(Et.a,{value:"paid",control:Object(X.jsx)(Ht.a,{size:"small",style:{paddingRight:"5px"}}),label:"Payment released to all assigned tutors"})]})})]}),Object(X.jsx)("footer",{style:{padding:"18px",backgroundColor:"#FF9E00",color:"#ffff",fontSize:"18px",fontWeight:"600",textAlign:"center",cursor:"pointer",position:"relative",top:"calc(100vh - 635px"},onClick:gt,children:"Apply Filter"})]})},Pt=function(e,t){"clickaway"!==t&&lt(!1)};return Object(X.jsx)("div",{children:Object(X.jsxs)(It.a,{value:S,children:[Object(X.jsx)($e.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(X.jsxs)(Tt.a,{onChange:function(e,t){_(t),console.log(t),ce("1"===t?"today":"2"===t?"upcoming":"past"),h(1),Be([null,null]),oe(!0)},"aria-label":"lab API tabs example",centered:!0,children:[Object(X.jsx)(Ct.a,{label:"Next 24 Hrs",value:"1"}),Object(X.jsx)(Ct.a,{label:"Upcoming",value:"2"}),Object(X.jsx)(Ct.a,{label:"Past",value:"3"}),Object(X.jsxs)("div",{style:{placeSelf:"center"},children:[Object(X.jsx)(tn.a,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":vt?"true":void 0,"aria-haspopup":"true",onClick:function(e){jt(e.currentTarget),Te(!0)},children:c&&!Ce?Object(X.jsx)(K.a,{color:"success",badgeContent:"",variant:"dot",children:Object(X.jsx)(Nt.a,{fontSize:"small",style:{placeSelf:"center",color:"gray"}})}):Object(X.jsx)(Nt.a,{fontSize:"small",style:{placeSelf:"center",color:"gray"}})}),Object(X.jsx)(L.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:pt,open:vt,onClose:xt,PaperProps:{style:{maxHeight:216,width:"35ch"}},children:c?null===c||void 0===c?void 0:c.map((function(e,t,n){return Object(X.jsxs)(F.a,{onClick:xt,style:{fontSize:"14px"},children:["New tutor in session-",Object(X.jsx)("span",{style:{marginLeft:"4px",fontWeight:"700"},children:null===e||void 0===e?void 0:e.session_id})]},e.session_id)})):Object(X.jsx)(F.a,{style:{fontSize:"14px"},children:"No new notifications"},"no")})]})]})}),Object(X.jsxs)(zt.a,{value:"1",style:{padding:"16px 10px"},children:[Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"0px 10px"},children:[Object(X.jsx)("input",{placeholder:"Search for sessions",className:"sessionSearch",onKeyPress:bt}),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(En.a,{style:{alignSelf:"center",cursor:"pointer"},fontSize:"medium",color:"primary",onClick:yt("right",!0)}),Object(X.jsx)(Fn.a,{anchor:"right",open:ht.right,onClose:yt("right",!1),children:Dt("right")})]}),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Ln.a,{style:{alignSelf:"center",cursor:"pointer"},fontSize:"medium",color:"primary",onClick:function(){Be([null,null]),Ue(null),Ve(null),Qe(null),lt(!0),tt(!1)}}),Object(X.jsx)(ut.a,{open:st,autoHideDuration:2e3,onClose:Pt,anchorOrigin:{vertical:nt,horizontal:at},children:Object(X.jsx)(Gn,{onClose:Pt,severity:"info",sx:{width:"100%"},children:"Cleared all filters!"})},nt+at)]})]}),ae?Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsxs)("div",{className:"sessionMenuWrapper",children:[null===C||void 0===C?void 0:C.map((function(e){return Object(X.jsx)("div",{children:Object(X.jsx)(Rn,{conversation:e,tutorList:t,setTutorList:n,searchTutor:i,tutorCount:s,setAssignedTutor:be,interestedTutors:c,clientPayment:r,tutorPayout:p,updated:me,setUpdated:he,setReload:_e,reload:Se,handleSearchTutors:x})})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",marginTop:"15px"},count:Math.ceil(E/10),page:H,onChange:ct})]})]}),Object(X.jsxs)(zt.a,{value:"2",style:{padding:"16px 10px"},children:[Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"0px 10px"},children:[Object(X.jsx)("input",{placeholder:"Search for sessions",className:"sessionSearch",onKeyPress:bt}),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(En.a,{style:{alignSelf:"center",cursor:"pointer"},fontSize:"medium",color:"primary",onClick:yt("right",!0)}),Object(X.jsx)(Fn.a,{anchor:"right",open:ht.right,onClose:yt("right",!1),children:Dt("right")})]}),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Ln.a,{style:{alignSelf:"center",cursor:"pointer"},fontSize:"medium",color:"primary",onClick:function(){Be([null,null]),Ue(null),Ve(null),Qe(null),lt(!0)}}),Object(X.jsx)(ut.a,{open:st,autoHideDuration:2e3,onClose:Pt,anchorOrigin:{vertical:nt,horizontal:at},children:Object(X.jsx)(Gn,{onClose:Pt,severity:"info",sx:{width:"100%"},children:"Cleared all filters!"})},nt+at)]})]}),ae?Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsxs)("div",{className:"sessionMenuWrapper",children:[null===C||void 0===C?void 0:C.map((function(e){return Object(X.jsx)("div",{children:Object(X.jsx)(Rn,{conversation:e,tutorList:t,setTutorList:n,searchTutor:i,tutorCount:s,setAssignedTutor:be,interestedTutors:c,clientPayment:r,tutorPayout:p,updated:me,setUpdated:he,setReload:_e,reload:Se,handleSearchTutors:x})})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",marginTop:"15px"},count:Math.ceil(E/10),page:H,onChange:ct})]})]}),Object(X.jsxs)(zt.a,{value:"3",style:{padding:"16px 10px"},children:[Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"0px 10px"},children:[Object(X.jsx)("input",{placeholder:"Search for sessions",className:"sessionSearch",onKeyPress:bt}),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(En.a,{style:{alignSelf:"center",cursor:"pointer"},fontSize:"medium",color:"primary",onClick:yt("right",!0)}),Object(X.jsx)(Fn.a,{anchor:"right",open:ht.right,onClose:yt("right",!1),children:Dt("right")})]}),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Ln.a,{style:{alignSelf:"center",cursor:"pointer"},fontSize:"medium",color:"primary",onClick:function(){Be([null,null]),Ue(null),Ve(null),Qe(null),lt(!0)}}),Object(X.jsx)(ut.a,{open:st,autoHideDuration:2e3,onClose:Pt,anchorOrigin:{vertical:nt,horizontal:at},children:Object(X.jsx)(Gn,{onClose:Pt,severity:"info",sx:{width:"100%"},children:"Cleared all filters!"})},nt+at)]})]}),ae?Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsxs)("div",{className:"sessionMenuWrapper",children:[null===C||void 0===C?void 0:C.map((function(e){return Object(X.jsx)("div",{children:Object(X.jsx)(Rn,{conversation:e,tutorList:t,setTutorList:n,searchTutor:i,tutorCount:s,setAssignedTutor:be,interestedTutors:c,clientPayment:r,tutorPayout:p,updated:me,setUpdated:he,setReload:_e,reload:Se,handleSearchTutors:x})})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",marginTop:"15px"},count:Math.ceil(E/10),page:H,onChange:ct})]})]})]})})},Qn=(n(373),n(490)),Xn=[{field:"id",headerName:"SL No.",width:70},{field:"txnId",headerName:"ID",width:180},{field:"tutorId",headerName:"Tutor ID",width:180},{field:"amount",headerName:"Amount",width:130},{field:"status",headerName:"Status",width:120}],Zn=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(),s=Object(l.a)(i,2),c=(s[0],s[1]),r={username:"rzp_live_Jk4vwq7tyL9Aeg",password:"qUjOJWotN6x47WSDExJ4NURs"};Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(localStorage.getItem("api"),"/api/payments/payouts?account_number=3434949239801329"),{headers:Object(v.a)({},r)});case 2:a=e.sent,o(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.items),c(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.count);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var d=null===n||void 0===n?void 0:n.map((function(e,t){return{id:t+1,txnId:e.id,tutorId:e.reference_id,amount:e.amount/100+" INR",status:e.status}}));return Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{style:{fontFamily:"sans-serif",fontSize:"17px",fontWeight:"500",padding:"18px 15px"},children:["Payment History",Object(X.jsx)("hr",{style:{width:"12%",marginLeft:"1px",marginTop:"2px",marginBottom:"2px",background:"coral",borderColor:"coral",borderRadius:"5px"}})]}),Object(X.jsx)("div",{style:{height:"85vh",width:"100%"},children:Object(X.jsx)(Qn.a,{rows:d,columns:Xn,pageSize:20,rowsPerPageOptions:[20],style:{borderRadius:"0px",border:"0px",borderTop:"1px solid rgba(224, 224, 224, 1)"}})})]})},$n=function(e){var t=e.newSessions,n=e.interestedTutors,o=e.clientPayment,i=e.tutorPayout,s=Object(a.useState)([]),c=Object(l.a)(s,2),r=c[0],d=c[1],p=Object(a.useState)(),v=Object(l.a)(p,2),x=v[0],b=v[1],g=Object(a.useState)(),f=Object(l.a)(g,2),h=f[0],O=f[1],y=Object(a.useState)(),S=Object(l.a)(y,2),_=S[0],w=S[1],k=Object(a.useState)(0),C=Object(l.a)(k,2),I=C[0],T=C[1],z=Object(a.useState)(1),A=Object(l.a)(z,2),N=A[0],D=A[1],P=Object(a.useState)(!0),R=Object(l.a)(P,2),W=R[0],E=R[1],B=Object(a.useState)(!0),M=Object(l.a)(B,2),U=M[0],H=M[1],Y=Object(a.useState)(!1),V=Object(l.a)(Y,2),q=V[0],G=V[1],J=Object(a.useState)(!1),Q=Object(l.a)(J,2),Z=Q[0],$=Q[1],ee=Object(a.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(1),ie=Object(l.a)(oe,2),se=ie[0],le=ie[1],ce=Object(a.useState)(!1),re=Object(l.a)(ce,2),de=re[0],ue=re[1],pe=Object(a.useState)(null),je=Object(l.a)(pe,2),ve=je[0],xe=je[1],be=Boolean(ve),ge=function(){xe(null)};Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=17;break}return e.prev=1,e.next=4,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors/").concat(_),{params:{page:se,limit:20}},{headers:""});case 4:t=e.sent,d(t.data.result),E(!1),T(t.data.length),D(se),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),E(!1),console.log(e.t0.Error);case 15:e.next=30;break;case 17:return e.prev=17,e.next=20,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors"),{params:{page:1,limit:20}},{headers:""});case 20:a=e.sent,d(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.result),T(a.data.length),E(!1),e.next=30;break;case 26:e.prev=26,e.t1=e.catch(17),console.log(e.t1.Error),E(!1);case 30:case"end":return e.stop()}}),e,null,[[1,11],[17,26]])})));return function(){return e.apply(this,arguments)}}();e()}),[x,h,de]),Object(a.useEffect)((function(){t&&t.length>0&&ae(!1)}),[t]);var fe=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=18;break}return E(!0),D(n),e.prev=3,e.next=6,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors/").concat(_),{params:{page:n,limit:20}},{headers:""});case 6:a=e.sent,console.log(a.data),d(a.data.result),E(!1),le(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:e.next=32;break;case 18:return E(!0),D(n),e.prev=20,e.next=23,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors"),{params:{page:n,limit:20}},{headers:""});case 23:o=e.sent,console.log(o.data),d(o.data.result),E(!1),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(20),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[3,13],[20,29]])})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(t.target.value),"Enter"!=t.key){e.next=17;break}return E(!0),e.prev=3,e.next=6,m.a.get("".concat(localStorage.getItem("api"),"/api/tutor/getTutors/").concat(t.target.value),{params:{page:1,limit:20}},{headers:""});case 6:n=e.sent,console.log(n.data),E(!1),d(n.data.result),T(n.data.length),D(1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"chatMenu2",children:[Object(X.jsxs)("header",{className:"chat_header2",children:[Object(X.jsx)("div",{style:{flex:"1",fontSize:"".concat(U?"17px":"16px"),fontWeight:"600",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"".concat(U?"#5e8de7":"#EDEDED"),color:"".concat(U?"#fff":"black"),borderRight:"1px solid lightgray",cursor:"pointer"},onClick:function(){H(!0),G(!1),$(!1)},children:"Tutors List"}),Object(X.jsx)("div",{style:{flex:"1",fontSize:"".concat(q?"17px":"16px"),fontWeight:"600",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"".concat(q?"#5e8de7":"#EDEDED"),color:"".concat(q?"#fff":"black"),borderRight:"1px solid lightgray",cursor:"pointer"},onClick:function(){H(!1),G(!0),$(!1)},children:"Sessions"}),Object(X.jsx)("div",{style:{flex:"1",fontSize:"".concat(Z?"17px":"16px"),fontWeight:"600",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"".concat(Z?"#5e8de7":"#EDEDED"),color:"".concat(Z?"#fff":"black"),cursor:"pointer"},onClick:function(){H(!1),G(!1),$(!0)},children:"Payments"}),Object(X.jsx)("div",{children:Object(X.jsxs)("div",{style:{placeSelf:"center"},children:[Object(X.jsx)(tn.a,{"aria-label":"more",style:{marginLeft:"-16px",marginRight:"6px"},id:"long-button","aria-controls":"long-menu","aria-expanded":be?"true":void 0,"aria-haspopup":"true",onClick:function(e){xe(e.currentTarget),ae(!0)},children:t&&!ne?Object(X.jsx)(K.a,{color:"success",badgeContent:"",variant:"dot",children:Object(X.jsx)(Nt.a,{fontSize:"small",style:{placeSelf:"center",color:"gray"}})}):Object(X.jsx)(Nt.a,{fontSize:"small",style:{placeSelf:"center",color:"gray"}})}),Object(X.jsx)(L.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:ve,open:be,onClose:ge,PaperProps:{style:{maxHeight:216,width:"35ch"}},children:t?null===t||void 0===t?void 0:t.map((function(e,t,n){return Object(X.jsxs)(F.a,{onClick:ge,style:{fontSize:"14px"},children:["New",Object(X.jsx)("span",{style:{marginLeft:"4px",marginRight:"4px",fontWeight:"700"},children:null===e||void 0===e?void 0:e.type}),"available",Object(X.jsxs)("span",{style:{marginLeft:"4px",fontWeight:"700"},children:["ID: ",null===e||void 0===e?void 0:e.session_id]})]},e.session_id)})):Object(X.jsx)(F.a,{children:"No new notifications"},"no")})]})})]}),U?Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{style:{height:"2.3rem",padding:"6px 0px 6px 17px",backgroundColor:"#9DE1FE"},children:Object(X.jsx)("input",{placeholder:"Search for tutors",className:"chatMenuInput",onKeyPress:me})}),W?Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsxs)("div",{className:"chatMenuWrapper",children:[null===r||void 0===r?void 0:r.map((function(e){return Object(X.jsx)("div",{children:Object(X.jsx)(_t,{conversation:e,setTutorTagUpdated:b,setTutorRatingUpdated:O,updated:de,setUpdated:ue,searchTutor:_})})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",marginTop:"15px"},count:Math.ceil(I/20),page:N,onChange:fe})]})]}):q?Object(X.jsx)("div",{children:Object(X.jsx)(Jn,{tutorList:r,setTutorList:d,searchTutor:_,handleSearchTutors:me,tutorCount:I,interestedTutors:n,clientPayment:o,tutorPayout:i})}):Z?Object(X.jsx)("div",{children:Object(X.jsx)(Zn,{})}):Object(X.jsx)("div",{})]})},ea=n(223),ta=n.n(ea),na=n(510),aa=function(e){var t,n=e.clientId,o=e.clientWaId,i=e.clientName,s=e.agent,c=Object(a.useState)(!1),r=Object(l.a)(c,2),d=r[0],p=r[1],v=Object(a.useState)([]),x=Object(l.a)(v,2),b=x[0],g=x[1],f=Object(a.useState)(),h=Object(l.a)(f,2),O=h[0],y=h[1],S=Object(a.useState)(!1),_=Object(l.a)(S,2),w=_[0],k=_[1],C=Object(a.useState)(!1),I=Object(l.a)(C,2),T=I[0],z=I[1],A=Object(a.useState)(),N=Object(l.a)(A,2),P=(N[0],N[1],Object(a.useState)("USD")),R=Object(l.a)(P,2),W=(R[0],R[1],Object(a.useState)({numberformat:"1320"})),E=Object(l.a)(W,2),B=(E[0],E[1],Object(a.useState)()),L=Object(l.a)(B,2),F=L[0],M=L[1],U=Object(a.useState)("Please enter your name here!"),K=Object(l.a)(U,2),H=K[0],Z=K[1],$=localStorage.getItem("device"),ee="https://client-response.tutorpoint.in/d".concat($,"/live-session-form"),te=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/sessions/getSessionDetails/").concat(n),{headers:""});case 3:a=e.sent,g(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,a,l,c,r,d,p,j,v,x,g,f,h;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),z(!0),a={session_id:b.length>0?+(null===(t=b[b.length-1])||void 0===t?void 0:t.session_id)+1+"":n+"1010",client_id:n,client_waId:o,client_name:i,session_agent:s,opExecutive:F},e.prev=3,e.next=6,m.a.post(D,a,{headers:""});case 6:return x=e.sent,g={sessionId:null===x||void 0===x||null===(l=x.data)||void 0===l?void 0:l.result.session_id,clientId:null===x||void 0===x||null===(c=x.data)||void 0===c?void 0:c.result.client_id},e.next=10,m.a.post("".concat(localStorage.getItem("api"),"/api/sessions/folderBuilder"),g);case 10:return e.sent,f="".concat(ee,"/").concat(null===x||void 0===x||null===(r=x.data)||void 0===r?void 0:r.result.session_id,"/").concat(null===x||void 0===x||null===(d=x.data)||void 0===d?void 0:d.result.client_id,"?agent=success&key=poc_y6d_ui9"),h={name:i,from:"",wa_id:o,templateName:"clientsessionform_create_send_".concat(ht),templateText:"Hi *{{1}}*, This is Tutorpoint\n\nPlease click on the button below to submit your assignment work or book a live question session with us. \n\nAfter submitting the request, wait for sometime to get the confirmation about the price and deadline from us. We will start only after you have confirmed the price and deadline of session with our agent.\n\nPlease fill the form carefully. For any issues, you can call us by clicking the button below.\n\n",template:{namespace:mt,language:"en"},param1:"Session Request "+(null===x||void 0===x||null===(p=x.data)||void 0===p?void 0:p.result.session_id),param2:i,param3:"d".concat($,"/live-session-form/").concat(null===x||void 0===x||null===(j=x.data)||void 0===j?void 0:j.result.session_id,"/").concat(null===x||void 0===x||null===(v=x.data)||void 0===v?void 0:v.result.client_id),button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.next=15,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/clientTemplate"),h,{headers:""});case 15:e.sent,y(f),k(!0),z(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(3),k(!1),z(!1),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{children:[Object(X.jsx)(ta.a,{fontSize:"medium",className:"templateMsg",onClick:function(){te(),p(!0)}}),Object(X.jsxs)(q.a,{open:d,children:[Object(X.jsx)(Q.a,{children:"Create Form Link"}),Object(X.jsxs)(J.a,{style:{marginBottom:"20px",marginTop:"20px"},children:[Object(X.jsx)("label",{style:{fontSize:"13px"},children:"Session ID"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"text",value:b.length>0?+(null===(t=b[b.length-1])||void 0===t?void 0:t.session_id)+1+"":n+"1010",fullWidth:!0,variant:"standard",style:{marginBottom:"30px"}}),Object(X.jsx)("label",{style:{fontSize:"13px"},children:"Client ID"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"text",value:n,style:{marginBottom:"27px"},fullWidth:!0,variant:"standard"}),Object(X.jsx)("label",{style:{fontSize:"13px"},children:"Agent/Executive Name"}),Object(X.jsx)(V.a,{margin:"dense",id:"name",type:"text",onChange:function(e){e.target.value?(M(e.target.value),Z(null)):Z("Please enter your name here!")},fullWidth:!0,required:!0,variant:"standard"}),H&&Object(X.jsx)("p",{style:{fontSize:"11px",color:"red",margin:"0px 0px 5px 0px"},children:H}),O?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("p",{style:{fontSize:"13px",marginBottom:"8px",marginTop:"25px"},children:"Form Link"}),Object(X.jsx)(na.a,{underline:"always",style:{cursor:"pointer"},onClick:function(){return window.open(O,"_blank")},children:null===O||void 0===O?void 0:O.slice(0,41).concat(" ...")})]}):null]}),Object(X.jsxs)(G.a,{children:[T?Object(X.jsx)(Y.a,{disabled:!0,children:"Creating..."}):Object(X.jsx)(Y.a,{onClick:function(){p(!1),y(""),k(!1)},children:"Close"}),!w&&!H&&Object(X.jsx)(Y.a,{onClick:ne,children:"Create"})]})]})]})},oa=n(282),ia=n.n(oa),sa=(n(374),n(274)),la=n.n(sa),ca=n(150),ra=n.n(ca);function da(e){var t=e.data,n=e.setCurrentChat,o=e.setFinalMessage,i=e.scrollRef,s=e.setScrollView_,c=e.handleCloseModal,r=e.setAllNotes,d=e.setPage,v=Object(a.useState)(null),x=Object(l.a)(v,2),b=x[0],g=x[1],f=Boolean(b),h=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,a){var o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(t.currentTarget),e.prev=1,e.next=4,m.a.get("".concat(localStorage.getItem("api"),"/api/conversations/findContact/").concat(a));case 4:i=e.sent,n(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.result[0]),s(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/messages/filteredMsg/").concat(t,"/").concat(n));case 3:a=e.sent,o(Object(p.a)(null===a||void 0===a?void 0:a.data)),d(Math.floor((null===a||void 0===a?void 0:a.data.length)/20)+1),c(),r([]),s(!1),window.scrollTo(0,i.current.offsetTop),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{children:[Object(X.jsx)(tn.a,{"aria-label":"more",id:"long-button","aria-controls":f?"long-menu":void 0,"aria-expanded":f?"true":void 0,"aria-haspopup":"true",onClick:function(e){return h(e,null===t||void 0===t?void 0:t.wa_id)},children:Object(X.jsx)(ra.a,{})}),Object(X.jsx)(L.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:b,open:f,onClose:function(){g(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:Object(X.jsx)(F.a,{onClick:function(){return O(null===t||void 0===t?void 0:t.wa_id,null===t||void 0===t?void 0:t.createdAt)},children:"Show in chat"},"i")})]})}var ua=n(275),pa=n.n(ua),ja=function(e){var t=e.setCurrentChat,n=e.setFinalMessage,i=e.scrollRef,s=e.setScrollView_,c=e.setPage,r=Object(a.useState)(!1),d=Object(l.a)(r,2),p=d[0],v=d[1],x=o.a.useState(null),b=Object(l.a)(x,2),g=b[0],f=(b[1],Boolean(g),Object(a.useState)([])),h=Object(l.a)(f,2),O=h[0],y=h[1],S=Object(a.useState)(!0),_=Object(l.a)(S,2),w=_[0],k=_[1],C=Object(a.useRef)(null),I=Object(a.useState)(1),T=Object(l.a)(I,2),z=T[0],A=T[1],N=Object(a.useState)(0),D=Object(l.a)(N,2),P=D[0],R=D[1],E=Object(a.useState)(1),B=Object(l.a)(E,2),L=B[0],F=B[1],M=Object(a.useState)(!1),U=Object(l.a)(M,2),K=(U[0],U[1],Object(a.useState)(!1)),V=Object(l.a)(K,2),Z=(V[0],V[1],Object(a.useState)()),$=Object(l.a)(Z,2),ee=($[0],$[1],Object(a.useState)("USD")),te=Object(l.a)(ee,2),ne=(te[0],te[1],Object(a.useState)("paper")),ae=Object(l.a)(ne,2),oe=ae[0],ie=(ae[1],Object(a.useState)("Please enter your name here!")),se=Object(l.a)(ie,2),le=(se[0],se[1],localStorage.getItem("device"),function(){v(!1),y([])});Object(a.useEffect)((function(){if(p){var e=C.current;null!==e&&e.focus()}}),[p]);var ce=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/messages/getAllNotes"),{params:{page:z,limit:10}},{headers:""});case 3:a=e.sent,y(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.result),k(!1),R(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.length),F(z),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),k(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),F(n),e.prev=2,e.next=5,m.a.get("".concat(localStorage.getItem("api"),"/api/messages/getAllNotes"),{params:{page:n,limit:10}},{headers:""});case 5:o=e.sent,y(null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.result),k(!1),A(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={_id:t},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/markNotesAsResolved"),n,{headers:""});case 4:e.sent,ce(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{children:[Object(X.jsx)(la.a,{fontSize:"medium",color:"primary",style:{cursor:"pointer",display:"flex"},onClick:function(){ce(),v(!0),k(!0)}}),Object(X.jsxs)(q.a,{open:p,onClose:le,scroll:oe,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(X.jsx)(Q.a,{style:{fontSize:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 10px 10px 24px"},id:"scroll-dialog-title",children:"All Notes:"}),Object(X.jsx)(J.a,{dividers:"paper"===oe,style:{padding:"16px 0px"},children:w?Object(X.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"255px 210px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsx)(st.a,{id:"scroll-dialog-description",ref:C,tabIndex:-1,children:Object(X.jsxs)(X.Fragment,{children:[O&&O.map((function(e,a){var o,l,r,d,u,p,j,v;return Object(X.jsxs)("div",{className:"tutorlist_",children:[Object(X.jsxs)("div",{className:"userTab",children:[Object(X.jsx)(H.a,{className:"conversationImg_",children:null===e||void 0===e||null===(o=e.name)||void 0===o?void 0:o.slice(0,1)}),Object(X.jsx)("div",{style:{paddingBottom:"5px"},children:Object(X.jsxs)("div",{className:"conversationName_",children:[null===e||void 0===e?void 0:e.name,Object(X.jsx)("div",{style:{fontSize:"10px"},children:W()(new Date(1e3*(null===e||void 0===e?void 0:e.timestamp))).format("lll")})]})}),Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",flex:"0%",justifyContent:"flex-end",alignSelf:"center",marginRight:"10px"},children:null!==e&&void 0!==e&&null!==(l=e.clientNotes)&&void 0!==l&&l.status&&"resolved"===(null===e||void 0===e||null===(r=e.clientNotes)||void 0===r?void 0:r.status)?Object(X.jsx)("span",{style:{color:"#3c4043",opacity:"0.8",fontStyle:"italic",fontSize:"10px"},children:"Marked as resolved"}):Object(X.jsx)(pa.a,{fontSize:"small",color:"success",style:{cursor:"pointer"},onClick:function(){return de(null===e||void 0===e?void 0:e._id)}})})]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",fontSize:"13px",marginTop:"5px",marginLeft:"2px",justifyContent:"space-between",alignItems:"center",color:"high"===(null===e||void 0===e||null===(d=e.clientNotes)||void 0===d?void 0:d.priority)?"red":"medium"===(null===e||void 0===e||null===(u=e.clientNotes)||void 0===u?void 0:u.priority)?"royalblue":"#565555",opacity:null!==e&&void 0!==e&&null!==(p=e.clientNotes)&&void 0!==p&&p.status&&"resolved"===(null===e||void 0===e||null===(j=e.clientNotes)||void 0===j?void 0:j.status)?.5:1},children:[null===e||void 0===e||null===(v=e.clientNotes)||void 0===v?void 0:v.noteText,Object(X.jsx)("span",{children:Object(X.jsx)(da,{data:e,setCurrentChat:t,setFinalMessage:n,scrollRef:i,setScrollView_:s,handleCloseModal:le,setAllNotes:y,setPage:c})})]})]})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",padding:"20px 45px 20px 30px"},count:Math.ceil(P/10),page:L,onChange:re})]})})}),Object(X.jsx)(G.a,{children:Object(X.jsx)(Y.a,{onClick:le,children:"Close"})})]})]})},va=n(507),xa=n(519),ba=n(199),ga=n.n(ba),fa=o.a.forwardRef((function(e,t){return Object(X.jsx)(pt.a,Object(v.a)({elevation:6,ref:t,variant:"filled"},e))})),ma=function(e){var t=e.apiUrl,n=e.apiKey,o=Object(a.useState)([]),i=Object(l.a)(o,2),s=i[0],c=i[1],r=Object(a.useState)(null),x=Object(l.a)(r,2),g=x[0],f=x[1],h=Object(a.useState)(),C=Object(l.a)(h,2),I=(C[0],C[1]),T=Object(a.useState)([]),z=Object(l.a)(T,2),D=z[0],R=z[1],W=Object(a.useState)([]),E=Object(l.a)(W,2),B=E[0],L=E[1],F=Object(a.useState)([]),M=Object(l.a)(F,2),U=M[0],K=M[1],H=Object(a.useState)([]),V=Object(l.a)(H,2),q=(V[0],V[1],Object(a.useState)(null)),G=Object(l.a)(q,2),J=(G[0],G[1],Object(a.useState)("")),Q=Object(l.a)(J,2),Z=Q[0],$=Q[1],ee=Object(a.useState)([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)([]),ie=Object(l.a)(oe,2),se=(ie[0],ie[1],Object(a.useState)({})),ce=Object(l.a)(se,2),de=ce[0],ue=ce[1],pe=Object(a.useState)(!1),je=Object(l.a)(pe,2),ve=je[0],xe=je[1],ge=Object(a.useRef)(),fe=Object(a.useState)(null),me=Object(l.a)(fe,2),he=(me[0],me[1],Object(a.useState)()),Oe=Object(l.a)(he,2),_e=Oe[0],ke=Oe[1],Te=Object(a.useState)(""),ze=Object(l.a)(Te,2),Pe=(ze[0],ze[1]),We=Object(a.useState)(!1),Le=Object(l.a)(We,2),Me=(Le[0],Le[1]),Ve=Object(a.useState)(!1),Ge=Object(l.a)(Ve,2),Qe=Ge[0],Xe=Ge[1],Ze=Object(a.useState)(0),$e=Object(l.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(a.useState)([]),at=Object(l.a)(nt,2),ot=at[0],it=at[1],st=Object(a.useState)([]),lt=Object(l.a)(st,2),rt=lt[0],pt=lt[1],jt=Object(a.useState)(),vt=Object(l.a)(jt,2),xt=(vt[0],vt[1],Object(a.useState)()),bt=Object(l.a)(xt,2),gt=bt[0],ft=bt[1],ht=Object(a.useState)(0),Ot=Object(l.a)(ht,2),yt=Ot[0],St=Ot[1],_t=Object(a.useState)(!1),wt=Object(l.a)(_t,2),Ct=wt[0],It=wt[1],Tt=Object(a.useState)(!1),zt=Object(l.a)(Tt,2),At=zt[0],Nt=zt[1],Dt=Object(a.useState)(),Pt=Object(l.a)(Dt,2),Rt=(Pt[0],Pt[1],Object(a.useState)(!1)),Wt=Object(l.a)(Rt,2),Et=Wt[0],Bt=Wt[1],Lt=Object(a.useState)(""),Ft=Object(l.a)(Lt,2),Mt=Ft[0],Ut=Ft[1],Kt=Object(a.useState)(),Ht=Object(l.a)(Kt,2),Yt=Ht[0],Vt=Ht[1],qt=Object(a.useState)(),Gt=Object(l.a)(qt,2),Jt=Gt[0],Qt=Gt[1],Xt=Object(a.useState)(),Zt=Object(l.a)(Xt,2),$t=(Zt[0],Zt[1],Object(a.useState)(!1)),en=Object(l.a)($t,2),nn=en[0],an=en[1],on=Object(a.useState)(),sn=Object(l.a)(on,2),ln=sn[0],cn=sn[1],rn=Object(a.useState)(),dn=Object(l.a)(rn,2),un=dn[0],pn=dn[1],jn=Object(a.useState)([]),vn=Object(l.a)(jn,2),xn=vn[0],bn=vn[1],gn=Object(a.useState)(),fn=Object(l.a)(gn,2),mn=fn[0],hn=(fn[1],Object(a.useState)(1)),On=Object(l.a)(hn,2),yn=On[0],Sn=On[1],_n=Object(a.useState)(20),wn=Object(l.a)(_n,2),kn=wn[0],In=(wn[1],Object(a.useState)()),Tn=Object(l.a)(In,2),zn=Tn[0],An=Tn[1],Nn=Object(a.useState)(),Dn=Object(l.a)(Nn,2),Pn=Dn[0],Rn=Dn[1],Wn=Object(a.useState)(!1),En=Object(l.a)(Wn,2),Bn=En[0],Ln=En[1],Fn=Object(a.useState)(!0),Mn=Object(l.a)(Fn,2),Un=Mn[0],Kn=Mn[1],Hn=Object(a.useState)(!0),Yn=Object(l.a)(Hn,2),Vn=Yn[0],qn=Yn[1],Gn=Object(a.useState)(),Jn=Object(l.a)(Gn,2),Qn=Jn[0],Xn=Jn[1],Zn=Object(a.useState)(),ea=Object(l.a)(Zn,2),ta=ea[0],na=ea[1],oa=Object(a.useState)(!1),sa=Object(l.a)(oa,2),la=sa[0],ca=sa[1],ra=Object(a.useState)(!1),da=Object(l.a)(ra,2),ua=da[0],pa=da[1],ba=Object(a.useState)([]),ma=Object(l.a)(ba,2),ha=ma[0],Oa=ma[1],ya=Object(a.useState)(),Sa=Object(l.a)(ya,2),_a=Sa[0],wa=Sa[1],ka=Object(a.useState)(),Ca=Object(l.a)(ka,2),Ia=(Ca[0],Ca[1]),Ta=Object(a.useState)(),za=Object(l.a)(Ta,2),Aa=(za[0],za[1]),Na=Object(a.useState)(!1),Da=Object(l.a)(Na,2),Pa=Da[0],Ra=Da[1],Wa=Object(a.useState)(),Ea=Object(l.a)(Wa,2),Ba=Ea[0],La=Ea[1],Fa=Object(a.useState)([]),Ma=Object(l.a)(Fa,2),Ua=Ma[0],Ka=Ma[1],Ha=Object(a.useState)(!1),Ya=Object(l.a)(Ha,2),Va=Ya[0],qa=Ya[1],Ga=Object(a.useState)(),Ja=Object(l.a)(Ga,2),Qa=Ja[0],Xa=Ja[1],Za=Object(a.useState)([]),$a=Object(l.a)(Za,2),eo=($a[0],$a[1],Object(a.useState)()),to=Object(l.a)(eo,2),no=(to[0],to[1],Object(a.useState)()),ao=Object(l.a)(no,2),oo=(ao[0],ao[1],Object(a.useState)("")),io=Object(l.a)(oo,2),so=(io[0],io[1],Object(a.useState)()),lo=Object(l.a)(so,2),co=lo[0],ro=lo[1],uo=Object(a.useState)(localStorage.getItem("agent")),po=Object(l.a)(uo,2),jo=po[0],vo=po[1],xo=Object(a.useState)(),bo=Object(l.a)(xo,2),go=bo[0],fo=bo[1],mo=Object(a.useState)(0),ho=Object(l.a)(mo,2),Oo=(ho[0],ho[1],Object(a.useState)(1)),yo=Object(l.a)(Oo,2),So=(yo[0],yo[1],Object(a.useState)(!1)),_o=Object(l.a)(So,2),wo=(_o[0],_o[1],Object(a.useState)(0)),ko=Object(l.a)(wo,2),Co=ko[0],Io=ko[1],To=Object(a.useState)(1),zo=Object(l.a)(To,2),Ao=zo[0],No=zo[1],Do=Object(a.useState)(!1),Po=Object(l.a)(Do,2),Ro=Po[0],Wo=Po[1],Eo=Object(a.useState)(),Bo=Object(l.a)(Eo,2),Lo=Bo[0],Fo=Bo[1],Mo=Object(a.useState)(),Uo=Object(l.a)(Mo,2),Ko=Uo[0],Ho=Uo[1],Yo=Object(a.useState)(),Vo=Object(l.a)(Yo,2),qo=Vo[0],Go=Vo[1],Jo=Object(a.useState)(),Qo=Object(l.a)(Jo,2),Xo=Qo[0],Zo=Qo[1],$o=Object(a.useState)(),ei=Object(l.a)($o,2),ti=ei[0],ni=ei[1],ai=Object(a.useRef)(),oi=Object(a.useRef)(),ii=(new Set,Object(a.useState)()),si=Object(l.a)(ii,2),li=si[0],ci=si[1],ri=Object(a.useState)(!1),di=Object(l.a)(ri,2),ui=(di[0],di[1]),pi="top",ji="center",vi=Object(a.useState)(""),xi=Object(l.a)(vi,2),bi=xi[0],gi=xi[1],fi=Object(a.useState)(!1),mi=Object(l.a)(fi,2),hi=mi[0],Oi=mi[1],yi=function(e,t){"clickaway"!==t&&Oi(!1)},Si=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ui(!0),e.prev=1,e.next=4,m.a.get(O+"/".concat(null===g||void 0===g?void 0:g.wa_id),{params:{page:yn,limit:kn}},{headers:""});case 4:0===(t=e.sent).data.length?(Oi(!0),gi("No more messages")):(I(t.data),R([].concat(Object(p.a)(null===t||void 0===t?void 0:t.data),Object(p.a)(D))),ui(!1),Sn(yn+1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),_i=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An(t.target.value),n={tags:t.target.value},e.next=4,m.a.put(w+"/".concat(null===g||void 0===g?void 0:g.wa_id),n,{headers:""});case 4:Rn(n.tags);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wi=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vo(t.target.value),n={agent:t.target.value},e.next=4,m.a.put(k+"/".concat(null===g||void 0===g?void 0:g.wa_id),n,{headers:""});case 4:ro(n.agent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){ge.current=Object(P.a)("/");var e=localStorage.getItem("api"),t=localStorage.getItem("device");ge.current.emit("user",{api:e,device:t});var n=localStorage.getItem("agent");ge.current.emit("agent",n),ge.current.on("getAlert",(function(e){it([e]),"granted"===Notification.permission&&null!==e&&void 0!==e&&e.contacts&&(new Notification("hey",{body:"A new message received",icon:"https://cdn2.iconfinder.com/data/icons/ios7-inspired-mac-icon-set/1024/messages_5122x.png"}).onClick=function(e){window.location.href="http://google.com"})})),ge.current.on("getUsers",(function(e){console.log(e,"webhook");var t=e.length>19?e.length-19:0;ae(e.slice(t,e.length))})),ge.current.on("save",(function(e){console.log(e),Vt(e)})),ge.current.on("update",(function(e){console.log("count",e),Qt(e)})),ge.current.on("statusChanged",(function(e){console.log(e),bn((function(){return e}))})),ge.current.on("rpayNoti",(function(e){console.log(e,"rpayWebhook"),Zo(e)})),ge.current.on("rpayXNoti",(function(e){console.log(e,"rpayXWebhook"),ni(e)})),ge.current.on("interestedTutors",(function(e){console.log(e,"interestedTutors"),Ho(e)})),ge.current.on("newSession",(function(e){console.log(e,"newSessions"),Go(e)}));var a=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(localStorage.getItem("api"),"/api/agent/getAgentStatus/").concat(localStorage.getItem("agent")));case 3:t=e.sent,fo(t.data.status),ci(t.data.labels),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();a()}),[]),console.log(ne),Object(a.useEffect)((function(){var e;console.log(g),(null===(e=ne[ne.length-1])||void 0===e?void 0:e.contacts)&&L((function(){return null===ne||void 0===ne?void 0:ne.filter((function(e){var t;return e.contacts&&(null===e||void 0===e||null===(t=e.contacts[0])||void 0===t?void 0:t.wa_id)==(null===g||void 0===g?void 0:g.wa_id)}))}))}),[ne,g]),console.log(B),Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get(O+"/".concat(null===g||void 0===g?void 0:g.wa_id),{params:{page:0,limit:kn}},{headers:""});case 3:t=e.sent,console.log(t.data),I(t.data),R(Object(p.a)(null===t||void 0===t?void 0:t.data)),Ra(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){L([])}}),[g,ve,Qe]);console.log(rt),console.log(gt);console.log(B),console.log(g),Object(a.useEffect)((function(){var e=localStorage.getItem("agent"),t=function(){var t=Object(j.a)(Object(u.a)().mark((function t(){var n,a,o;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get(Se+"/".concat(e),{params:{page:1,limit:20}},{headers:""});case 3:o=t.sent,console.log(o.status),c(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.result),Io(null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.length),Vt(null),Qt(null),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0.Error);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}),[Yt,Jt,Pn,co,Qn,ta,Ba,Qe]),console.log(s),Object(a.useEffect)((function(){K([]),Ra(!0),Sn(1)}),[g]),console.log(ve),console.log(D),console.log([].concat(Object(p.a)(D),Object(p.a)(B))),console.log(B),Object(a.useEffect)((function(){var e=[].concat(Object(p.a)(D),Object(p.a)(B));console.log("newArr",e),K((function(){return t=e,n=function(e){return e.messages?e.messages[0].id:e.id},Object(p.a)(new Map(t.map((function(e){return[n(e),e]}))).values());var t,n}))}),[D,B]);var ki=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/"!==t.target.value){e.next=11;break}return e.prev=1,e.next=4,m.a.get("https://annular-arena-331607.el.r.appspot.com/api/quickreply");case 4:n=e.sent,Ka(null===n||void 0===n?void 0:n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Ci=Z.length>0&&Ua.length>0?null===Ua||void 0===Ua?void 0:Ua.filter((function(e){return-1!==e.shortcut.toLowerCase().indexOf(Z.toLowerCase())})):null;console.log(Ua);var Ii=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={recipient_type:"individual",to:g.wa_id,conversationId:"",name:g.name,from:g.wa_id,wa_id:g.wa_id,text:{body:Z},type:"text",data:"",isOwner:!0},a={timestamp:Math.floor((new Date).getTime()/1e3)},!Z){e.next=18;break}return e.prev=4,$(""),e.next=8,m.a.post(y,n,{headers:Object(v.a)({},be)});case 8:return o=e.sent,console.log("sendm",o),e.next=12,m.a.put("".concat(N,"/").concat(null===g||void 0===g?void 0:g.wa_id),a,{headers:{"Content-Type":"application/json"}});case 12:setTimeout((function(){console.log("This will run after 1 second!"),Xe(!Qe)}),0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();console.log("fmsg",U);var Ti=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var a,o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),wa(""),ca(!0),console.log(gt.name),e.prev=4,e.next=7,m.a.post("https://waba.360dialog.io/v1/media",gt,{headers:{"Content-Type":"application/x-zip-compressed"==gt.type?"application/zip":gt.type,"D360-API-KEY":n||localStorage.getItem("api_key")}});case 7:return a=e.sent,o={recipient_type:"individual",to:g.wa_id,type:gt.type.includes("image/")?"image":gt.type.includes("video/")?"video":gt.type.includes("audio/")?"audio":"document",data:{id:a.data.media[0].id,caption:Mt,filename:gt.name},name:"",from:"",wa_id:g.wa_id,timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:""},e.next=11,m.a.post(S,o,{headers:Object(v.a)({},be)});case 11:i=e.sent,console.log(i),$(""),setTimeout((function(){console.log("This will run after 0.5 second!"),Xe(!Qe),St(+yt+1)}),500),pt([]),ca(!1),Ut(""),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),ca(!1),wa("Something went wrong!"),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}();console.log(Et);var zi=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:g.name,from:"",wa_id:g.wa_id,templateName:"conversation_initiate",templateText:"Hi ".concat(g.name,", This is Tutorpoint.We want to start a conversation with you. Please reply as soon as you see this message."),template:{namespace:mt,language:"en"},button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"template"},e.prev=1,e.next=4,m.a.post(A,t,{headers:Object(v.a)({},be)});case 4:n=e.sent,console.log(n),setTimeout((function(){console.log("This will run after 1 second!"),Xe(!Qe)}),100),Bt(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Ai=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:g.name,from:"",wa_id:g.wa_id,clientNotes:{noteText:Z,priority:t},button:"",timestamp:"",operatorName:"",isOwner:!0,status:"",ticketId:"",eventType:"note"},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/messages/addChatNote"),n,{headers:Object(v.a)({},be)});case 4:a=e.sent,console.log(a),$(""),setTimeout((function(){console.log("This will run after 1 second!"),Xe(!Qe)}),100),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),Ni=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa(!0),t={name:ln,wa_id:"+".concat(un)},e.prev=2,e.next=5,m.a.post(_,t,{headers:{}});case 5:n=e.sent,c([].concat(Object(p.a)(s),[n.data])),an(!1),cn(""),pn(""),qa(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),Xa("Failed to add this contact!"),qa(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e;(Vn&&Un||U.length<=20)&&(null===(e=ai.current)||void 0===e||e.scrollIntoView())}),[U,yt,g]);var Di=s;console.log(g);var Pi=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ia(t.target.scrollTop),0===t.target.scrollTop?console.log("Reached bottom"):t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<260?Kn(!0):t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight>=260&&Kn(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ri=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,o,i,s,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("agent"),!Lo){e.next=20;break}return Wo(!0),No(n),e.prev=4,e.next=7,m.a.get(Se+"/".concat(a,"/").concat(Lo),{params:{page:n,limit:20}},{headers:""});case 7:i=e.sent,console.log(i.data),c(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.result),Wo(!1),Vt(null),Qt(null),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:e.next=36;break;case 20:return Wo(!0),No(n),e.prev=22,e.next=25,m.a.get(Se+"/".concat(a),{params:{page:n,limit:20}},{headers:""});case 25:l=e.sent,console.log(l.data),c(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.result),Wo(!1),Vt(null),Qt(null),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(22),console.log(e.t1);case 36:case"end":return e.stop()}}),e,null,[[4,15],[22,33]])})));return function(t,n){return e.apply(this,arguments)}}(),Wi=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n,a,o,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("agent"),Fo(t.target.value),"Enter"!=t.key){e.next=18;break}return Wo(!0),e.prev=4,e.next=7,m.a.get(Se+"/".concat(n,"/").concat(t.target.value),{params:{page:1,limit:20}},{headers:""});case 7:i=e.sent,console.log(i.data),Wo(!1),c(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.result),Io(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.length),No(1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),Ei=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){var t,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={wa_id:"+".concat(null===g||void 0===g?void 0:g.wa_id)},e.prev=1,e.next=4,m.a.post("".concat(localStorage.getItem("api"),"/api/conversations/contactValidation"),t);case 4:n=e.sent,Oi(!0),gi(n.data.contacts[0].status+" contact"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Bi=function(){var e=Object(j.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={status:t},e.prev=1,e.next=4,m.a.put("".concat(localStorage.getItem("api"),"/api/agent/updateAgentStatus/").concat(localStorage.getItem("agent")),n);case 4:e.sent,window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Li=[{icon:Object(X.jsx)(ga.a,{color:"success",onClick:function(){return Ai("low")}}),name:"Low priority"},{icon:Object(X.jsx)(ga.a,{color:"primary",onClick:function(){return Ai("medium")}}),name:"Medium priority"},{icon:Object(X.jsx)(ga.a,{color:"error",onClick:function(){return Ai("high")}}),name:"High priority"}],Fi=localStorage.getItem("device"),Mi=localStorage.getItem("agent");return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:"messenger",children:[Object(X.jsxs)("div",{className:"chatMenu",children:[Object(X.jsxs)("header",{className:"chat_header",children:[Object(X.jsx)("img",{className:"profilePic",src:"/assets/person/noAvatar.png",alt:""}),Object(X.jsxs)("div",{style:{flex:"1",fontSize:"16px",fontWeight:"600",height:"22px",lineHeight:"4px"},children:["Device-",Fi," ",1==Fi?"(7761093194)":2==Fi?"(7091489698)":3==Fi?"(7761814102)":4==Fi?"(8777592248)":5==Fi?"(9065650479)":null,Object(X.jsx)("p",{style:{color:"#585858"},children:Mi})]}),"Admin"!=localStorage.getItem("agent")&&"inactive"==go?Object(X.jsx)(dt.a,{style:{fontSize:"32px",color:"#50585C",cursor:"pointer",marginRight:"10px"},onClick:function(){return Bi("active")}}):"Admin"!=localStorage.getItem("agent")&&"active"==go?Object(X.jsx)(ct.a,{style:{fontSize:"32px",color:"#00EC64",cursor:"pointer",marginRight:"10px"},onClick:function(){return Bi("inactive")}}):null,Object(X.jsx)("div",{style:{marginRight:"10px"},children:Object(X.jsx)(ja,{setCurrentChat:f,setFinalMessage:R,scrollRef:ai,setScrollView_:qn,setPage:Sn})}),Object(X.jsx)(Ue.a,{style:{fontSize:"32px",color:nn?"#337DDD":"#50585C",cursor:"pointer",marginRight:"10px"},onClick:function(){return an(!0)}}),Object(X.jsx)(kt.a,{style:{cursor:"pointer",marginLeft:"5px"},onClick:function(){localStorage.clear(),window.location.reload()}})]}),Object(X.jsx)("div",{style:{height:"2.3rem",padding:"6px 0px 6px 17px",backgroundColor:"#9DE1FE"},children:Object(X.jsx)("input",{placeholder:"Search for users",className:"chatMenuInput",onChange:function(e){return function(e){Pe(e.target.value)}(e)},onKeyPress:Wi})}),nn&&Object(X.jsxs)("div",{style:{height:"8.4rem",padding:"20px 0px 20px 17px",backgroundColor:"#fff",border:"1px solid #b3b0b0",borderRadius:"3px"},children:[Object(X.jsx)("input",{type:"text",className:"addContactInput",placeholder:"Name",value:ln,onChange:function(e){return cn(e.target.value)},required:!0}),Object(X.jsx)("input",{type:"number",className:"addContactInput",placeholder:"WhatsApp Number (with country code)*",value:un,onChange:function(e){return pn(e.target.value)},required:!0}),Object(X.jsxs)(Ke.a,{direction:"row",spacing:2,children:[ln&&un&&!Va?Object(X.jsx)(Y.a,{size:"small",variant:"contained",color:"error",onClick:function(){return Ni()},children:"save"}):Va?Object(X.jsx)(Ye.a,{size:"small",loading:!0,loadingPosition:"start",startIcon:Object(X.jsx)(Je.a,{}),variant:"contained",children:"Save"}):Object(X.jsx)(Y.a,{size:"small",variant:"contained",color:"error",disabled:!0,children:"save"}),Object(X.jsx)(Y.a,{size:"small",variant:"outlined",color:"error",onClick:function(){an(!1),qa(!1),Xa("")},children:"close"}),Object(X.jsx)("div",{style:{alignSelf:"center",color:"red",fontSize:"13px"},children:Qa})]})]}),Ro?Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(X.jsx)(Ie.a,{})}):Object(X.jsxs)("div",{className:"chatMenuWrapper",children:[null===Di||void 0===Di?void 0:Di.map((function(e){return Object(X.jsx)("div",{onClick:function(){f(e),Me(!0),Bt(!1),An(""),Rn("")},children:Object(X.jsx)(le,{conversation:e,currentChat:g,finalMessage:U,alertMsg:ot,arrivalMessage:ne,alert:et,setAlert:tt,msgCountUpdated:Bn,setMsgCountUpdated:Ln,setPinned:Xn,setMarkChat:na,setAlertUpdate:La,apiUrl:t})})})),Object(X.jsx)(Ae.a,{style:{display:"flex",justifyContent:"center",marginTop:"15px"},count:Math.ceil(Co/20),page:Ao,onChange:Ri})]})]}),Object(X.jsx)("div",{className:"chatBox",children:Object(X.jsx)("div",{className:"chatBoxWrapper",children:g?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("header",{className:"currentChatHeader",children:[Object(X.jsx)("img",{className:"profilePic",src:"/assets/person/noAvatar.png",alt:""}),Object(X.jsx)("div",{children:"".concat(null===g||void 0===g?void 0:g.name).concat(null===g||void 0===g?void 0:g.wa_id.slice(0,3))}),Object(X.jsxs)("div",{style:{marginLeft:"5px",cursor:"pointer"},children:[Object(X.jsx)(Cn.a,{fontSize:"small",onClick:Ei}),Object(X.jsx)(ut.a,{open:hi,autoHideDuration:2e3,onClose:yi,anchorOrigin:{vertical:pi,horizontal:ji},children:Object(X.jsx)(fa,{onClose:yi,severity:"info",sx:{width:"100%"},children:bi})},pi+ji)]}),Object(X.jsx)("div",{className:"select-list",children:Object(X.jsxs)("select",{name:"taglabel",id:"taglabel",value:zn,onChange:_i,children:[Object(X.jsx)("option",{selected:!0,value:"",children:"Labels"}),null===li||void 0===li?void 0:li.map((function(e){return Object(X.jsx)("option",{value:e,children:e})}))]})}),Object(X.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600"},children:["Label: ",g.tags||zn||"--"]}),Object(X.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:"10%",justifyContent:"flex-end",marginRight:"15px"},children:[Object(X.jsx)("div",{children:"Assign to:"}),Object(X.jsx)("div",{className:"select-list",children:Object(X.jsxs)("select",{name:"agentlabel",id:"agentlabel",value:jo,className:"select-list2",onChange:wi,children:[Object(X.jsx)("option",{value:"Admin",children:"Admin"}),Object(X.jsx)("option",{value:"Chaitanya",children:"Chaitanya"}),Object(X.jsx)("option",{value:"Nityananda",children:"Nityananda"}),Object(X.jsx)("option",{value:"Advaita",children:"Advaita"}),Object(X.jsx)("option",{value:"Abhay",children:"Abhay"})]})})]})]}),0==(null===U||void 0===U?void 0:U.length)||Pa?Object(X.jsxs)("div",{className:"chatBoxTop",children:[Object(X.jsx)(b.a,{type:"spinningBubbles",color:"#2ca6d6",className:"loadingIcon"}),Object(X.jsx)("div",{className:"no_message",children:0==(null===U||void 0===U?void 0:U.length)&&Object(X.jsx)("p",{className:"no_messageText",children:"You have not started conversation with this person!"})})]}):Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:"chatBoxTop",onScroll:Pi,ref:oi,children:[U.length>0&&Object(X.jsx)("div",{style:Object(d.a)({textAlign:"center"},"textAlign","-webkit-center"),children:Object(X.jsx)(tn.a,{children:Object(X.jsx)(qe.a,{onClick:Si})})}),U.map((function(e,n,a){return Object(X.jsx)("div",{ref:ai,children:Object(X.jsx)(ye,{message:e,msgArr:a,own:e.owner,ownAlt:e.isOwner,setForward:ue,mulForward:ha,setMulForward:Oa,setVisible:ke,setShowSelector:pa,showSelector:ua,apiUrl:t,status:xn,msgId:mn})},n)})),_e&&Object(X.jsx)("div",{children:Object(X.jsx)(Ne,{conversations:s,visible:_e,setVisible:ke,forward:de,forwarded:ve,setForwarded:xe,mulForward:ha,setMulForward:Oa,setForwardMsg:Aa,apiKey:n,convCount:Co,contactPage:Ao,handleContactList:Ri,contactListLoading:Ro,getCustomersUrl:Se})})]})}),rt.length>0&&gt?Object(X.jsx)("div",{id:"id01",className:"modal_",children:Object(X.jsx)("form",{className:"modal-content_",children:Object(X.jsxs)("header",{style:{height:"148px",backgroundColor:"#0B1929",position:"absolute",width:"450px",borderRadius:"5px",padding:"12px 12px 0px 12px"},children:[Object(X.jsx)(Ce.a,{fontSize:"medium",style:{color:"#f2efef",margin:"12px 10px -5px 10px",cursor:"pointer"},onClick:function(){pt([]),ft(null),ca(!1),wa("")}}),Object(X.jsx)("span",{style:{fontSize:"18px",margin:"0px 0px 0px 10px",fontWeight:"400",color:"#ffff"},children:"Send the file"}),Object(X.jsx)("div",{style:{padding:"15px",color:"rgb(219 218 218)"},children:null===gt||void 0===gt?void 0:gt.name}),Object(X.jsx)("input",{className:"chatMessageInput",placeholder:"Add a caption...",value:Mt,onChange:function(e){return Ut(e.target.value)}}),Object(X.jsx)(we.a,{style:{color:"#ffff",cursor:"pointer",float:"right",padding:"5px 10px",fontSize:"30px"},onClick:Ti}),la&&Object(X.jsx)("div",{style:{paddingTop:"10px"},children:Object(X.jsx)(He.a,{})}),_a&&Object(X.jsx)("div",{className:"errMsgText",children:_a})]})})}):null,Object(X.jsxs)("footer",{className:"chatBoxBottom",children:[Object(X.jsx)("div",{style:{width:"-webkit-fill-available",overflowY:"scroll",overflowX:"hidden",maxHeight:"199px"},children:Ci&&(null===Ci||void 0===Ci?void 0:Ci.map((function(e){return Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",backgroundColor:"rgb(223 223 223)",padding:"15px 20px",borderBottom:"1px solid rgb(209 209 209)",cursor:"pointer"},onClick:function(){return $(e.message)},children:[Object(X.jsx)("span",{style:{fontWeight:"600",marginRight:"5px"},children:e.shortcut}),e.message]})})))}),Object(X.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"-webkit-fill-available",height:"4.3rem",justifyContent:"space-evenly",alignItems:"center"},children:ua?Object(X.jsxs)("div",{style:{display:"flex",flex:"100%"},children:[Object(X.jsx)(Ce.a,{style:{flex:"5%",cursor:"pointer",fontSize:"30px",marginLeft:"5px"},onClick:function(){pa(!1),Oa([])}}),Object(X.jsx)("div",{style:{flex:"90%"}}),Object(X.jsx)(re.a,{style:{flex:"5%"},className:"forward_final",onClick:function(){ke(!0),pa(!1)}})]}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{className:"attachFile",children:[Object(X.jsx)(Re.a,{fontSize:"medium",className:"attachButton"}),Object(X.jsx)("input",{id:"myFile",name:"myFile",type:"file",className:"attachInput",onChange:function(e){return function(e){var t=e;ft(e);var n=new FileReader,a=t;n.readAsDataURL(a),n.onload=function(e){var t={fileList:e.target.result};console.log(t),pt([t])},console.log(t)}(e.target.files[0])}})]}),Object(X.jsx)(Be.a,{open:At,onClose:function(){Nt(!1)},onOpen:function(){Nt(!0)},title:"CREATE FORM",children:Object(X.jsx)(aa,{clientId:g.uid,clientWaId:g.wa_id,clientName:g.name,agent:g.agent})}),Object(X.jsx)(Be.a,{open:Ct,onClose:function(){It(!1)},onOpen:function(){It(!0)},title:"INITIATE CONVERSATION",children:Object(X.jsx)(Fe.a,{className:"templateMsg",onClick:zi})}),Object(X.jsx)("textarea",{className:"chatMessageInput",placeholder:"Type a message...",value:Z,onChange:function(e){$(e.target.value),ki(e)},onKeyPress:function(e){"Enter"==e.key&&e.shiftKey&&Ii(e)}}),Z.length>0?Object(X.jsxs)(X.Fragment,{children:["\xa0",Object(X.jsx)(we.a,{fontSize:"medium",style:{fontSize:"29px"},className:"chatSubmitButton",onClick:Ii}),Object(X.jsx)("span",{className:"chatSubmitButton",children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0"}),Object(X.jsx)(va.a,{ariaLabel:"SpeedDial openIcon example",style:{left:"97%",height:"29px"},sx:{position:"absolute",bottom:16,right:16},icon:Object(X.jsx)(ia.a,{fontSize:"medium",style:{fontSize:"26px",color:"#9B9B9B"},openIcon:Object(X.jsx)(we.a,{fontSize:"medium",style:{fontSize:"26px",color:"#1977f2"}})}),children:Li.map((function(e){return Object(X.jsx)(xa.a,{icon:e.icon,tooltipTitle:e.name},e.name)}))})]}):Object(X.jsx)(Ee.a,{fontSize:"large",className:"micButton"})]})})]})]}):Object(X.jsx)("img",{src:De,style:{alignSelf:"center",marginTop:"130px",height:"60vh"}})})}),Object(X.jsx)($n,{newSessions:qo,interestedTutors:Ko,clientPayment:Xo,tutorPayout:ti})]})})};n(375);function ha(e){var t=e.userId,n=e.setUserId,o=e.agent,i=e.setAgent,s=e.pass,l=e.setPass,c=e.setUser,r=e.setApiUrl,d=e.setApiKey,p=e.otp,v=e.setOtp,x=Object(a.useRef)(),b=Object(a.useRef)();console.log("https://annular-arena-331607.el.r.appspot.com/d1");var g=function(){var e=Object(j.a)(Object(u.a)().mark((function e(n){var a,i,l,j,v,x,b,g,f,h,O,y,S,_,w,k,C,I,T,z,A;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),"EduarnoD_1"!=t||"Chaitanya#D_1"!=s){e.next=10;break}return e.next=4,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d1","/api/agent/verifyOtp"),{otp:p,agent:o});case 4:i=e.sent,l=null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.success,console.log({otpMatched:l}),i.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d1"),d("JMjJNtiGmSiet1O9OXJOExGhAK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d1"),localStorage.setItem("api_key","JMjJNtiGmSiet1O9OXJOExGhAK"),localStorage.setItem("device","1"),localStorage.setItem("agent",o),localStorage.setItem("waid","917761093194"),localStorage.setItem("namespace","1ff427bd_e20d_4582_a530_e28f311cc595"),window.location.reload()):"OTP Not Matched"===i.data.remark?(alert("OTP is not correct!"),c(!1),console.log("failed verify agent api")):(alert("OTP is expired.Please send another"),c(!1),console.log("failed verify agent api")),e.next=66;break;case 10:if("EduarnoD_2"!=t||"Nityananda#D_2"!=s){e.next=19;break}return e.next=13,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d2","/api/agent/verifyOtp"),{otp:p,agent:o});case 13:v=e.sent,x=null===v||void 0===v||null===(j=v.data)||void 0===j?void 0:j.success,console.log({otpMatched:x}),v.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d2"),d("qjuT6BExOEWmhKqtGSOidRVSAK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d2"),localStorage.setItem("api_key","qjuT6BExOEWmhKqtGSOidRVSAK"),localStorage.setItem("device","2"),localStorage.setItem("agent",o),localStorage.setItem("waid","917091489698"),localStorage.setItem("namespace","f02c5e46_b956_4160_abf2_e8f6cf283754")):(alert("OTP is not correct!"),console.log("failed verify agent api")),e.next=66;break;case 19:if("EduarnoD_3"!=t||"Advaita#D_3"!=s){e.next=28;break}return e.next=22,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d3","/api/agent/verifyOtp"),{otp:p,agent:o});case 22:g=e.sent,f=null===g||void 0===g||null===(b=g.data)||void 0===b?void 0:b.success,console.log({otpMatched:f}),g.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d3"),d("S5OBuKrYYzZepp9hLtPcep3BAK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d3"),localStorage.setItem("api_key","S5OBuKrYYzZepp9hLtPcep3BAK"),localStorage.setItem("device","3"),localStorage.setItem("agent",o),localStorage.setItem("waid","917761814102"),localStorage.setItem("namespace","1ff427bd_e20d_4582_a530_e28f311cc595")):(alert("OTP is not correct!"),console.log("failed verify agent api")),e.next=66;break;case 28:if("EduarnoD_4"!=t||"Gadadhara#D_4"!=s){e.next=37;break}return e.next=31,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d4","/api/agent/verifyOtp"),{otp:p,agent:o});case 31:O=e.sent,y=null===O||void 0===O||null===(h=O.data)||void 0===h?void 0:h.success,console.log({otpMatched:y}),O.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d4"),d("TOgICT5gGovocnHe8aMb1jKwAK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d4"),localStorage.setItem("api_key","TOgICT5gGovocnHe8aMb1jKwAK"),localStorage.setItem("device","4"),localStorage.setItem("agent",o),localStorage.setItem("waid","918777592248"),localStorage.setItem("namespace","1ff427bd_e20d_4582_a530_e28f311cc595")):(alert("OTP is not correct!"),console.log("failed verify agent api")),e.next=66;break;case 37:if("EduarnoD_5"!=t||"Srivas#D_5"!=s){e.next=46;break}return e.next=40,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d5","/api/agent/verifyOtp"),{otp:p,agent:o});case 40:_=e.sent,w=null===_||void 0===_||null===(S=_.data)||void 0===S?void 0:S.success,console.log({otpMatched:w}),_.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d5"),d("Kia1AQk1PbjWk0LtpLnFEyttAK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d5"),localStorage.setItem("api_key","Kia1AQk1PbjWk0LtpLnFEyttAK"),localStorage.setItem("device","5"),localStorage.setItem("agent",o),localStorage.setItem("waid","919065650479"),localStorage.setItem("namespace","f02c5e46_b956_4160_abf2_e8f6cf283754")):(alert("OTP is not correct!"),c(!1),console.log("failed verify agent api")),e.next=66;break;case 46:if("EduarnoD_6"!=t||"Abhay#D_6"!=s){e.next=55;break}return e.next=49,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d6","/api/agent/verifyOtp"),{otp:p,agent:o});case 49:C=e.sent,I=null===C||void 0===C||null===(k=C.data)||void 0===k?void 0:k.success,console.log({otpMatched:I}),C.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d6"),d("Z3HKqEweJBHrBi2SrxvhLLsSAK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d6"),localStorage.setItem("api_key","Z3HKqEweJBHrBi2SrxvhLLsSAK"),localStorage.setItem("device","6"),localStorage.setItem("agent",o),localStorage.setItem("waid","917070505631"),localStorage.setItem("namespace","f02c5e46_b956_4160_abf2_e8f6cf283754")):(alert("OTP is not correct!"),console.log("failed verify agent api")),e.next=66;break;case 55:if("EduarnoD_7"!=t||"Krishna#D_7"!=s){e.next=64;break}return e.next=58,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d7","/api/agent/verifyOtp"),{otp:p,agent:o});case 58:z=e.sent,A=null===z||void 0===z||null===(T=z.data)||void 0===T?void 0:T.success,console.log({otpMatched:A}),z.data.success?(c(!0),localStorage.setItem("user",!0),r("https://annular-arena-331607.el.r.appspot.com/d7"),d("CmdeEku9DElAn3HaBtQVUQk6AK"),localStorage.setItem("api","https://annular-arena-331607.el.r.appspot.com/d7"),localStorage.setItem("api_key","CmdeEku9DElAn3HaBtQVUQk6AK"),localStorage.setItem("device","7"),localStorage.setItem("agent",o),localStorage.setItem("waid","919661126925"),localStorage.setItem("namespace","3b25ca9e_e7fe_45a1_acd2_224e4fd396d8")):(alert("OTP is not correct!"),console.log("failed verify agent api")),e.next=66;break;case 64:c(!1),alert("Login Failed! UserID or password is incorrect.");case 66:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("EduarnoD_1"!=t||"Chaitanya#D_1"!=s){e.next=11;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=8;break}return e.next=4,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d1","/api/agent/sendOtp"),{device:"Device1",agent:o});case 4:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=9;break;case 8:alert("Please Enter Correct Agent's Name");case 9:e.next=78;break;case 11:if("EduarnoD_2"!=t||"Nityananda#D_2"!=s){e.next=22;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=19;break}return e.next=15,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d2","/api/agent/sendOtp"),{device:"Device2",agent:o});case 15:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=20;break;case 19:alert("Please Enter Correct Agent's Name");case 20:e.next=78;break;case 22:if("EduarnoD_3"!=t||"Advaita#D_3"!=s){e.next=33;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=30;break}return e.next=26,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d3","/api/agent/sendOtp"),{device:"Device3",agent:o});case 26:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=31;break;case 30:alert("Please Enter Correct Agent's Name");case 31:e.next=78;break;case 33:if("EduarnoD_4"!=t||"Gadadhara#D_4"!=s){e.next=44;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=41;break}return e.next=37,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d4","/api/agent/sendOtp"),{device:"Device4",agent:o});case 37:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=42;break;case 41:alert("Please Enter Correct Agent's Name");case 42:e.next=78;break;case 44:if("EduarnoD_5"!=t||"Srivas#D_5"!=s){e.next=55;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=52;break}return e.next=48,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d5","/api/agent/sendOtp"),{device:"Device5",agent:o});case 48:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=53;break;case 52:alert("Please Enter Correct Agent's Name");case 53:e.next=78;break;case 55:if("EduarnoD_6"!=t||"Abhay#D_6"!=s){e.next=66;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=63;break}return e.next=59,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d6","/api/agent/sendOtp"),{device:"Device6",agent:o});case 59:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=64;break;case 63:alert("Please Enter Correct Agent's Name");case 64:e.next=78;break;case 66:if("EduarnoD_7"!=t||"Krishna#D_7"!=s){e.next=77;break}if(!o||"Admin"!==o&&"Chaitanya"!==o&&"Nityananda"!==o&&"Advaita"!==o&&"Abhay"!==o){e.next=74;break}return e.next=70,m.a.post("".concat("https://annular-arena-331607.el.r.appspot.com/d7","/api/agent/sendOtp"),{device:"Device7",agent:o});case 70:e.sent.data?(alert("OTP Sent"),console.log("OTP is sent")):(alert("OTP not sent. Try Again!"),console.log("OTP is sent")),e.next=75;break;case 74:alert("Please Enter Correct Agent's Name");case 75:e.next=78;break;case 77:alert("UserID or password is incorrect.");case 78:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{className:"login",children:Object(X.jsxs)("div",{className:"loginWrapper",children:[Object(X.jsx)("div",{className:"loginLeft",children:Object(X.jsx)("h3",{className:"loginLogo",children:"Eduarno Chat Dashboard"})}),Object(X.jsx)("div",{className:"loginRight",children:Object(X.jsxs)("form",{className:"loginBox",children:[Object(X.jsx)("input",{placeholder:"User ID",type:"text",value:t,required:!0,className:"loginInput",onChange:function(e){return n(e.target.value)},ref:x}),Object(X.jsx)("input",{placeholder:"Agent Name",type:"text",value:o,className:"loginInput",onChange:function(e){return i(e.target.value)},required:!0}),Object(X.jsx)("input",{placeholder:"Password",type:"password",value:s,required:!0,minLength:"6",className:"loginInput",onChange:function(e){return l(e.target.value)},ref:b}),Object(X.jsxs)("div",{style:{display:"flex"},children:[Object(X.jsx)("input",{style:{flex:"80%",height:"47px"},placeholder:"OTP",type:"text",value:p,required:!0,minLength:"4",className:"loginInput",onChange:function(e){return v(e.target.value)}}),Object(X.jsx)("button",{style:{flex:"20%",height:"50px",marginLeft:"10px",backgroundColor:"#25d366",border:"none",borderRadius:"10px",color:"white"},onClick:f,children:"Send OTP"})]}),Object(X.jsx)("button",{className:"loginButton",type:"submit",onClick:g,children:"Log In"}),Object(X.jsx)("span",{className:"loginForgot",children:"Forgot Password?"})]})})]})})}var Oa=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(),s=Object(l.a)(i,2),d=s[0],u=s[1],p=Object(a.useState)(),j=Object(l.a)(p,2),v=j[0],x=j[1],b=Object(a.useState)(),g=Object(l.a)(b,2),f=g[0],m=g[1],h=Object(a.useState)(!1),O=Object(l.a)(h,2),y=O[0],S=O[1],_=Object(a.useState)(),w=Object(l.a)(_,2),k=w[0],C=w[1],I=Object(a.useState)(),T=Object(l.a)(I,2),z=T[0],A=T[1],N=localStorage.getItem("user");return localStorage.getItem("agent"),"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){console.log(e)})),Object(X.jsx)(c.a,{children:Object(X.jsxs)(r.d,{children:[Object(X.jsx)(r.b,{exact:!0,path:"/",children:y||N?Object(X.jsx)(ma,{apiUrl:k,apiKey:z}):Object(X.jsx)(ha,{userId:n,setUserId:o,agent:f,setAgent:m,pass:d,setPass:u,setUser:S,setApiUrl:C,setApiKey:A,otp:v,setOtp:x})}),Object(X.jsx)(r.b,{exact:!0,path:"/login",children:y||N?Object(X.jsx)(r.a,{to:"/"}):Object(X.jsx)(ha,{userId:n,setUserId:o,agent:f,setAgent:m,pass:d,setPass:u,setUser:S,setApiUrl:C,setApiKey:A,otp:v,setOtp:x})})]})})},ya=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,540)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),i(e),s(e)}))};s.a.render(Object(X.jsx)(o.a.StrictMode,{children:Object(X.jsx)(Oa,{})}),document.getElementById("root")),ya()}},[[377,1,2]]]);
//# sourceMappingURL=main.f6fe2b92.chunk.js.map