{"ast":null,"code":"import _defineProperty from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import'./messenger.css';import ReactLoading from'react-loading';import Conversation from'../../components/conversations/Conversation';import Message from'../../components/message/Message';import{useContext,useEffect,useRef,useState}from'react';import axios from'axios';import{io}from'socket.io-client';import{msgUrl,sendMsgUrl,sendFileUrl,templateMsgUrl,sendtemplateMsgUrl,addContactUrl,addLabelUrl,quickReplyUrl,contactUrl,addAgentUrl}from'../../serviceUrls/Message-Services';import{getCustomersUrl}from'../../serviceUrls/Customer-Services';import ForwardMsg from'../../components/forwardConv/ForwardMsg';import chatDemo from'../../assets/openChat2.png';import SendIcon from'@material-ui/icons/Send';import AttachFileIcon from'@material-ui/icons/AttachFile';import MicIcon from'@material-ui/icons/Mic';import MoreVertIcon from'@material-ui/icons/MoreVert';import CloseIcon from'@material-ui/icons/Close';import Tooltip from'@material-ui/core/Tooltip';import SpeakerNotesIcon from'@material-ui/icons/SpeakerNotes';import PersonAddAltOutlinedIcon from'@mui/icons-material/PersonAddAltOutlined';import Stack from'@mui/material/Stack';import Button from'@mui/material/Button';import{storeFilesUrl}from'../../serviceUrls/StoreFiles-Service';import{headerKey}from'../../serviceUrls/ApiHeaderKey';import MoreMenu from'../../components/dropDown/MoreMenu';import InfiniteScroll from'react-infinite-scroll-component';import Menu from'@mui/material/Menu';import MenuItem from'@mui/material/MenuItem';import LinearProgress from'@mui/material/LinearProgress';import ReplyIcon from'@material-ui/icons/Reply';import LoadingButton from'@mui/lab/LoadingButton';import ReplayIcon from'@mui/icons-material/Replay';import DropFile from'../../components/drag_dropFile/DropFile';import SaveIcon from'@mui/icons-material/Save';import TutorContact from'../../components/tutorContacts/TutorContact';import Pagination from'@mui/material/Pagination';import CircularProgress from'@mui/material/CircularProgress';import LogoutIcon from'@mui/icons-material/Logout';import RightSec from'../../components/rightComponent/RightSec';import DynamicFormIcon from'@mui/icons-material/DynamicForm';import FormCreation from'../../components/forms/FormCreation';import AutorenewRoundedIcon from'@mui/icons-material/AutorenewRounded';import Snackbar from'@mui/material/Snackbar';import MuiAlert from'@mui/material/Alert';import NoteAddIcon from'@mui/icons-material/NoteAdd';import ToggleOffIcon from'@mui/icons-material/ToggleOff';import ToggleOnIcon from'@mui/icons-material/ToggleOn';import NoteHistory from'../../components/notes/NoteHistory';import IconButton from'@mui/material/IconButton';import{NAME_SPACE}from'../../utils/variables';import SpeedDial from'@mui/material/SpeedDial';import SpeedDialIcon from'@mui/material/SpeedDialIcon';import SpeedDialAction from'@mui/material/SpeedDialAction';import FileCopyIcon from'@mui/icons-material/FileCopyOutlined';import PrintIcon from'@mui/icons-material/Print';import ShareIcon from'@mui/icons-material/Share';import EditIcon from'@mui/icons-material/Edit';import PriorityHighIcon from'@mui/icons-material/PriorityHigh';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Alert=/*#__PURE__*/React.forwardRef(function Alert(props,ref){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,ref:ref,variant:\"filled\"},props));});var Messenger=function Messenger(_ref){var apiUrl=_ref.apiUrl,apiKey=_ref.apiKey;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),conversations=_useState2[0],setConversations=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentChat=_useState4[0],setCurrentChat=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),msgResponse=_useState6[0],setMsgResponse=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),newMsgRec=_useState10[0],setNewMsgRec=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),finalMessage=_useState12[0],setFinalMessage=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),textMsg=_useState14[0],setTextMsg=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),messageId=_useState16[0],setMessageId=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),newMessage=_useState18[0],setNewMessage=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),arrivalMessage=_useState20[0],setArrivalMessage=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),onlineUsers=_useState22[0],setOnlineUsers=_useState22[1];var _useState23=useState({}),_useState24=_slicedToArray(_useState23,2),forward=_useState24[0],setForward=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),forwarded=_useState26[0],setForwarded=_useState26[1];var socket=useRef();var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),userId=_useState28[0],setUserId=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),visible=_useState30[0],setVisible=_useState30[1];var _useState31=useState(''),_useState32=_slicedToArray(_useState31,2),search=_useState32[0],setSearch=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),highlighted=_useState34[0],setHighlighted=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),sent=_useState36[0],setSent=_useState36[1];var _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),alert=_useState38[0],setAlert=_useState38[1];var _useState39=useState([]),_useState40=_slicedToArray(_useState39,2),alertMsg=_useState40[0],setAlertMsg=_useState40[1];var _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),myFiles=_useState42[0],setMyFiles=_useState42[1];var _useState43=useState(),_useState44=_slicedToArray(_useState43,2),showFile=_useState44[0],setShowFile=_useState44[1];var _useState45=useState(),_useState46=_slicedToArray(_useState45,2),file=_useState46[0],setFile=_useState46[1];var _useState47=useState(0),_useState48=_slicedToArray(_useState47,2),fileSent=_useState48[0],setFileSent=_useState48[1];var _useState49=useState(false),_useState50=_slicedToArray(_useState49,2),openTooltip=_useState50[0],setOpenTooltip=_useState50[1];var _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),openTooltipForm=_useState52[0],setOpenTooltipForm=_useState52[1];var _useState53=useState(),_useState54=_slicedToArray(_useState53,2),templateMessage=_useState54[0],setTemplateMessage=_useState54[1];var _useState55=useState(false),_useState56=_slicedToArray(_useState55,2),showTemplateMsg=_useState56[0],setShowTemplateMsg=_useState56[1];var _useState57=useState(''),_useState58=_slicedToArray(_useState57,2),caption=_useState58[0],setCaption=_useState58[1];var _useState59=useState(),_useState60=_slicedToArray(_useState59,2),saved=_useState60[0],setSaved=_useState60[1];var _useState61=useState(),_useState62=_slicedToArray(_useState61,2),updated=_useState62[0],setUpdated=_useState62[1];var _useState63=useState(),_useState64=_slicedToArray(_useState63,2),newNotification=_useState64[0],setNewNotification=_useState64[1];var _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),addNewContact=_useState66[0],setAddNewContact=_useState66[1];var _useState67=useState(),_useState68=_slicedToArray(_useState67,2),addName=_useState68[0],setAddName=_useState68[1];var _useState69=useState(),_useState70=_slicedToArray(_useState69,2),addNumber=_useState70[0],setAddNumber=_useState70[1];var _useState71=useState([]),_useState72=_slicedToArray(_useState71,2),status=_useState72[0],setStatus=_useState72[1];var _useState73=useState(),_useState74=_slicedToArray(_useState73,2),msgId=_useState74[0],setMsgId=_useState74[1];var _useState75=useState(1),_useState76=_slicedToArray(_useState75,2),page=_useState76[0],setPage=_useState76[1];var _useState77=useState(20),_useState78=_slicedToArray(_useState77,2),limit=_useState78[0],setLimit=_useState78[1];var _useState79=useState(),_useState80=_slicedToArray(_useState79,2),taglabel=_useState80[0],setTaglabel=_useState80[1];var _useState81=useState(),_useState82=_slicedToArray(_useState81,2),tagUpdated=_useState82[0],setTagUpdated=_useState82[1];var _useState83=useState(false),_useState84=_slicedToArray(_useState83,2),msgCountUpdated=_useState84[0],setMsgCountUpdated=_useState84[1];var _useState85=useState(true),_useState86=_slicedToArray(_useState85,2),scrollView=_useState86[0],setScrollView=_useState86[1];var _useState87=useState(true),_useState88=_slicedToArray(_useState87,2),scrollView_=_useState88[0],setScrollView_=_useState88[1];var _useState89=useState(),_useState90=_slicedToArray(_useState89,2),pinned=_useState90[0],setPinned=_useState90[1];var _useState91=useState(),_useState92=_slicedToArray(_useState91,2),markChat=_useState92[0],setMarkChat=_useState92[1];var _useState93=useState(false),_useState94=_slicedToArray(_useState93,2),loading=_useState94[0],setLoading=_useState94[1];var _useState95=useState(false),_useState96=_slicedToArray(_useState95,2),showSelector=_useState96[0],setShowSelector=_useState96[1];var _useState97=useState([]),_useState98=_slicedToArray(_useState97,2),mulForward=_useState98[0],setMulForward=_useState98[1];var _useState99=useState(),_useState100=_slicedToArray(_useState99,2),errMsg=_useState100[0],setErrMsg=_useState100[1];var _useState101=useState(),_useState102=_slicedToArray(_useState101,2),scrollPosition=_useState102[0],setScrollPosition=_useState102[1];var _useState103=useState(),_useState104=_slicedToArray(_useState103,2),forwardMsg=_useState104[0],setForwardMsg=_useState104[1];var _useState105=useState(false),_useState106=_slicedToArray(_useState105,2),msgLoad=_useState106[0],setMsgLoad=_useState106[1];var _useState107=useState(),_useState108=_slicedToArray(_useState107,2),alertUpdate=_useState108[0],setAlertUpdate=_useState108[1];var _useState109=useState([]),_useState110=_slicedToArray(_useState109,2),quickReplyText=_useState110[0],setQuickReplyText=_useState110[1];var _useState111=useState(false),_useState112=_slicedToArray(_useState111,2),addingContact=_useState112[0],setAddingContact=_useState112[1];var _useState113=useState(),_useState114=_slicedToArray(_useState113,2),confirmationText=_useState114[0],setConfirmationText=_useState114[1];var _useState115=useState([]),_useState116=_slicedToArray(_useState115,2),tutorList=_useState116[0],setTutorList=_useState116[1];var _useState117=useState(),_useState118=_slicedToArray(_useState117,2),tutorTagUpdated=_useState118[0],setTutorTagUpdated=_useState118[1];var _useState119=useState(),_useState120=_slicedToArray(_useState119,2),tutorRatingUpdated=_useState120[0],setTutorRatingUpdated=_useState120[1];var _useState121=useState(''),_useState122=_slicedToArray(_useState121,2),searchTutor=_useState122[0],setSearchTutor=_useState122[1];var _useState123=useState(),_useState124=_slicedToArray(_useState123,2),agentUpdated=_useState124[0],setAgentUpdated=_useState124[1];var _useState125=useState(localStorage.getItem('agent')),_useState126=_slicedToArray(_useState125,2),agentlabel=_useState126[0],setAgentlabel=_useState126[1];var _useState127=useState(),_useState128=_slicedToArray(_useState127,2),agentStatus=_useState128[0],setAgentStatus=_useState128[1];var _useState129=useState(0),_useState130=_slicedToArray(_useState129,2),tutorCount=_useState130[0],setTutorCount=_useState130[1];var _useState131=useState(1),_useState132=_slicedToArray(_useState131,2),tutorPage=_useState132[0],setTutorPage=_useState132[1];var _useState133=useState(false),_useState134=_slicedToArray(_useState133,2),tutorListLoading=_useState134[0],setTutorListLoading=_useState134[1];var _useState135=useState(0),_useState136=_slicedToArray(_useState135,2),convCount=_useState136[0],setConvCount=_useState136[1];var _useState137=useState(1),_useState138=_slicedToArray(_useState137,2),contactPage=_useState138[0],setContactPage=_useState138[1];var _useState139=useState(false),_useState140=_slicedToArray(_useState139,2),contactListLoading=_useState140[0],setContactListLoading=_useState140[1];var _useState141=useState(),_useState142=_slicedToArray(_useState141,2),searchContacts=_useState142[0],setSearchContacts=_useState142[1];var _useState143=useState(),_useState144=_slicedToArray(_useState143,2),interestedTutors=_useState144[0],setInterestedTutors=_useState144[1];var _useState145=useState(),_useState146=_slicedToArray(_useState145,2),newSessions=_useState146[0],setNewSessions=_useState146[1];var _useState147=useState(),_useState148=_slicedToArray(_useState147,2),clientPayment=_useState148[0],setClientPayment=_useState148[1];var _useState149=useState(),_useState150=_slicedToArray(_useState149,2),tutorPayout=_useState150[0],setTutorPayout=_useState150[1];var scrollRef=useRef();var listInnerRef=useRef();var uniqueValuesSet=new Set();var _useState151=useState(),_useState152=_slicedToArray(_useState151,2),chatLabels=_useState152[0],setChatLabels=_useState152[1];var _useState153=useState(false),_useState154=_slicedToArray(_useState153,2),loadingMsg=_useState154[0],setLoadingMsg=_useState154[1];var snackBarPos={vertical:'top',horizontal:'center'};var vertical=snackBarPos.vertical,horizontal=snackBarPos.horizontal;var _useState155=useState(''),_useState156=_slicedToArray(_useState155,2),alertText=_useState156[0],setAlertText=_useState156[1];var _useState157=useState(false),_useState158=_slicedToArray(_useState157,2),openSnackBar=_useState158[0],setOpenSnackBar=_useState158[1];var handleCloseSnackBar=function handleCloseSnackBar(event,reason){if(reason==='clickaway'){return;}setOpenSnackBar(false);};var handleLoadMoreMsgClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoadingMsg(true);_context.prev=1;_context.next=4;return axios.get(msgUrl+\"/\".concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id),{params:{page:page,limit:limit}},{headers:''});case 4:res=_context.sent;if(res.data.length===0){setOpenSnackBar(true);setAlertText('No more messages');}else{setMsgResponse(res.data);// setMessages(() =>\n//   res?.data?.messages?.items\n//     .filter((f) => f.eventType === 'message')\n//     .reverse()\n// );\nsetMessages([].concat(_toConsumableArray(res===null||res===void 0?void 0:res.data),_toConsumableArray(messages)));setLoadingMsg(false);setPage(page+1);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleLoadMoreMsgClick(){return _ref2.apply(this,arguments);};}();// for label\nvar handleLabelChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var payload;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setTaglabel(e.target.value);payload={tags:e.target.value};_context2.next=4;return axios.put(addLabelUrl+\"/\".concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id),payload,{headers:''});case 4:setTagUpdated(payload.tags);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLabelChange(_x){return _ref3.apply(this,arguments);};}();// agent assign\nvar handleAgentChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){var payload;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setAgentlabel(e.target.value);payload={agent:e.target.value};_context3.next=4;return axios.put(addAgentUrl+\"/\".concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id),payload,{headers:''});case 4:setAgentUpdated(payload.agent);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAgentChange(_x2){return _ref4.apply(this,arguments);};}();//desktop notification alert\nvar showNotification=function showNotification(){var notification_=new Notification('hey',{body:'A new message received',icon:'https://cdn2.iconfinder.com/data/icons/ios7-inspired-mac-icon-set/1024/messages_5122x.png'});notification_.onClick=function(e){window.location.href='http://google.com';};};// connection with socket\nuseEffect(function(){socket.current=io('/');// socket.current.on('connection', () => {\n//   console.log(\"Socket connected\");\n// });\n// socket.current.on('new_msg', (data) => {\n//   setMsg((draft) => {\n//     draft.res.push(data);\n//   });\n// });\nvar api=localStorage.getItem('api');var device=localStorage.getItem('device');socket.current.emit('user',{api:api,device:device});var agent=localStorage.getItem('agent');socket.current.emit('agent',agent);socket.current.on('getAlert',function(msg){// storeFiles(msg); //store incoming files data to excel\nsetAlertMsg([msg]);if(Notification.permission==='granted'&&msg!==null&&msg!==void 0&&msg.contacts){showNotification();}});// fetching msg from user through webhook\n// socket.current.emit(\"addUser\", 'userId');\nsocket.current.on('getUsers',function(msgs){console.log(msgs,'webhook');var startInd=msgs.length>19?msgs.length-19:0;setArrivalMessage(msgs.slice(startInd,msgs.length));// let upcomingMsg = msgs?.filter((i) => i.contacts);\n// let filteredMsg = msgs?.filter((i) => i.contacts && i?.contacts[0]?.wa_id == currentChat?.wa_id);\n});socket.current.on('save',function(saved){console.log(saved);setSaved(saved);});socket.current.on('update',function(update){console.log('count',update);setUpdated(update);});// socket.current.on('notification', (newNoti) => {\n//   console.log(newNoti);\n//   setNewNotification(newNoti);\n// });\nsocket.current.on('statusChanged',function(filtered){console.log(filtered);setStatus(function(){return filtered;});// setMsgId(id);\n});// razorpay notification\nsocket.current.on('rpayNoti',function(payments){console.log(payments,'rpayWebhook');setClientPayment(payments);});// razorpayX notification\nsocket.current.on('rpayXNoti',function(payX){console.log(payX,'rpayXWebhook');setTutorPayout(payX);});// interested tutor notification\nsocket.current.on('interestedTutors',function(interestedTutor){console.log(interestedTutor,'interestedTutors');setInterestedTutors(interestedTutor);});// new session notification\nsocket.current.on('newSession',function(newSession){console.log(newSession,'newSessions');setNewSessions(newSession);});//agent status fetch\nvar getAgentStatus=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(\"\".concat(localStorage.getItem('api'),\"/api/agent/getAgentStatus/\").concat(localStorage.getItem('agent')));case 3:res=_context4.sent;setAgentStatus(res.data.status);setChatLabels(res.data.labels);_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function getAgentStatus(){return _ref5.apply(this,arguments);};}();getAgentStatus();// socket.current.on('getAlert', (msg) => {\n//   console.log(msg);\n//   setAlertMsg([msg]);\n// });\n},[]);console.log(arrivalMessage);useEffect(function(){var _arrivalMessage;console.log(currentChat);((_arrivalMessage=arrivalMessage[arrivalMessage.length-1])===null||_arrivalMessage===void 0?void 0:_arrivalMessage.contacts)&&setNewMsgRec(function(){return arrivalMessage===null||arrivalMessage===void 0?void 0:arrivalMessage.filter(function(i){var _i$contacts$;return i.contacts&&(i===null||i===void 0?void 0:(_i$contacts$=i.contacts[0])===null||_i$contacts$===void 0?void 0:_i$contacts$.wa_id)==(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id);});});},[arrivalMessage,currentChat]);console.log(newMsgRec);//fetching all messages of a particular selected user\nuseEffect(function(){// setMsgLoad(true);\nvar getMessages=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(msgUrl+\"/\".concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id),{params:{page:0,limit:limit}},{headers:''});case 3:res=_context5.sent;console.log(res.data);setMsgResponse(res.data);// setMessages(() =>\n//   res?.data?.messages?.items\n//     .filter((f) => f.eventType === 'message')\n//     .reverse()\n// );\nsetMessages(_toConsumableArray(res===null||res===void 0?void 0:res.data));setMsgLoad(false);_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return function getMessages(){return _ref6.apply(this,arguments);};}();getMessages();return function(){setNewMsgRec([]);};},[currentChat,forwarded,sent]);//sending files\nvar handleFiles=function handleFiles(e){var files=e;setFile(e);var fileData=[];var reader=new FileReader();var myfiles=files;reader.readAsDataURL(myfiles);reader.onload=function(e){var formData={fileList:e.target.result};console.log(formData);setMyFiles([formData]);// setFile(formData);\n};console.log(files);};console.log(myFiles);console.log(file);var closeFileModal=function closeFileModal(){// show.current.style.display = 'none'\nsetMyFiles([]);setFile(null);setLoading(false);setErrMsg('');// setShowFile(false);\n};// // fetching msg from user through webhook\n// useEffect(() => {\n//   // socket.current.emit(\"addUser\", 'userId');\n//   socket.current.on('getUsers', (msgs) => {\n//     console.log(msgs);\n//     setArrivalMessage(msgs);\n//     // let upcomingMsg = msgs?.filter((i) => i.contacts);\n//     let filteredMsg = msgs?.filter((i) => i.contacts && i?.contacts[0]?.wa_id == currentChat?.wa_id);\n//     setNewMsgRec(filteredMsg.reverse());\n//     console.log(currentChat);\n//   });\n//   // socket.current.on('getAlert', (msg) => {\n//   //   console.log(msg);\n//   //   setAlertMsg([msg]);\n//   // });\n// }, []);\nconsole.log(newMsgRec);console.log(currentChat);// fetching contacts list\nuseEffect(function(){var agent=localStorage.getItem('agent');var getConversations=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var _res$data,_res$data2,res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.get(getCustomersUrl+\"/\".concat(agent),{params:{page:1,limit:20}},{headers:''});case 3:res=_context6.sent;console.log(res.status);// const filteredData = res?.data?.filter((i) => i.agent == agent);\n// let pinnedChat = res?.data?.filter((el) => el.pinContact === true);\n// let unPinnedChat = res?.data\n//   ?.filter((el) => el.pinContact === false)\n//   ?.sort((a, b) => {\n//     return b.timestamp - a.timestamp;\n//   });\nsetConversations(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.result);setConvCount(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.length);setSaved(null);setUpdated(null);_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0.Error);case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[0,11]]);}));return function getConversations(){return _ref7.apply(this,arguments);};}();getConversations();},[// arrivalMessage,\nsaved,updated,tagUpdated,agentUpdated,pinned,markChat,alertUpdate,sent]);console.log(conversations);// //fetching tutors list\n// useEffect(() => {\n//   const getTutors = async () => {\n//     try {\n//       const res = await axios.get('${localStorage.getItem('api')}/api/tutor/getTutors',\n//       {\n//         params: {\n//           page: 1,\n//           limit: 10,\n//         },\n//       },\n//       {\n//         headers: '',\n//       });\n//       setTutorList(res.data.result);\n//       setTutorCount(res.data.length);\n//     } catch (err) {\n//       console.log(err.Error);\n//     }\n//   }\n//   getTutors();\n// }, [tutorTagUpdated, tutorRatingUpdated])\nuseEffect(function(){setFinalMessage([]);setMsgLoad(true);setPage(1);},[currentChat]);console.log(forwarded);console.log(messages);console.log([].concat(_toConsumableArray(messages),_toConsumableArray(newMsgRec)));console.log(newMsgRec);// var ur = [{n: [{id: '123'}]}, {n: [{id: '123'}]}, {id: '123'}, {n: [{id: '13'}]}];\nfunction filteredArr(data,key){return _toConsumableArray(new Map(data.map(function(x){return[key(x),x];})).values());}// filtering duplicate messages\nuseEffect(function(){// let newArr = [...messages, ...newMsgRec];\nvar newArr=[].concat(_toConsumableArray(messages),_toConsumableArray(newMsgRec));// .filter(\n//   (f) => f.eventType === 'message' || f.eventType === 'broadcastMessage'\n// );\nconsole.log('newArr',newArr);setFinalMessage(function(){return filteredArr(newArr,function(it){return it.messages?it.messages[0].id:it.id;});});},[messages,newMsgRec]);//quick reply\nvar typeMsg=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(e){var response;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(e.target.value==='/')){_context7.next=11;break;}_context7.prev=1;_context7.next=4;return axios.get(quickReplyUrl);case 4:response=_context7.sent;setQuickReplyText(response===null||response===void 0?void 0:response.data);// setQuickReplyText(quickReplies);\n_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](1);console.log(_context7.t0);case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[1,8]]);}));return function typeMsg(_x3){return _ref8.apply(this,arguments);};}();var filteredQuickReplyText=newMessage.length>0&&quickReplyText.length>0?quickReplyText===null||quickReplyText===void 0?void 0:quickReplyText.filter(function(f){return f.shortcut.toLowerCase().indexOf(newMessage.toLowerCase())!==-1;}):null;console.log(quickReplyText);// sending messages\nvar handleSubmit=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(e){var payload,timeStamp,res;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:e.preventDefault();payload={recipient_type:'individual',to:currentChat.wa_id,conversationId:'',name:currentChat.name,from:currentChat.wa_id,wa_id:currentChat.wa_id,text:{body:newMessage},type:'text',data:'',isOwner:true};timeStamp={timestamp:Math.floor(new Date().getTime()/1000.0)};if(!newMessage){_context8.next=18;break;}_context8.prev=4;setNewMessage('');_context8.next=8;return axios.post(sendMsgUrl,payload,{headers:_objectSpread({},headerKey)});case 8:res=_context8.sent;//setMessages([...messages, res.data.message]);\n// setFinalMessage([...finalMessage, res?.data]);\nconsole.log('sendm',res);_context8.next=12;return axios.put(\"\".concat(contactUrl,\"/\").concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id),timeStamp,{headers:{'Content-Type':'application/json'}});case 12:setTimeout(function(){console.log('This will run after 1 second!');setSent(!sent);},0);_context8.next=18;break;case 15:_context8.prev=15;_context8.t0=_context8[\"catch\"](4);console.log(_context8.t0);case 18:case\"end\":return _context8.stop();}}},_callee8,null,[[4,15]]);}));return function handleSubmit(_x4){return _ref9.apply(this,arguments);};}();console.log('fmsg',finalMessage);// sending files\nvar handleFileSubmit=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(e){var res_,payload,res;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:e.preventDefault();setErrMsg('');setLoading(true);console.log(file.name);_context9.prev=4;_context9.next=7;return axios.post('https://waba.360dialog.io/v1/media',file,{headers:{'Content-Type':file.type=='application/x-zip-compressed'?'application/zip':file.type,'D360-API-KEY':apiKey||localStorage.getItem('api_key')}});case 7:res_=_context9.sent;payload={recipient_type:'individual',to:currentChat.wa_id,type:file.type.includes('image/')?'image':file.type.includes('video/')?'video':file.type.includes('audio/')?'audio':'document',data:{id:res_.data.media[0].id,caption:caption,filename:file.name},name:'',from:'',wa_id:currentChat.wa_id,timestamp:'',operatorName:'',isOwner:true,status:'',ticketId:'',eventType:''};_context9.next=11;return axios.post(sendFileUrl,payload,{headers:_objectSpread({},headerKey)});case 11:res=_context9.sent;//setMessages([...messages, res.data.message]);\n// setFinalMessage([...finalMessage, res.data.message]);\nconsole.log(res);// setUserId(currentChat?.wAid);\n// setMessageId(res.data.message.whatsappMessageId);\nsetNewMessage('');// setInterval(() => {\n//   console.log('This will run every second!');\n// }, 2000);\nsetTimeout(function(){console.log('This will run after 0.5 second!');setSent(!sent);setFileSent(+fileSent+1);},500);setMyFiles([]);setLoading(false);setCaption('');_context9.next=25;break;case 20:_context9.prev=20;_context9.t0=_context9[\"catch\"](4);setLoading(false);setErrMsg('Something went wrong!');console.log(_context9.t0);case 25:case\"end\":return _context9.stop();}}},_callee9,null,[[4,20]]);}));return function handleFileSubmit(_x5){return _ref10.apply(this,arguments);};}();// fetching template messages\n// const getTemplateMsg = async () => {\n//   try {\n//     const res = await axios.get(templateMsgUrl, {\n//       headers: { ...headerKey },\n//     });\n//     console.log({templateMsg:res.data.waba_templates});\n//     setTemplateMessage(res.data.waba_templates);\n//     setShowTemplateMsg(true);\n//   } catch (err) {\n//     console.log(err);\n//   }\n// };\nconsole.log(showTemplateMsg);var closeTemplateTab=function closeTemplateTab(){setShowTemplateMsg(false);};// // send template message\n// const handleSendTemplate = async (val) => {\n//   const payload = {\n//     name: currentChat.name,\n//     from: '',\n//     wa_id: currentChat.wa_id,\n//     templateName: val?.name,\n//     templateText: val?.components?.filter((j) => j?.type === 'BODY')[0]?.text,\n//     template: {\n//       namespace: val.namespace,\n//       language: val.language,\n//     },\n//     button: '',\n//     timestamp: '',\n//     operatorName: '',\n//     isOwner: true,\n//     status: '',\n//     ticketId: '',\n//     eventType: 'template',\n//   };\n//   try {\n//     const res = await axios.post(sendtemplateMsgUrl, payload, {\n//       headers: { ...headerKey },\n//     });\n//     console.log(res);\n//     setTimeout(() => {\n//       console.log('This will run after 1 second!');\n//       setSent(!sent);\n//     }, 100);\n//     setShowTemplateMsg(false);\n//   } catch (err) {\n//     console.log(err);\n//   }\n// };\n// send template message\nvar handleSendTemplate=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){var payload,res;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:payload={name:currentChat.name,from:'',wa_id:currentChat.wa_id,templateName:\"conversation_initiate\",templateText:\"Hi \".concat(currentChat.name,\", This is Tutorpoint.We want to start a conversation with you. Please reply as soon as you see this message.\"),template:{namespace:NAME_SPACE,language:\"en\"},button:'',timestamp:'',operatorName:'',isOwner:true,status:'',ticketId:'',eventType:'template'};_context10.prev=1;_context10.next=4;return axios.post(sendtemplateMsgUrl,payload,{headers:_objectSpread({},headerKey)});case 4:res=_context10.sent;console.log(res);setTimeout(function(){console.log('This will run after 1 second!');setSent(!sent);},100);setShowTemplateMsg(false);_context10.next=13;break;case 10:_context10.prev=10;_context10.t0=_context10[\"catch\"](1);console.log(_context10.t0);case 13:case\"end\":return _context10.stop();}}},_callee10,null,[[1,10]]);}));return function handleSendTemplate(){return _ref11.apply(this,arguments);};}();// adding note b/w messages\nvar handleSendNote=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(val){var payload,res;return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:payload={name:currentChat.name,from:'',wa_id:currentChat.wa_id,clientNotes:{noteText:newMessage,priority:val},button:'',timestamp:'',operatorName:'',isOwner:true,status:'',ticketId:'',eventType:'note'};_context11.prev=1;_context11.next=4;return axios.post(\"\".concat(localStorage.getItem('api'),\"/api/messages/addChatNote\"),payload,{headers:_objectSpread({},headerKey)});case 4:res=_context11.sent;console.log(res);setNewMessage('');setTimeout(function(){console.log('This will run after 1 second!');setSent(!sent);},100);// setShowTemplateMsg(false);\n_context11.next=13;break;case 10:_context11.prev=10;_context11.t0=_context11[\"catch\"](1);console.log(_context11.t0);case 13:case\"end\":return _context11.stop();}}},_callee11,null,[[1,10]]);}));return function handleSendNote(_x6){return _ref12.apply(this,arguments);};}();//Add contact\nvar addContact=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(){var payload,res;return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:setAddingContact(true);payload={name:addName,wa_id:\"+\".concat(addNumber)};_context12.prev=2;_context12.next=5;return axios.post(addContactUrl,payload,{headers:{}});case 5:res=_context12.sent;setConversations([].concat(_toConsumableArray(conversations),[res.data]));setAddNewContact(false);setAddName('');setAddNumber('');setAddingContact(false);_context12.next=17;break;case 13:_context12.prev=13;_context12.t0=_context12[\"catch\"](2);setConfirmationText('Failed to add this contact!');setAddingContact(false);case 17:case\"end\":return _context12.stop();}}},_callee12,null,[[2,13]]);}));return function addContact(){return _ref13.apply(this,arguments);};}();useEffect(function(){if(scrollView_&&scrollView||finalMessage.length<=20){var _scrollRef$current;(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollIntoView();}},[finalMessage,fileSent,currentChat]);var handleSearch=function handleSearch(e){setSearch(e.target.value);};var filteredCoversation=conversations;// filtered tutor list\n// const filteredTutorList = tutorList?.filter((f) => {\n//   let subject = f?.subjects?.find(element => element?.toLowerCase() == searchTutor?.toLowerCase());\n//   let tag = f?.tags?.find(element => element?.toLowerCase() == searchTutor?.toLowerCase());\n//   return (\n//     f.name.toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1 ||\n//     f.wa_id.toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1 ||\n//     f?.subjects?.toString().toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1 ||\n//     f?.tags?.toString().toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1\n//   );\n// });\nconsole.log(currentChat);var handleCloseTooltip=function handleCloseTooltip(){setOpenTooltip(false);};var handleOpenTooltip=function handleOpenTooltip(){setOpenTooltip(true);};var handleCloseTooltipForm=function handleCloseTooltipForm(){setOpenTooltipForm(false);};var handleOpenTooltipForm=function handleOpenTooltipForm(){setOpenTooltipForm(true);};var handleKeyPress=function handleKeyPress(e){if(e.key=='Enter'&&e.shiftKey){handleSubmit(e);}};var fetchMoreData=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(e){var bottom;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:// console.log(e.target.scrollHeight - e.target.scrollTop - e.target.clientHeight)\nsetScrollPosition(e.target.scrollTop);bottom=e.target.scrollTop;if(bottom===0){// TO SOMETHING HERE\nconsole.log('Reached bottom');// setPage(page + 1);\n// try {\n//   const res = await axios.get(\n//     msgUrl + `/${currentChat?.wa_id}`,\n//     {\n//       params: {\n//         page: page,\n//         limit: limit,\n//       },\n//     },\n//     {\n//       headers: '',\n//     }\n//   );\n//   console.log(res.data);\n//   setMsgResponse(res.data);\n//   // setMessages(() =>\n//   //   res?.data?.messages?.items\n//   //     .filter((f) => f.eventType === 'message')\n//   //     .reverse()\n//   // );\n//   setMessages([...res?.data, ...messages]);\n// } catch (err) {\n//   console.log(err);\n//  }\n}else if(e.target.scrollHeight-e.target.scrollTop-e.target.clientHeight<260){setScrollView(true);}else if(e.target.scrollHeight-e.target.scrollTop-e.target.clientHeight>=260){setScrollView(false);}case 3:case\"end\":return _context13.stop();}}},_callee13);}));return function fetchMoreData(_x7){return _ref14.apply(this,arguments);};}();// const handleTutorList = async (event, value) => {\n//   setTutorListLoading(true);\n//   setTutorPage(value);\n//   try {\n//     const res = await axios.get('${localStorage.getItem('api')}/api/tutor/getTutors',\n//       {\n//         params: {\n//           page: value,\n//           limit: 10,\n//         },\n//       },\n//       {\n//         headers: '',\n//       }\n//     );\n//     console.log(res.data);\n//     setTutorList(res.data.result);\n//     setTutorListLoading(false);\n//     // setLoadingMsg(false);\n//     // setPage(page + 1);\n//   } catch (err) {\n//     console.log(err);\n//   }\n// };\n// const handleSearchTutors = async (e) => {\n//   // setSearchTutor(e.target.value);\n//   if (e.key == 'Enter') {\n//     try {\n//       const res = await axios.get(`${localStorage.getItem('api')}/api/tutor/getTutors/${e.target.value}`,\n//         {\n//           params: {\n//             page: 1,\n//             limit: 10,\n//           },\n//         },\n//         {\n//           headers: '',\n//         }\n//       );\n//       console.log(res.data);\n//       setTutorList(res.data.result);\n//       setTutorCount(res.data.length);\n//       // setTutorListLoading(false);\n//       // setLoadingMsg(false);\n//       // setPage(page + 1);\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   }\n// };\nvar handleContactList=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(event,value){var agent,_res$data3,res,_res$data4,_res;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:agent=localStorage.getItem('agent');if(!searchContacts){_context14.next=20;break;}setContactListLoading(true);setContactPage(value);_context14.prev=4;_context14.next=7;return axios.get(getCustomersUrl+\"/\".concat(agent,\"/\").concat(searchContacts),{params:{page:value,limit:20}},{headers:''});case 7:res=_context14.sent;console.log(res.data);setConversations(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.result);setContactListLoading(false);// setLoadingMsg(false);\n// setPage(page + 1);\nsetSaved(null);setUpdated(null);_context14.next=18;break;case 15:_context14.prev=15;_context14.t0=_context14[\"catch\"](4);console.log(_context14.t0);case 18:_context14.next=36;break;case 20:setContactListLoading(true);setContactPage(value);_context14.prev=22;_context14.next=25;return axios.get(getCustomersUrl+\"/\".concat(agent),{params:{page:value,limit:20}},{headers:''});case 25:_res=_context14.sent;console.log(_res.data);setConversations(_res===null||_res===void 0?void 0:(_res$data4=_res.data)===null||_res$data4===void 0?void 0:_res$data4.result);setContactListLoading(false);// setLoadingMsg(false);\n// setPage(page + 1);\nsetSaved(null);setUpdated(null);_context14.next=36;break;case 33:_context14.prev=33;_context14.t1=_context14[\"catch\"](22);console.log(_context14.t1);case 36:case\"end\":return _context14.stop();}}},_callee14,null,[[4,15],[22,33]]);}));return function handleContactList(_x8,_x9){return _ref15.apply(this,arguments);};}();var handleSearchContacts=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(e){var agent,_res$data5,_res$data6,res;return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:agent=localStorage.getItem('agent');setSearchContacts(e.target.value);if(!(e.key=='Enter')){_context15.next=18;break;}setContactListLoading(true);_context15.prev=4;_context15.next=7;return axios.get(getCustomersUrl+\"/\".concat(agent,\"/\").concat(e.target.value),{params:{page:1,limit:20}},{headers:''});case 7:res=_context15.sent;console.log(res.data);setContactListLoading(false);setConversations(res===null||res===void 0?void 0:(_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.result);setConvCount(res===null||res===void 0?void 0:(_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.length);setContactPage(1);// setTutorListLoading(false);\n// setLoadingMsg(false);\n// setPage(page + 1);\n_context15.next=18;break;case 15:_context15.prev=15;_context15.t0=_context15[\"catch\"](4);console.log(_context15.t0);case 18:case\"end\":return _context15.stop();}}},_callee15,null,[[4,15]]);}));return function handleSearchContacts(_x10){return _ref16.apply(this,arguments);};}();var handleContactValidate=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(){var payload,res;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:payload={wa_id:\"+\".concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id)};_context16.prev=1;_context16.next=4;return axios.post(\"\".concat(localStorage.getItem('api'),\"/api/conversations/contactValidation\"),payload);case 4:res=_context16.sent;setOpenSnackBar(true);setAlertText(res.data.contacts[0].status+' contact');_context16.next=12;break;case 9:_context16.prev=9;_context16.t0=_context16[\"catch\"](1);console.log(_context16.t0);case 12:case\"end\":return _context16.stop();}}},_callee16,null,[[1,9]]);}));return function handleContactValidate(){return _ref17.apply(this,arguments);};}();var handleAgentStatus=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(status){var payload,res;return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:payload={status:status};_context17.prev=1;_context17.next=4;return axios.put(\"\".concat(localStorage.getItem('api'),\"/api/agent/updateAgentStatus/\").concat(localStorage.getItem('agent')),payload);case 4:res=_context17.sent;window.location.reload();_context17.next=11;break;case 8:_context17.prev=8;_context17.t0=_context17[\"catch\"](1);console.log(_context17.t0);case 11:case\"end\":return _context17.stop();}}},_callee17,null,[[1,8]]);}));return function handleAgentStatus(_x11){return _ref18.apply(this,arguments);};}();var logOutFunc=function logOutFunc(){localStorage.clear();window.location.reload();};var actions=[{icon:/*#__PURE__*/_jsx(PriorityHighIcon,{color:\"success\",onClick:function onClick(){return handleSendNote('low');}}),name:'Low priority'},{icon:/*#__PURE__*/_jsx(PriorityHighIcon,{color:\"primary\",onClick:function onClick(){return handleSendNote('medium');}}),name:'Medium priority'},{icon:/*#__PURE__*/_jsx(PriorityHighIcon,{color:\"error\",onClick:function onClick(){return handleSendNote('high');}}),name:'High priority'}];var deviceNo=localStorage.getItem('device');var agentName=localStorage.getItem('agent');// agent field update in all contacts\n// const [convag, setConvag] = useState([]);\n// useEffect(() => {\n//   const getAgg = async () => {\n//     try {\n//       const res = await axios.get(\n//         '${localStorage.getItem('api')}/api/conversations3/getContacts',\n//         {\n//           headers: '',\n//         }\n//       );\n//       setConvag(res?.data)\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   };\n//   getAgg();\n// }, [])\n// const agentUpdate = async () => {\n//   let count = '200100';\n//   for(let i = 0; i<convag.length; i++){\n//     let pay = {\n//       uid: count\n//     }\n//     await axios.put(`${localStorage.getItem('api')}/api/conversations3/customer/${convag[i].wa_id}`, pay);\n//     count = +count + 1;\n// }\n// }\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"messenger\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatMenu\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chat_header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profilePic\",src:\"/assets/person/noAvatar.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',fontSize:'16px',fontWeight:'600',height:'22px',lineHeight:'4px'}// onClick={agentUpdate}\n,children:[\"Device-\",deviceNo,' ',deviceNo==1?'(7761093194)':deviceNo==2?'(7091489698)':deviceNo==3?'(7761814102)':deviceNo==4?'(8777592248)':deviceNo==5?'(9065650479)':null,/*#__PURE__*/_jsx(\"p\",{style:{color:'#585858'},children:agentName})]}),localStorage.getItem('agent')!='Admin'&&agentStatus=='inactive'?/*#__PURE__*/_jsx(ToggleOffIcon,{style:{fontSize:'32px',color:'#50585C',cursor:'pointer',marginRight:'10px'},onClick:function onClick(){return handleAgentStatus('active');}}):localStorage.getItem('agent')!='Admin'&&agentStatus=='active'?/*#__PURE__*/_jsx(ToggleOnIcon,{style:{fontSize:'32px',color:'#00EC64',cursor:'pointer',marginRight:'10px'},onClick:function onClick(){return handleAgentStatus('inactive');}}):null,/*#__PURE__*/_jsx(\"div\",{style:{marginRight:'10px'},children:/*#__PURE__*/_jsx(NoteHistory,{setCurrentChat:setCurrentChat,setFinalMessage:setMessages,scrollRef:scrollRef,setScrollView_:setScrollView_,setPage:setPage})}),/*#__PURE__*/_jsx(PersonAddAltOutlinedIcon,{style:{fontSize:'32px',color:addNewContact?'#337DDD':'#50585C',cursor:'pointer',marginRight:'10px'},onClick:function onClick(){return setAddNewContact(true);}}),/*#__PURE__*/_jsx(LogoutIcon,{style:{cursor:'pointer',marginLeft:'5px'},onClick:logOutFunc})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:'2.3rem',padding:'6px 0px 6px 17px',backgroundColor:'#9DE1FE'},children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Search for users\",className:\"chatMenuInput\",onChange:function onChange(e){return handleSearch(e);},onKeyPress:handleSearchContacts})}),addNewContact&&/*#__PURE__*/_jsxs(\"div\",{style:{height:'8.4rem',padding:'20px 0px 20px 17px',backgroundColor:'#fff',border:'1px solid #b3b0b0',borderRadius:'3px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"addContactInput\",placeholder:\"Name\",value:addName,onChange:function onChange(e){return setAddName(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"addContactInput\",placeholder:\"WhatsApp Number (with country code)*\",value:addNumber,onChange:function onChange(e){return setAddNumber(e.target.value);},required:true}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,children:[addName&&addNumber&&!addingContact?/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"contained\",color:\"error\",onClick:function onClick(){return addContact();},children:\"save\"}):addingContact?/*#__PURE__*/_jsx(LoadingButton,{size:\"small\",loading:true,loadingPosition:\"start\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),variant:\"contained\",children:\"Save\"}):/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"contained\",color:\"error\",disabled:true,children:\"save\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",color:\"error\",onClick:function onClick(){setAddNewContact(false);setAddingContact(false);setConfirmationText('');},children:\"close\"}),/*#__PURE__*/_jsx(\"div\",{style:{alignSelf:'center',color:'red',fontSize:'13px'},children:confirmationText})]})]}),contactListLoading?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginTop:'100px'},children:/*#__PURE__*/_jsx(CircularProgress,{})}):/*#__PURE__*/_jsxs(\"div\",{className:\"chatMenuWrapper\",children:[filteredCoversation===null||filteredCoversation===void 0?void 0:filteredCoversation.map(function(c){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){setCurrentChat(c);setHighlighted(true);setShowTemplateMsg(false);setTaglabel('');setTagUpdated('');},children:/*#__PURE__*/_jsx(Conversation,{conversation:c,currentChat:currentChat,finalMessage:finalMessage,alertMsg:alertMsg,arrivalMessage:arrivalMessage,alert:alert// newNotification={newNotification}\n,setAlert:setAlert,msgCountUpdated:msgCountUpdated,setMsgCountUpdated:setMsgCountUpdated,setPinned:setPinned,setMarkChat:setMarkChat,setAlertUpdate:setAlertUpdate,apiUrl:apiUrl})});}),/*#__PURE__*/_jsx(Pagination,{style:{display:'flex',justifyContent:'center',marginTop:'15px'},count:Math.ceil(convCount/20),page:contactPage,onChange:handleContactList})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatBox\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chatBoxWrapper\",children:currentChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"currentChatHeader\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profilePic\",src:\"/assets/person/noAvatar.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\".concat(currentChat===null||currentChat===void 0?void 0:currentChat.name).concat(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id.slice(0,3))}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"5px\",cursor:'pointer'},children:[/*#__PURE__*/_jsx(AutorenewRoundedIcon,{fontSize:\"small\",onClick:handleContactValidate}),/*#__PURE__*/_jsx(Snackbar,{open:openSnackBar,autoHideDuration:2000,onClose:handleCloseSnackBar,anchorOrigin:{vertical:vertical,horizontal:horizontal},children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloseSnackBar,severity:\"info\",sx:{width:'100%'},children:alertText})},vertical+horizontal)]}),/*#__PURE__*/_jsx(\"div\",{className:\"select-list\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"taglabel\",id:\"taglabel\",value:taglabel,onChange:handleLabelChange,children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"Labels\"}),chatLabels===null||chatLabels===void 0?void 0:chatLabels.map(function(l){return/*#__PURE__*/_jsx(\"option\",{value:l,children:l});})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',fontWeight:'600'},children:[\"Label: \",currentChat.tags||taglabel||'--']}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',flex:'10%',justifyContent:'flex-end',marginRight:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{children:\"Assign to:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"select-list\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"agentlabel\",id:\"agentlabel\",value:agentlabel,className:\"select-list2\",onChange:handleAgentChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Chaitanya\",children:\"Chaitanya\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Nityananda\",children:\"Nityananda\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Advaita\",children:\"Advaita\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Abhay\",children:\"Abhay\"})]})})]})]}),(finalMessage===null||finalMessage===void 0?void 0:finalMessage.length)==0||msgLoad?/*#__PURE__*/_jsxs(\"div\",{className:\"chatBoxTop\",children:[/*#__PURE__*/_jsx(ReactLoading,{type:\"spinningBubbles\",color:\"#2ca6d6\",className:\"loadingIcon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"no_message\",children:(finalMessage===null||finalMessage===void 0?void 0:finalMessage.length)==0&&/*#__PURE__*/_jsx(\"p\",{className:\"no_messageText\",children:\"You have not started conversation with this person!\"})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatBoxTop\"// style={{display: 'flex', flexDirection: 'column-reverse'}}\n,onScroll:fetchMoreData,ref:listInnerRef,children:[finalMessage.length>0&&/*#__PURE__*/_jsx(\"div\",{style:_defineProperty({textAlign:'center'},\"textAlign\",'-webkit-center'),children:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(ReplayIcon,{onClick:handleLoadMoreMsgClick})})}),finalMessage.map(function(m,i,j){return/*#__PURE__*/_jsx(\"div\",{ref:scrollRef,children:/*#__PURE__*/_jsx(Message,{message:m,msgArr:j,own:m.owner,ownAlt:m.isOwner,setForward:setForward,mulForward:mulForward,setMulForward:setMulForward,setVisible:setVisible,setShowSelector:setShowSelector,showSelector:showSelector,apiUrl:apiUrl,status:status,msgId:msgId})},i);}),visible&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ForwardMsg,{conversations:conversations,visible:visible,setVisible:setVisible,forward:forward,forwarded:forwarded,setForwarded:setForwarded,mulForward:mulForward,setMulForward:setMulForward,setForwardMsg:setForwardMsg,apiKey:apiKey,convCount:convCount,contactPage:contactPage,handleContactList:handleContactList,contactListLoading:contactListLoading,getCustomersUrl:getCustomersUrl})})]})}),myFiles.length>0&&file?/*#__PURE__*/_jsx(\"div\",{id:\"id01\",className:\"modal_\",children:/*#__PURE__*/_jsx(\"form\",{className:\"modal-content_\",children:/*#__PURE__*/_jsxs(\"header\",{style:{height:'148px',backgroundColor:'#0B1929',position:'absolute',width:'450px',borderRadius:'5px',padding:'12px 12px 0px 12px'},children:[/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"medium\",style:{color:'#f2efef',margin:'12px 10px -5px 10px',cursor:'pointer'},onClick:closeFileModal}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px',margin:'0px 0px 0px 10px',fontWeight:'400',color:'#ffff'},children:\"Send the file\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px',color:'rgb(219 218 218)'},children:file===null||file===void 0?void 0:file.name}),/*#__PURE__*/_jsx(\"input\",{className:\"chatMessageInput\",placeholder:\"Add a caption...\",value:caption,onChange:function onChange(e){return setCaption(e.target.value);}}),/*#__PURE__*/_jsx(SendIcon,{style:{color:'#ffff',cursor:'pointer',float:'right',padding:'5px 10px',fontSize:'30px'},onClick:handleFileSubmit}),loading&&/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'10px'},children:/*#__PURE__*/_jsx(LinearProgress,{})}),errMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"errMsgText\",children:errMsg})]})})}):null,/*#__PURE__*/_jsxs(\"footer\",{className:\"chatBoxBottom\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'-webkit-fill-available',overflowY:'scroll',overflowX:'hidden',maxHeight:'199px'},children:filteredQuickReplyText&&(filteredQuickReplyText===null||filteredQuickReplyText===void 0?void 0:filteredQuickReplyText.map(function(i){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',justifyContent:'flex-start',backgroundColor:'rgb(223 223 223)',padding:'15px 20px',borderBottom:'1px solid rgb(209 209 209)',cursor:'pointer'},onClick:function onClick(){return setNewMessage(i.message);},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600',marginRight:'5px'},children:i.shortcut}),i.message]});}))}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'row',width:'-webkit-fill-available',height:'4.3rem',justifyContent:'space-evenly',alignItems:'center'},children:showSelector?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flex:'100%'},children:[/*#__PURE__*/_jsx(CloseIcon,{style:{flex:'5%',cursor:'pointer',fontSize:'30px',marginLeft:'5px'},onClick:function onClick(){setShowSelector(false);setMulForward([]);}}),/*#__PURE__*/_jsx(\"div\",{style:{flex:'90%'}}),/*#__PURE__*/_jsx(ReplyIcon,{style:{flex:'5%'},className:\"forward_final\",onClick:function onClick(){setVisible(true);setShowSelector(false);}})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"attachFile\",children:[/*#__PURE__*/_jsx(AttachFileIcon,{fontSize:\"medium\",className:\"attachButton\"}),/*#__PURE__*/_jsx(\"input\",{id:\"myFile\",name:\"myFile\",type:\"file\",className:\"attachInput\",onChange:function onChange(e){return handleFiles(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(Tooltip,{open:openTooltipForm,onClose:handleCloseTooltipForm,onOpen:handleOpenTooltipForm,title:\"CREATE FORM\",children:/*#__PURE__*/_jsx(FormCreation,{clientId:currentChat.uid,clientWaId:currentChat.wa_id,clientName:currentChat.name,agent:currentChat.agent})}),/*#__PURE__*/_jsx(Tooltip,{open:openTooltip,onClose:handleCloseTooltip,onOpen:handleOpenTooltip// title='SEND TEMPLATE'\n,title:\"INITIATE CONVERSATION\",children:/*#__PURE__*/_jsx(SpeakerNotesIcon,{className:\"templateMsg\"// onClick={getTemplateMsg}\n,onClick:handleSendTemplate})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"chatMessageInput\",placeholder:\"Type a message...\",value:newMessage,onChange:function onChange(e){setNewMessage(e.target.value);typeMsg(e);},onKeyPress:handleKeyPress}),newMessage.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\xA0\",/*#__PURE__*/_jsx(SendIcon,{fontSize:\"medium\",style:{fontSize:'29px'},className:\"chatSubmitButton\",onClick:handleSubmit}),/*#__PURE__*/_jsx(\"span\",{className:\"chatSubmitButton\",children:\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"}),/*#__PURE__*/_jsx(SpeedDial,{ariaLabel:\"SpeedDial openIcon example\",style:{left:'97%',height:'29px'},sx:{position:'absolute',bottom:16,right:16},icon:/*#__PURE__*/_jsx(NoteAddIcon,{fontSize:\"medium\",style:{fontSize:'26px',color:'#9B9B9B'},openIcon:/*#__PURE__*/_jsx(SendIcon,{fontSize:\"medium\",style:{fontSize:'26px',color:'#1977f2'}})}),children:actions.map(function(action){return/*#__PURE__*/_jsx(SpeedDialAction,{icon:action.icon,tooltipTitle:action.name},action.name);})})]}):/*#__PURE__*/_jsx(MicIcon,{fontSize:\"large\",className:\"micButton\"})]})})]})]}):/*#__PURE__*/_jsx(\"img\",{src:chatDemo// height='600'\n// width='600'\n,style:{alignSelf:'center',marginTop:'130px',height:'60vh'}})})}),/*#__PURE__*/_jsx(RightSec,{newSessions:newSessions,interestedTutors:interestedTutors,clientPayment:clientPayment,tutorPayout:tutorPayout})]})});};export default Messenger;","map":{"version":3,"names":["React","ReactLoading","Conversation","Message","useContext","useEffect","useRef","useState","axios","io","msgUrl","sendMsgUrl","sendFileUrl","templateMsgUrl","sendtemplateMsgUrl","addContactUrl","addLabelUrl","quickReplyUrl","contactUrl","addAgentUrl","getCustomersUrl","ForwardMsg","chatDemo","SendIcon","AttachFileIcon","MicIcon","MoreVertIcon","CloseIcon","Tooltip","SpeakerNotesIcon","PersonAddAltOutlinedIcon","Stack","Button","storeFilesUrl","headerKey","MoreMenu","InfiniteScroll","Menu","MenuItem","LinearProgress","ReplyIcon","LoadingButton","ReplayIcon","DropFile","SaveIcon","TutorContact","Pagination","CircularProgress","LogoutIcon","RightSec","DynamicFormIcon","FormCreation","AutorenewRoundedIcon","Snackbar","MuiAlert","NoteAddIcon","ToggleOffIcon","ToggleOnIcon","NoteHistory","IconButton","NAME_SPACE","SpeedDial","SpeedDialIcon","SpeedDialAction","FileCopyIcon","PrintIcon","ShareIcon","EditIcon","PriorityHighIcon","Alert","forwardRef","props","ref","Messenger","apiUrl","apiKey","conversations","setConversations","currentChat","setCurrentChat","msgResponse","setMsgResponse","messages","setMessages","newMsgRec","setNewMsgRec","finalMessage","setFinalMessage","textMsg","setTextMsg","messageId","setMessageId","newMessage","setNewMessage","arrivalMessage","setArrivalMessage","onlineUsers","setOnlineUsers","forward","setForward","forwarded","setForwarded","socket","userId","setUserId","visible","setVisible","search","setSearch","highlighted","setHighlighted","sent","setSent","alert","setAlert","alertMsg","setAlertMsg","myFiles","setMyFiles","showFile","setShowFile","file","setFile","fileSent","setFileSent","openTooltip","setOpenTooltip","openTooltipForm","setOpenTooltipForm","templateMessage","setTemplateMessage","showTemplateMsg","setShowTemplateMsg","caption","setCaption","saved","setSaved","updated","setUpdated","newNotification","setNewNotification","addNewContact","setAddNewContact","addName","setAddName","addNumber","setAddNumber","status","setStatus","msgId","setMsgId","page","setPage","limit","setLimit","taglabel","setTaglabel","tagUpdated","setTagUpdated","msgCountUpdated","setMsgCountUpdated","scrollView","setScrollView","scrollView_","setScrollView_","pinned","setPinned","markChat","setMarkChat","loading","setLoading","showSelector","setShowSelector","mulForward","setMulForward","errMsg","setErrMsg","scrollPosition","setScrollPosition","forwardMsg","setForwardMsg","msgLoad","setMsgLoad","alertUpdate","setAlertUpdate","quickReplyText","setQuickReplyText","addingContact","setAddingContact","confirmationText","setConfirmationText","tutorList","setTutorList","tutorTagUpdated","setTutorTagUpdated","tutorRatingUpdated","setTutorRatingUpdated","searchTutor","setSearchTutor","agentUpdated","setAgentUpdated","localStorage","getItem","agentlabel","setAgentlabel","agentStatus","setAgentStatus","tutorCount","setTutorCount","tutorPage","setTutorPage","tutorListLoading","setTutorListLoading","convCount","setConvCount","contactPage","setContactPage","contactListLoading","setContactListLoading","searchContacts","setSearchContacts","interestedTutors","setInterestedTutors","newSessions","setNewSessions","clientPayment","setClientPayment","tutorPayout","setTutorPayout","scrollRef","listInnerRef","uniqueValuesSet","Set","chatLabels","setChatLabels","loadingMsg","setLoadingMsg","snackBarPos","vertical","horizontal","alertText","setAlertText","openSnackBar","setOpenSnackBar","handleCloseSnackBar","event","reason","handleLoadMoreMsgClick","get","wa_id","params","headers","res","data","length","console","log","handleLabelChange","e","target","value","payload","tags","put","handleAgentChange","agent","showNotification","notification_","Notification","body","icon","onClick","window","location","href","current","api","device","emit","on","msg","permission","contacts","msgs","startInd","slice","update","filtered","payments","payX","interestedTutor","newSession","getAgentStatus","labels","filter","i","getMessages","handleFiles","files","fileData","reader","FileReader","myfiles","readAsDataURL","onload","formData","fileList","result","closeFileModal","getConversations","Error","filteredArr","key","Map","map","x","values","newArr","it","id","typeMsg","response","filteredQuickReplyText","f","shortcut","toLowerCase","indexOf","handleSubmit","preventDefault","recipient_type","to","conversationId","name","from","text","type","isOwner","timeStamp","timestamp","Math","floor","Date","getTime","post","setTimeout","handleFileSubmit","res_","includes","media","filename","operatorName","ticketId","eventType","closeTemplateTab","handleSendTemplate","templateName","templateText","template","namespace","language","button","handleSendNote","val","clientNotes","noteText","priority","addContact","scrollIntoView","handleSearch","filteredCoversation","handleCloseTooltip","handleOpenTooltip","handleCloseTooltipForm","handleOpenTooltipForm","handleKeyPress","shiftKey","fetchMoreData","scrollTop","bottom","scrollHeight","clientHeight","handleContactList","handleSearchContacts","handleContactValidate","handleAgentStatus","reload","logOutFunc","clear","actions","deviceNo","agentName","flex","fontSize","fontWeight","height","lineHeight","color","cursor","marginRight","marginLeft","padding","backgroundColor","border","borderRadius","alignSelf","display","justifyContent","marginTop","c","ceil","width","l","alignItems","textAlign","m","j","owner","position","margin","float","paddingTop","overflowY","overflowX","maxHeight","flexDirection","borderBottom","message","uid","left","right","action"],"sources":["C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/src/pages/messenger/Messenger.jsx"],"sourcesContent":["import React from 'react';\r\nimport './messenger.css';\r\nimport ReactLoading from 'react-loading';\r\nimport Conversation from '../../components/conversations/Conversation';\r\nimport Message from '../../components/message/Message';\r\nimport { useContext, useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\nimport {\r\n  msgUrl,\r\n  sendMsgUrl,\r\n  sendFileUrl,\r\n  templateMsgUrl,\r\n  sendtemplateMsgUrl,\r\n  addContactUrl,\r\n  addLabelUrl,\r\n  quickReplyUrl,\r\n  contactUrl,\r\n  addAgentUrl,\r\n} from '../../serviceUrls/Message-Services';\r\nimport { getCustomersUrl } from '../../serviceUrls/Customer-Services';\r\nimport ForwardMsg from '../../components/forwardConv/ForwardMsg';\r\nimport chatDemo from '../../assets/openChat2.png';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport SpeakerNotesIcon from '@material-ui/icons/SpeakerNotes';\r\nimport PersonAddAltOutlinedIcon from '@mui/icons-material/PersonAddAltOutlined';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\nimport { storeFilesUrl } from '../../serviceUrls/StoreFiles-Service';\r\nimport { headerKey } from '../../serviceUrls/ApiHeaderKey';\r\nimport MoreMenu from '../../components/dropDown/MoreMenu';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport LinearProgress from '@mui/material/LinearProgress';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport ReplayIcon from '@mui/icons-material/Replay';\r\nimport DropFile from '../../components/drag_dropFile/DropFile';\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport TutorContact from '../../components/tutorContacts/TutorContact';\r\nimport Pagination from '@mui/material/Pagination';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport RightSec from '../../components/rightComponent/RightSec';\r\nimport DynamicFormIcon from '@mui/icons-material/DynamicForm';\r\nimport FormCreation from '../../components/forms/FormCreation';\r\nimport AutorenewRoundedIcon from '@mui/icons-material/AutorenewRounded';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport MuiAlert from '@mui/material/Alert';\r\nimport NoteAddIcon from '@mui/icons-material/NoteAdd';\r\nimport ToggleOffIcon from '@mui/icons-material/ToggleOff';\r\nimport ToggleOnIcon from '@mui/icons-material/ToggleOn';\r\nimport NoteHistory from '../../components/notes/NoteHistory';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport { NAME_SPACE } from '../../utils/variables';\r\n\r\nimport SpeedDial from '@mui/material/SpeedDial';\r\nimport SpeedDialIcon from '@mui/material/SpeedDialIcon';\r\nimport SpeedDialAction from '@mui/material/SpeedDialAction';\r\nimport FileCopyIcon from '@mui/icons-material/FileCopyOutlined';\r\nimport PrintIcon from '@mui/icons-material/Print';\r\nimport ShareIcon from '@mui/icons-material/Share';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport PriorityHighIcon from '@mui/icons-material/PriorityHigh';\r\n\r\nconst Alert = React.forwardRef(function Alert(props, ref) {\r\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\r\n});\r\n\r\n\r\nconst Messenger = ({ apiUrl, apiKey }) => {\r\n  const [conversations, setConversations] = useState([]);\r\n  const [currentChat, setCurrentChat] = useState(null);\r\n  const [msgResponse, setMsgResponse] = useState();\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMsgRec, setNewMsgRec] = useState([]);\r\n  const [finalMessage, setFinalMessage] = useState([]);\r\n  const [textMsg, setTextMsg] = useState([]);\r\n  const [messageId, setMessageId] = useState(null);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [arrivalMessage, setArrivalMessage] = useState([]);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [forward, setForward] = useState({});\r\n  const [forwarded, setForwarded] = useState(false);\r\n  const socket = useRef();\r\n  const [userId, setUserId] = useState(null);\r\n  const [visible, setVisible] = useState();\r\n  const [search, setSearch] = useState('');\r\n  const [highlighted, setHighlighted] = useState(false);\r\n  const [sent, setSent] = useState(false);\r\n  const [alert, setAlert] = useState(0);\r\n  const [alertMsg, setAlertMsg] = useState([]);\r\n  const [myFiles, setMyFiles] = useState([]);\r\n  const [showFile, setShowFile] = useState();\r\n  const [file, setFile] = useState();\r\n  const [fileSent, setFileSent] = useState(0);\r\n  const [openTooltip, setOpenTooltip] = useState(false);\r\n  const [openTooltipForm, setOpenTooltipForm] = useState(false);\r\n  const [templateMessage, setTemplateMessage] = useState();\r\n  const [showTemplateMsg, setShowTemplateMsg] = useState(false);\r\n  const [caption, setCaption] = useState('');\r\n  const [saved, setSaved] = useState();\r\n  const [updated, setUpdated] = useState();\r\n  const [newNotification, setNewNotification] = useState();\r\n  const [addNewContact, setAddNewContact] = useState(false);\r\n  const [addName, setAddName] = useState();\r\n  const [addNumber, setAddNumber] = useState();\r\n  const [status, setStatus] = useState([]);\r\n  const [msgId, setMsgId] = useState();\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(20);\r\n  const [taglabel, setTaglabel] = useState();\r\n  const [tagUpdated, setTagUpdated] = useState();\r\n  const [msgCountUpdated, setMsgCountUpdated] = useState(false);\r\n  const [scrollView, setScrollView] = useState(true);\r\n  const [scrollView_, setScrollView_] = useState(true);\r\n  const [pinned, setPinned] = useState();\r\n  const [markChat, setMarkChat] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [showSelector, setShowSelector] = useState(false);\r\n  const [mulForward, setMulForward] = useState([]);\r\n  const [errMsg, setErrMsg] = useState();\r\n  const [scrollPosition, setScrollPosition] = useState();\r\n  const [forwardMsg, setForwardMsg] = useState();\r\n  const [msgLoad, setMsgLoad] = useState(false);\r\n  const [alertUpdate, setAlertUpdate] = useState();\r\n  const [quickReplyText, setQuickReplyText] = useState([]);\r\n  const [addingContact, setAddingContact] = useState(false);\r\n  const [confirmationText, setConfirmationText] = useState();\r\n  const [tutorList, setTutorList] = useState([]);\r\n  const [tutorTagUpdated, setTutorTagUpdated] = useState();\r\n  const [tutorRatingUpdated, setTutorRatingUpdated] = useState();\r\n  const [searchTutor, setSearchTutor] = useState('');\r\n  const [agentUpdated, setAgentUpdated] = useState();\r\n  const [agentlabel, setAgentlabel] = useState(localStorage.getItem('agent'));\r\n  const [agentStatus, setAgentStatus] = useState();\r\n  const [tutorCount, setTutorCount] = useState(0);\r\n  const [tutorPage, setTutorPage] = useState(1);\r\n  const [tutorListLoading, setTutorListLoading] = useState(false);\r\n  const [convCount, setConvCount] = useState(0);\r\n  const [contactPage, setContactPage] = useState(1);\r\n  const [contactListLoading, setContactListLoading] = useState(false);\r\n  const [searchContacts, setSearchContacts] = useState();\r\n  const [interestedTutors, setInterestedTutors] = useState();\r\n  const [newSessions, setNewSessions] = useState();\r\n  const [clientPayment, setClientPayment] = useState();\r\n  const [tutorPayout, setTutorPayout] = useState();\r\n  const scrollRef = useRef();\r\n  const listInnerRef = useRef();\r\n  const uniqueValuesSet = new Set();\r\n  const [chatLabels, setChatLabels] = useState();\r\n\r\n  const [loadingMsg, setLoadingMsg] = useState(false);\r\n\r\n  const snackBarPos = {\r\n    vertical: 'top',\r\n    horizontal: 'center'\r\n  }\r\n  const { vertical, horizontal } = snackBarPos;\r\n\r\n  const [alertText, setAlertText] = useState('')\r\n  const [openSnackBar, setOpenSnackBar] = useState(false);\r\n\r\n  const handleCloseSnackBar = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpenSnackBar(false);\r\n  };\r\n\r\n  const handleLoadMoreMsgClick = async () => {\r\n    setLoadingMsg(true);\r\n    try {\r\n      const res = await axios.get(\r\n        msgUrl + `/${currentChat?.wa_id}`,\r\n        {\r\n          params: {\r\n            page: page,\r\n            limit: limit,\r\n          },\r\n        },\r\n        {\r\n          headers: '',\r\n        }\r\n      );\r\n      if(res.data.length === 0) {\r\n        setOpenSnackBar(true);\r\n        setAlertText('No more messages');\r\n      }\r\n      else {\r\n        setMsgResponse(res.data);\r\n        // setMessages(() =>\r\n        //   res?.data?.messages?.items\r\n        //     .filter((f) => f.eventType === 'message')\r\n        //     .reverse()\r\n        // );\r\n        setMessages([...res?.data, ...messages]);\r\n        setLoadingMsg(false);\r\n        setPage(page + 1);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  // for label\r\n  const handleLabelChange = async (e) => {\r\n    setTaglabel(e.target.value);\r\n    const payload = {\r\n      tags: e.target.value,\r\n    };\r\n    await axios.put(addLabelUrl + `/${currentChat?.wa_id}`, payload, {\r\n      headers: '',\r\n    });\r\n    setTagUpdated(payload.tags);\r\n  };\r\n\r\n  // agent assign\r\n  const handleAgentChange = async (e) => {\r\n    setAgentlabel(e.target.value);\r\n    const payload = {\r\n      agent: e.target.value,\r\n    };\r\n    await axios.put(addAgentUrl + `/${currentChat?.wa_id}`, payload, {\r\n      headers: '',\r\n    });\r\n    setAgentUpdated(payload.agent);\r\n  };\r\n\r\n  //desktop notification alert\r\n  const showNotification = () => {\r\n    const notification_ = new Notification('hey', {\r\n      body: 'A new message received',\r\n      icon: 'https://cdn2.iconfinder.com/data/icons/ios7-inspired-mac-icon-set/1024/messages_5122x.png',\r\n    });\r\n\r\n    notification_.onClick = (e) => {\r\n      window.location.href = 'http://google.com';\r\n    };\r\n  };\r\n\r\n  // connection with socket\r\n  useEffect(() => {\r\n    socket.current = io('/');\r\n    // socket.current.on('connection', () => {\r\n    //   console.log(\"Socket connected\");\r\n    // });\r\n    // socket.current.on('new_msg', (data) => {\r\n    //   setMsg((draft) => {\r\n    //     draft.res.push(data);\r\n    //   });\r\n    // });\r\n    let api = localStorage.getItem('api');\r\n    let device = localStorage.getItem('device');\r\n\r\n    socket.current.emit('user', {\r\n      api: api,\r\n      device: device,\r\n    });\r\n\r\n    let agent = localStorage.getItem('agent');\r\n\r\n    socket.current.emit('agent', agent);\r\n\r\n    socket.current.on('getAlert', (msg) => {\r\n      // storeFiles(msg); //store incoming files data to excel\r\n      setAlertMsg([msg]);\r\n      if (Notification.permission === 'granted' && msg?.contacts) {\r\n        showNotification();\r\n      }\r\n    });\r\n\r\n    // fetching msg from user through webhook\r\n\r\n    // socket.current.emit(\"addUser\", 'userId');\r\n    socket.current.on('getUsers', (msgs) => {\r\n      console.log(msgs, 'webhook');\r\n      let startInd = msgs.length > 19 ? msgs.length - 19 : 0;\r\n      setArrivalMessage(msgs.slice(startInd, msgs.length));\r\n      // let upcomingMsg = msgs?.filter((i) => i.contacts);\r\n      // let filteredMsg = msgs?.filter((i) => i.contacts && i?.contacts[0]?.wa_id == currentChat?.wa_id);\r\n    });\r\n    socket.current.on('save', (saved) => {\r\n      console.log(saved);\r\n      setSaved(saved);\r\n    });\r\n    socket.current.on('update', (update) => {\r\n      console.log('count', update);\r\n      setUpdated(update);\r\n    });\r\n    // socket.current.on('notification', (newNoti) => {\r\n    //   console.log(newNoti);\r\n    //   setNewNotification(newNoti);\r\n    // });\r\n    socket.current.on('statusChanged', (filtered) => {\r\n      console.log(filtered);\r\n      setStatus(() => filtered);\r\n      // setMsgId(id);\r\n    });\r\n\r\n    // razorpay notification\r\n    socket.current.on('rpayNoti', (payments) => {\r\n      console.log(payments, 'rpayWebhook');\r\n      setClientPayment(payments);\r\n    });\r\n\r\n    // razorpayX notification\r\n    socket.current.on('rpayXNoti', (payX) => {\r\n      console.log(payX, 'rpayXWebhook');\r\n      setTutorPayout(payX);\r\n    });\r\n\r\n    // interested tutor notification\r\n    socket.current.on('interestedTutors', (interestedTutor) => {\r\n      console.log(interestedTutor, 'interestedTutors');\r\n      setInterestedTutors(interestedTutor);\r\n    });\r\n\r\n    // new session notification\r\n    socket.current.on('newSession', (newSession) => {\r\n      console.log(newSession, 'newSessions');\r\n      setNewSessions(newSession);\r\n    });\r\n\r\n    //agent status fetch\r\n    const getAgentStatus = async () => {\r\n      try {\r\n        const res = await axios.get(`${localStorage.getItem('api')}/api/agent/getAgentStatus/${localStorage.getItem('agent')}`);\r\n        setAgentStatus(res.data.status);\r\n        setChatLabels(res.data.labels);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getAgentStatus();\r\n    // socket.current.on('getAlert', (msg) => {\r\n    //   console.log(msg);\r\n    //   setAlertMsg([msg]);\r\n    // });\r\n  }, []);\r\n\r\n  console.log(arrivalMessage);\r\n\r\n  useEffect(() => {\r\n    console.log(currentChat);\r\n    arrivalMessage[arrivalMessage.length - 1]?.contacts &&\r\n      setNewMsgRec(() =>\r\n        arrivalMessage?.filter(\r\n          (i) => i.contacts && i?.contacts[0]?.wa_id == currentChat?.wa_id\r\n        )\r\n      );\r\n  }, [arrivalMessage, currentChat]);\r\n  console.log(newMsgRec);\r\n\r\n   //fetching all messages of a particular selected user\r\n   useEffect(() => {\r\n    // setMsgLoad(true);\r\n    const getMessages = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          msgUrl + `/${currentChat?.wa_id}`,\r\n          {\r\n            params: {\r\n              page: 0,\r\n              limit: limit,\r\n            },\r\n          },\r\n          {\r\n            headers: '',\r\n          }\r\n        );\r\n        console.log(res.data);\r\n        setMsgResponse(res.data);\r\n        // setMessages(() =>\r\n        //   res?.data?.messages?.items\r\n        //     .filter((f) => f.eventType === 'message')\r\n        //     .reverse()\r\n        // );\r\n        setMessages([...res?.data]);\r\n        setMsgLoad(false);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getMessages();\r\n    return () => {\r\n      setNewMsgRec([]);\r\n    };\r\n  }, [currentChat, forwarded, sent]);\r\n\r\n  //sending files\r\n  const handleFiles = (e) => {\r\n    let files = e;\r\n    setFile(e);\r\n    let fileData = [];\r\n    let reader = new FileReader();\r\n    let myfiles = files;\r\n    reader.readAsDataURL(myfiles);\r\n    reader.onload = (e) => {\r\n      let formData = { fileList: e.target.result };\r\n      console.log(formData);\r\n      setMyFiles([formData]);\r\n      // setFile(formData);\r\n    };\r\n\r\n    console.log(files);\r\n  };\r\n  console.log(myFiles);\r\n  console.log(file);\r\n\r\n  const closeFileModal = () => {\r\n    // show.current.style.display = 'none'\r\n    setMyFiles([]);\r\n    setFile(null);\r\n    setLoading(false);\r\n    setErrMsg('');\r\n    // setShowFile(false);\r\n  };\r\n\r\n  // // fetching msg from user through webhook\r\n  // useEffect(() => {\r\n  //   // socket.current.emit(\"addUser\", 'userId');\r\n  //   socket.current.on('getUsers', (msgs) => {\r\n  //     console.log(msgs);\r\n  //     setArrivalMessage(msgs);\r\n  //     // let upcomingMsg = msgs?.filter((i) => i.contacts);\r\n  //     let filteredMsg = msgs?.filter((i) => i.contacts && i?.contacts[0]?.wa_id == currentChat?.wa_id);\r\n  //     setNewMsgRec(filteredMsg.reverse());\r\n  //     console.log(currentChat);\r\n  //   });\r\n  //   // socket.current.on('getAlert', (msg) => {\r\n  //   //   console.log(msg);\r\n  //   //   setAlertMsg([msg]);\r\n  //   // });\r\n  // }, []);\r\n  console.log(newMsgRec);\r\n  console.log(currentChat);\r\n\r\n  // fetching contacts list\r\n  useEffect(() => {\r\n    let agent = localStorage.getItem('agent');\r\n    const getConversations = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          getCustomersUrl + `/${agent}`,\r\n          {\r\n            params: {\r\n              page: 1,\r\n              limit: 20,\r\n            },\r\n          },\r\n          {\r\n            headers: '',\r\n          }\r\n        );\r\n        console.log(res.status);\r\n        // const filteredData = res?.data?.filter((i) => i.agent == agent);\r\n        // let pinnedChat = res?.data?.filter((el) => el.pinContact === true);\r\n        // let unPinnedChat = res?.data\r\n        //   ?.filter((el) => el.pinContact === false)\r\n        //   ?.sort((a, b) => {\r\n        //     return b.timestamp - a.timestamp;\r\n        //   });\r\n        setConversations(res?.data?.result);\r\n        setConvCount(res?.data?.length);\r\n        setSaved(null);\r\n        setUpdated(null);\r\n      } catch (err) {\r\n        console.log(err.Error);\r\n      }\r\n    };\r\n    getConversations();\r\n  }, [\r\n    // arrivalMessage,\r\n    saved,\r\n    updated,\r\n    tagUpdated,\r\n    agentUpdated,\r\n    pinned,\r\n    markChat,\r\n    alertUpdate,\r\n    sent,\r\n  ]);\r\n\r\n  console.log(conversations);\r\n\r\n  // //fetching tutors list\r\n  // useEffect(() => {\r\n  //   const getTutors = async () => {\r\n  //     try {\r\n  //       const res = await axios.get('${localStorage.getItem('api')}/api/tutor/getTutors',\r\n  //       {\r\n  //         params: {\r\n  //           page: 1,\r\n  //           limit: 10,\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         headers: '',\r\n  //       });\r\n  //       setTutorList(res.data.result);\r\n  //       setTutorCount(res.data.length);\r\n  //     } catch (err) {\r\n  //       console.log(err.Error);\r\n  //     }\r\n  //   }\r\n  //   getTutors();\r\n  // }, [tutorTagUpdated, tutorRatingUpdated])\r\n\r\n  useEffect(() => {\r\n    setFinalMessage([]);\r\n    setMsgLoad(true);\r\n    setPage(1);\r\n  }, [currentChat]);\r\n\r\n  console.log(forwarded);\r\n\r\n  console.log(messages);\r\n  console.log([...messages, ...newMsgRec]);\r\n  console.log(newMsgRec);\r\n\r\n  // var ur = [{n: [{id: '123'}]}, {n: [{id: '123'}]}, {id: '123'}, {n: [{id: '13'}]}];\r\n  function filteredArr(data, key) {\r\n    return [...new Map(data.map((x) => [key(x), x])).values()];\r\n  }\r\n  // filtering duplicate messages\r\n  useEffect(() => {\r\n    // let newArr = [...messages, ...newMsgRec];\r\n    let newArr = [...messages, ...newMsgRec];\r\n    // .filter(\r\n    //   (f) => f.eventType === 'message' || f.eventType === 'broadcastMessage'\r\n    // );\r\n    console.log('newArr', newArr);\r\n    setFinalMessage(() =>\r\n      filteredArr(newArr, (it) => (it.messages ? it.messages[0].id : it.id))\r\n    );\r\n  }, [messages, newMsgRec]);\r\n\r\n  //quick reply\r\n  const typeMsg = async (e) => {\r\n    if (e.target.value === '/') {\r\n      try {\r\n        const response = await axios.get(quickReplyUrl);\r\n        setQuickReplyText(response?.data);\r\n        // setQuickReplyText(quickReplies);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const filteredQuickReplyText =\r\n    newMessage.length > 0 && quickReplyText.length > 0\r\n      ? quickReplyText?.filter((f) => {\r\n          return (\r\n            f.shortcut.toLowerCase().indexOf(newMessage.toLowerCase()) !== -1\r\n          );\r\n        })\r\n      : null;\r\n\r\n  console.log(quickReplyText);\r\n\r\n  // sending messages\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const payload = {\r\n      recipient_type: 'individual',\r\n      to: currentChat.wa_id,\r\n      conversationId: '',\r\n      name: currentChat.name,\r\n      from: currentChat.wa_id,\r\n      wa_id: currentChat.wa_id,\r\n      text: {\r\n        body: newMessage,\r\n      },\r\n      type: 'text',\r\n      data: '',\r\n      isOwner: true,\r\n    };\r\n    const timeStamp = {\r\n      timestamp: Math.floor(new Date().getTime() / 1000.0),\r\n    };\r\n    if (newMessage) {\r\n      try {\r\n        setNewMessage('');\r\n        const res = await axios.post(sendMsgUrl, payload, {\r\n          headers: { ...headerKey },\r\n        });\r\n        //setMessages([...messages, res.data.message]);\r\n        // setFinalMessage([...finalMessage, res?.data]);\r\n        console.log('sendm', res);\r\n        await axios.put(`${contactUrl}/${currentChat?.wa_id}`, timeStamp, {\r\n          headers: { 'Content-Type': 'application/json' },\r\n        });\r\n        setTimeout(() => {\r\n          console.log('This will run after 1 second!');\r\n          setSent(!sent);\r\n        }, 0);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  console.log('fmsg', finalMessage);\r\n\r\n  // sending files\r\n  const handleFileSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setErrMsg('');\r\n    setLoading(true);\r\n    console.log(file.name);\r\n    try {\r\n      const res_ = await axios.post(\r\n        'https://waba.360dialog.io/v1/media',\r\n        file,\r\n        {\r\n          headers: {\r\n            'Content-Type':\r\n              file.type == 'application/x-zip-compressed'\r\n                ? 'application/zip'\r\n                : file.type,\r\n            'D360-API-KEY': apiKey || localStorage.getItem('api_key'),\r\n          },\r\n        }\r\n      );\r\n      const payload = {\r\n        recipient_type: 'individual',\r\n        to: currentChat.wa_id,\r\n        type: file.type.includes('image/')\r\n          ? 'image'\r\n          : file.type.includes('video/')\r\n          ? 'video'\r\n          : file.type.includes('audio/')\r\n          ? 'audio'\r\n          : 'document',\r\n        data: {\r\n          id: res_.data.media[0].id,\r\n          caption: caption,\r\n          filename: file.name,\r\n        },\r\n        name: '',\r\n        from: '',\r\n        wa_id: currentChat.wa_id,\r\n        timestamp: '',\r\n        operatorName: '',\r\n        isOwner: true,\r\n        status: '',\r\n        ticketId: '',\r\n        eventType: '',\r\n      };\r\n      const res = await axios.post(sendFileUrl, payload, {\r\n        headers: { ...headerKey },\r\n      });\r\n      //setMessages([...messages, res.data.message]);\r\n      // setFinalMessage([...finalMessage, res.data.message]);\r\n      console.log(res);\r\n      // setUserId(currentChat?.wAid);\r\n      // setMessageId(res.data.message.whatsappMessageId);\r\n      setNewMessage('');\r\n      // setInterval(() => {\r\n      //   console.log('This will run every second!');\r\n      // }, 2000);\r\n      setTimeout(() => {\r\n        console.log('This will run after 0.5 second!');\r\n        setSent(!sent);\r\n        setFileSent(+fileSent + 1);\r\n      }, 500);\r\n      setMyFiles([]);\r\n      setLoading(false);\r\n      setCaption('');\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setErrMsg('Something went wrong!');\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  // fetching template messages\r\n  // const getTemplateMsg = async () => {\r\n  //   try {\r\n  //     const res = await axios.get(templateMsgUrl, {\r\n  //       headers: { ...headerKey },\r\n  //     });\r\n  //     console.log({templateMsg:res.data.waba_templates});\r\n  //     setTemplateMessage(res.data.waba_templates);\r\n  //     setShowTemplateMsg(true);\r\n  //   } catch (err) {\r\n  //     console.log(err);\r\n  //   }\r\n  // };\r\n\r\n  console.log(showTemplateMsg);\r\n\r\n  const closeTemplateTab = () => {\r\n    setShowTemplateMsg(false);\r\n  };\r\n\r\n  // // send template message\r\n  // const handleSendTemplate = async (val) => {\r\n  //   const payload = {\r\n  //     name: currentChat.name,\r\n  //     from: '',\r\n  //     wa_id: currentChat.wa_id,\r\n  //     templateName: val?.name,\r\n  //     templateText: val?.components?.filter((j) => j?.type === 'BODY')[0]?.text,\r\n  //     template: {\r\n  //       namespace: val.namespace,\r\n  //       language: val.language,\r\n  //     },\r\n  //     button: '',\r\n  //     timestamp: '',\r\n  //     operatorName: '',\r\n  //     isOwner: true,\r\n  //     status: '',\r\n  //     ticketId: '',\r\n  //     eventType: 'template',\r\n  //   };\r\n  //   try {\r\n  //     const res = await axios.post(sendtemplateMsgUrl, payload, {\r\n  //       headers: { ...headerKey },\r\n  //     });\r\n  //     console.log(res);\r\n  //     setTimeout(() => {\r\n  //       console.log('This will run after 1 second!');\r\n  //       setSent(!sent);\r\n  //     }, 100);\r\n  //     setShowTemplateMsg(false);\r\n  //   } catch (err) {\r\n  //     console.log(err);\r\n  //   }\r\n  // };\r\n\r\n   // send template message\r\n   const handleSendTemplate = async () => {\r\n    const payload = {\r\n      name: currentChat.name,\r\n      from: '',\r\n      wa_id: currentChat.wa_id,\r\n      templateName: \"conversation_initiate\",\r\n      templateText: `Hi ${currentChat.name}, This is Tutorpoint.We want to start a conversation with you. Please reply as soon as you see this message.`,\r\n      template: {\r\n        namespace: NAME_SPACE,\r\n        language: \"en\",\r\n      },\r\n      button: '',\r\n      timestamp: '',\r\n      operatorName: '',\r\n      isOwner: true,\r\n      status: '',\r\n      ticketId: '',\r\n      eventType: 'template',\r\n    };\r\n    try {\r\n      const res = await axios.post(sendtemplateMsgUrl, payload, {\r\n        headers: { ...headerKey },\r\n      });\r\n      console.log(res);\r\n      setTimeout(() => {\r\n        console.log('This will run after 1 second!');\r\n        setSent(!sent);\r\n      }, 100);\r\n      setShowTemplateMsg(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  // adding note b/w messages\r\n  const handleSendNote = async (val) => {\r\n    const payload = {\r\n      name: currentChat.name,\r\n      from: '',\r\n      wa_id: currentChat.wa_id,\r\n      clientNotes: {\r\n        noteText: newMessage,\r\n        priority: val\r\n      },\r\n      button: '',\r\n      timestamp: '',\r\n      operatorName: '',\r\n      isOwner: true,\r\n      status: '',\r\n      ticketId: '',\r\n      eventType: 'note',\r\n    };\r\n    try {\r\n      const res = await axios.post(`${localStorage.getItem('api')}/api/messages/addChatNote`, payload, {\r\n        headers: { ...headerKey },\r\n      });\r\n      console.log(res);\r\n      setNewMessage('');\r\n      setTimeout(() => {\r\n        console.log('This will run after 1 second!');\r\n        setSent(!sent);\r\n      }, 100);\r\n      // setShowTemplateMsg(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  //Add contact\r\n  const addContact = async () => {\r\n    setAddingContact(true);\r\n    const payload = {\r\n      name: addName,\r\n      wa_id: `+${addNumber}`,\r\n    };\r\n    try {\r\n      const res = await axios.post(addContactUrl, payload, {\r\n        headers: {},\r\n      });\r\n      setConversations([...conversations, res.data]);\r\n      setAddNewContact(false);\r\n      setAddName('');\r\n      setAddNumber('');\r\n      setAddingContact(false);\r\n    } catch (err) {\r\n      setConfirmationText('Failed to add this contact!');\r\n      setAddingContact(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (scrollView_ && scrollView || finalMessage.length <= 20) {\r\n      scrollRef.current?.scrollIntoView();\r\n    }\r\n  }, [finalMessage, fileSent, currentChat]);\r\n\r\n  const handleSearch = (e) => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  const filteredCoversation = conversations;\r\n\r\n  // filtered tutor list\r\n  // const filteredTutorList = tutorList?.filter((f) => {\r\n  //   let subject = f?.subjects?.find(element => element?.toLowerCase() == searchTutor?.toLowerCase());\r\n  //   let tag = f?.tags?.find(element => element?.toLowerCase() == searchTutor?.toLowerCase());\r\n  //   return (\r\n  //     f.name.toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1 ||\r\n  //     f.wa_id.toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1 ||\r\n  //     f?.subjects?.toString().toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1 ||\r\n  //     f?.tags?.toString().toLowerCase().indexOf(searchTutor.toLowerCase()) !== -1\r\n  //   );\r\n  // });\r\n\r\n  console.log(currentChat);\r\n  const handleCloseTooltip = () => {\r\n    setOpenTooltip(false);\r\n  };\r\n\r\n  const handleOpenTooltip = () => {\r\n    setOpenTooltip(true);\r\n  };\r\n\r\n  const handleCloseTooltipForm = () => {\r\n    setOpenTooltipForm(false);\r\n  };\r\n\r\n  const handleOpenTooltipForm = () => {\r\n    setOpenTooltipForm(true);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key == 'Enter' && e.shiftKey) {\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  const fetchMoreData = async (e) => {\r\n    // console.log(e.target.scrollHeight - e.target.scrollTop - e.target.clientHeight)\r\n    setScrollPosition(e.target.scrollTop);\r\n    const bottom = e.target.scrollTop;\r\n    if (bottom === 0) {\r\n      // TO SOMETHING HERE\r\n      console.log('Reached bottom');\r\n      // setPage(page + 1);\r\n      // try {\r\n      //   const res = await axios.get(\r\n      //     msgUrl + `/${currentChat?.wa_id}`,\r\n      //     {\r\n      //       params: {\r\n      //         page: page,\r\n      //         limit: limit,\r\n      //       },\r\n      //     },\r\n      //     {\r\n      //       headers: '',\r\n      //     }\r\n      //   );\r\n      //   console.log(res.data);\r\n      //   setMsgResponse(res.data);\r\n      //   // setMessages(() =>\r\n      //   //   res?.data?.messages?.items\r\n      //   //     .filter((f) => f.eventType === 'message')\r\n      //   //     .reverse()\r\n      //   // );\r\n      //   setMessages([...res?.data, ...messages]);\r\n      // } catch (err) {\r\n      //   console.log(err);\r\n      //  }\r\n    } else if (\r\n      e.target.scrollHeight - e.target.scrollTop - e.target.clientHeight <\r\n      260\r\n    ) {\r\n      setScrollView(true);\r\n    } else if (\r\n      e.target.scrollHeight - e.target.scrollTop - e.target.clientHeight >=\r\n      260\r\n    ) {\r\n      setScrollView(false);\r\n    }\r\n  };\r\n\r\n  // const handleTutorList = async (event, value) => {\r\n  //   setTutorListLoading(true);\r\n  //   setTutorPage(value);\r\n  //   try {\r\n  //     const res = await axios.get('${localStorage.getItem('api')}/api/tutor/getTutors',\r\n  //       {\r\n  //         params: {\r\n  //           page: value,\r\n  //           limit: 10,\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         headers: '',\r\n  //       }\r\n  //     );\r\n  //     console.log(res.data);\r\n  //     setTutorList(res.data.result);\r\n  //     setTutorListLoading(false);\r\n  //     // setLoadingMsg(false);\r\n  //     // setPage(page + 1);\r\n  //   } catch (err) {\r\n  //     console.log(err);\r\n  //   }\r\n  // };\r\n\r\n  // const handleSearchTutors = async (e) => {\r\n  //   // setSearchTutor(e.target.value);\r\n  //   if (e.key == 'Enter') {\r\n  //     try {\r\n  //       const res = await axios.get(`${localStorage.getItem('api')}/api/tutor/getTutors/${e.target.value}`,\r\n  //         {\r\n  //           params: {\r\n  //             page: 1,\r\n  //             limit: 10,\r\n  //           },\r\n  //         },\r\n  //         {\r\n  //           headers: '',\r\n  //         }\r\n  //       );\r\n  //       console.log(res.data);\r\n  //       setTutorList(res.data.result);\r\n  //       setTutorCount(res.data.length);\r\n  //       // setTutorListLoading(false);\r\n  //       // setLoadingMsg(false);\r\n  //       // setPage(page + 1);\r\n  //     } catch (err) {\r\n  //       console.log(err);\r\n  //     }\r\n  //   }\r\n  // };\r\n\r\n  const handleContactList = async (event, value) => {\r\n    let agent = localStorage.getItem('agent');\r\n    if (searchContacts) {\r\n      setContactListLoading(true);\r\n      setContactPage(value);\r\n      try {\r\n        const res = await axios.get(\r\n          getCustomersUrl + `/${agent}/${searchContacts}`,\r\n          {\r\n            params: {\r\n              page: value,\r\n              limit: 20,\r\n            },\r\n          },\r\n          {\r\n            headers: '',\r\n          }\r\n        );\r\n        console.log(res.data);\r\n        setConversations(res?.data?.result);\r\n        setContactListLoading(false);\r\n        // setLoadingMsg(false);\r\n        // setPage(page + 1);\r\n\r\n        setSaved(null);\r\n        setUpdated(null);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      setContactListLoading(true);\r\n      setContactPage(value);\r\n      try {\r\n        const res = await axios.get(\r\n          getCustomersUrl + `/${agent}`,\r\n          {\r\n            params: {\r\n              page: value,\r\n              limit: 20,\r\n            },\r\n          },\r\n          {\r\n            headers: '',\r\n          }\r\n        );\r\n        console.log(res.data);\r\n        setConversations(res?.data?.result);\r\n        setContactListLoading(false);\r\n        // setLoadingMsg(false);\r\n        // setPage(page + 1);\r\n\r\n        setSaved(null);\r\n        setUpdated(null);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSearchContacts = async (e) => {\r\n    let agent = localStorage.getItem('agent');\r\n    setSearchContacts(e.target.value);\r\n    if (e.key == 'Enter') {\r\n      setContactListLoading(true);\r\n      try {\r\n        const res = await axios.get(\r\n          getCustomersUrl + `/${agent}/${e.target.value}`,\r\n          {\r\n            params: {\r\n              page: 1,\r\n              limit: 20,\r\n            },\r\n          },\r\n          {\r\n            headers: '',\r\n          }\r\n        );\r\n        console.log(res.data);\r\n        setContactListLoading(false);\r\n        setConversations(res?.data?.result);\r\n        setConvCount(res?.data?.length);\r\n        setContactPage(1);\r\n        // setTutorListLoading(false);\r\n        // setLoadingMsg(false);\r\n        // setPage(page + 1);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleContactValidate = async () => {\r\n    let payload = {\r\n      wa_id: `+${currentChat?.wa_id}`,\r\n    }\r\n    try {\r\n      const res = await axios.post(`${localStorage.getItem('api')}/api/conversations/contactValidation`, payload);\r\n      setOpenSnackBar(true);\r\n      setAlertText(res.data.contacts[0].status + ' contact');\r\n    }\r\n    catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleAgentStatus = async (status) => {\r\n    let payload = {\r\n      status: status\r\n    }\r\n    try {\r\n      const res = await axios.put(`${localStorage.getItem('api')}/api/agent/updateAgentStatus/${localStorage.getItem('agent')}`, payload);\r\n      window.location.reload();\r\n    }\r\n    catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  const logOutFunc = () => {\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  };\r\n\r\n  const actions = [\r\n    { icon: <PriorityHighIcon color='success' onClick={() => handleSendNote('low')} />, name: 'Low priority' },\r\n    { icon: <PriorityHighIcon color='primary' onClick={() => handleSendNote('medium')} />, name: 'Medium priority' },\r\n    { icon: <PriorityHighIcon color='error' onClick={() => handleSendNote('high')} />, name: 'High priority' },\r\n  ];\r\n\r\n  let deviceNo = localStorage.getItem('device');\r\n  let agentName = localStorage.getItem('agent');\r\n\r\n  // agent field update in all contacts\r\n  // const [convag, setConvag] = useState([]);\r\n  // useEffect(() => {\r\n  //   const getAgg = async () => {\r\n  //     try {\r\n  //       const res = await axios.get(\r\n  //         '${localStorage.getItem('api')}/api/conversations3/getContacts',\r\n  //         {\r\n  //           headers: '',\r\n  //         }\r\n  //       );\r\n  //       setConvag(res?.data)\r\n  //     } catch (err) {\r\n  //       console.log(err);\r\n  //     }\r\n  //   };\r\n  //   getAgg();\r\n\r\n  // }, [])\r\n\r\n  // const agentUpdate = async () => {\r\n  //   let count = '200100';\r\n  //   for(let i = 0; i<convag.length; i++){\r\n  //     let pay = {\r\n  //       uid: count\r\n  //     }\r\n  //     await axios.put(`${localStorage.getItem('api')}/api/conversations3/customer/${convag[i].wa_id}`, pay);\r\n  //     count = +count + 1;\r\n  // }\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <div className='messenger'>\r\n        <div className='chatMenu'>\r\n          <header className='chat_header'>\r\n            <img\r\n              className='profilePic'\r\n              src='/assets/person/noAvatar.png'\r\n              alt=''\r\n            />\r\n            <div\r\n              style={{\r\n                flex: '1',\r\n                fontSize: '16px',\r\n                fontWeight: '600',\r\n                height: '22px',\r\n                lineHeight: '4px',\r\n              }}\r\n              // onClick={agentUpdate}\r\n            >\r\n              Device-{deviceNo}{' '}\r\n              {deviceNo == 1\r\n                ? '(7761093194)'\r\n                : deviceNo == 2\r\n                ? '(7091489698)'\r\n                : deviceNo == 3\r\n                ? '(7761814102)'\r\n                : deviceNo == 4\r\n                ? '(8777592248)'\r\n                : deviceNo == 5\r\n                ? '(9065650479)'\r\n                : null}\r\n              <p style={{ color: '#585858' }}>{agentName}</p>\r\n            </div>\r\n            {localStorage.getItem('agent') != 'Admin' && agentStatus == 'inactive' ? <ToggleOffIcon\r\n              style={{\r\n                fontSize: '32px',\r\n                color: '#50585C',\r\n                cursor: 'pointer',\r\n                marginRight: '10px',\r\n              }}\r\n              onClick={() => handleAgentStatus('active')}\r\n            /> : localStorage.getItem('agent') != 'Admin' && agentStatus == 'active' ?\r\n            <ToggleOnIcon\r\n              style={{\r\n                fontSize: '32px',\r\n                color: '#00EC64',\r\n                cursor: 'pointer',\r\n                marginRight: '10px',\r\n              }}\r\n              onClick={() => handleAgentStatus('inactive')}\r\n            /> : null}\r\n            <div\r\n              style={{\r\n              marginRight: '10px',\r\n            }}\r\n            >\r\n              <NoteHistory setCurrentChat = {setCurrentChat} setFinalMessage = {setMessages} scrollRef={scrollRef} setScrollView_={setScrollView_} setPage = {setPage} />\r\n            </div>\r\n            <PersonAddAltOutlinedIcon\r\n              style={{\r\n                fontSize: '32px',\r\n                color: addNewContact ? '#337DDD' : '#50585C',\r\n                cursor: 'pointer',\r\n                marginRight: '10px',\r\n              }}\r\n              onClick={() => setAddNewContact(true)}\r\n            />\r\n            {/* <MoreVertIcon\r\n              style={{\r\n                fontSize: '25px',\r\n                color: '#50585C',\r\n                cursor: 'pointer',\r\n                marginRight: '-10px',\r\n              }}\r\n            /> */}\r\n            <LogoutIcon\r\n              style={{ cursor: 'pointer', marginLeft: '5px' }}\r\n              onClick={logOutFunc}\r\n            />\r\n          </header>\r\n          <div\r\n            style={{\r\n              height: '2.3rem',\r\n              padding: '6px 0px 6px 17px',\r\n              backgroundColor: '#9DE1FE',\r\n            }}\r\n          >\r\n            <input\r\n              placeholder='Search for users'\r\n              className='chatMenuInput'\r\n              onChange={(e) => handleSearch(e)}\r\n              onKeyPress={handleSearchContacts}\r\n            />\r\n          </div>\r\n          {addNewContact && (\r\n            <div\r\n              style={{\r\n                height: '8.4rem',\r\n                padding: '20px 0px 20px 17px',\r\n                backgroundColor: '#fff',\r\n                border: '1px solid #b3b0b0',\r\n                borderRadius: '3px',\r\n              }}\r\n            >\r\n              <input\r\n                type='text'\r\n                className='addContactInput'\r\n                placeholder='Name'\r\n                value={addName}\r\n                onChange={(e) => setAddName(e.target.value)}\r\n                required\r\n              />\r\n              <input\r\n                type='number'\r\n                className='addContactInput'\r\n                placeholder='WhatsApp Number (with country code)*'\r\n                value={addNumber}\r\n                onChange={(e) => setAddNumber(e.target.value)}\r\n                required\r\n              />\r\n              <Stack direction='row' spacing={2}>\r\n                {addName && addNumber && !addingContact ? (\r\n                  <Button\r\n                    size='small'\r\n                    variant='contained'\r\n                    color='error'\r\n                    onClick={() => addContact()}\r\n                  >\r\n                    save\r\n                  </Button>\r\n                ) : addingContact ? (\r\n                  <LoadingButton\r\n                    size='small'\r\n                    loading\r\n                    loadingPosition='start'\r\n                    startIcon={<SaveIcon />}\r\n                    variant='contained'\r\n                  >\r\n                    Save\r\n                  </LoadingButton>\r\n                ) : (\r\n                  <Button\r\n                    size='small'\r\n                    variant='contained'\r\n                    color='error'\r\n                    disabled\r\n                  >\r\n                    save\r\n                  </Button>\r\n                )}\r\n\r\n                <Button\r\n                  size='small'\r\n                  variant='outlined'\r\n                  color='error'\r\n                  onClick={() => {\r\n                    setAddNewContact(false);\r\n                    setAddingContact(false);\r\n                    setConfirmationText('');\r\n                  }}\r\n                >\r\n                  close\r\n                </Button>\r\n                <div\r\n                  style={{\r\n                    alignSelf: 'center',\r\n                    color: 'red',\r\n                    fontSize: '13px',\r\n                  }}\r\n                >\r\n                  {confirmationText}\r\n                </div>\r\n              </Stack>\r\n            </div>\r\n          )}\r\n          {contactListLoading ? (\r\n            <div\r\n              style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                marginTop: '100px',\r\n              }}\r\n            >\r\n              <CircularProgress />\r\n            </div>\r\n          ) : (\r\n            <div className='chatMenuWrapper'>\r\n              {filteredCoversation?.map((c) => (\r\n                <div\r\n                  onClick={() => {\r\n                    setCurrentChat(c);\r\n                    setHighlighted(true);\r\n                    setShowTemplateMsg(false);\r\n                    setTaglabel('');\r\n                    setTagUpdated('');\r\n                  }}\r\n                >\r\n                  <Conversation\r\n                    conversation={c}\r\n                    currentChat={currentChat}\r\n                    finalMessage={finalMessage}\r\n                    alertMsg={alertMsg}\r\n                    arrivalMessage={arrivalMessage}\r\n                    alert={alert}\r\n                    // newNotification={newNotification}\r\n                    setAlert={setAlert}\r\n                    msgCountUpdated={msgCountUpdated}\r\n                    setMsgCountUpdated={setMsgCountUpdated}\r\n                    setPinned={setPinned}\r\n                    setMarkChat={setMarkChat}\r\n                    setAlertUpdate={setAlertUpdate}\r\n                    apiUrl={apiUrl}\r\n                  />\r\n                </div>\r\n              ))}\r\n              <Pagination\r\n                style={{\r\n                  display: 'flex',\r\n                  justifyContent: 'center',\r\n                  marginTop: '15px',\r\n                }}\r\n                count={Math.ceil(convCount / 20)}\r\n                page={contactPage}\r\n                onChange={handleContactList}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className='chatBox'>\r\n          <div className='chatBoxWrapper'>\r\n            {currentChat ? (\r\n              <>\r\n                <header className='currentChatHeader'>\r\n                  <img\r\n                    className='profilePic'\r\n                    src='/assets/person/noAvatar.png'\r\n                    alt=''\r\n                  />\r\n                  <div>\r\n                    {`${currentChat?.name}${currentChat?.wa_id.slice(\r\n                    0,\r\n                    3\r\n                  )}`}\r\n                  </div>\r\n                  <div style={{marginLeft: \"5px\", cursor: 'pointer'}}>\r\n                    <AutorenewRoundedIcon fontSize='small' onClick={handleContactValidate} />\r\n                    <Snackbar open={openSnackBar} autoHideDuration={2000} onClose={handleCloseSnackBar} anchorOrigin={{ vertical, horizontal }} key={vertical + horizontal}>\r\n                      <Alert onClose={handleCloseSnackBar} severity=\"info\" sx={{ width: '100%' }}>\r\n                        {alertText}\r\n                      </Alert>\r\n                    </Snackbar>\r\n                  </div>\r\n                  <div className='select-list'>\r\n                    <select\r\n                      name='taglabel'\r\n                      id='taglabel'\r\n                      value={taglabel}\r\n                      onChange={handleLabelChange}\r\n                    >\r\n                      <option selected value=''>\r\n                        Labels\r\n                      </option>\r\n                      {chatLabels?.map((l) => <option value={l}>{l}</option>)}\r\n                      {/* <option value='Old Client'>Old Client</option>\r\n                      <option value='New Client'>New Client</option>\r\n                      <option value='High Price Client'>High Price Client</option>\r\n                      <option value='Low Price Client'>Low Price Client</option>\r\n                      <option value='Call'>Call</option>\r\n                      <option value='Tutor'>Tutor</option>\r\n                      <option value='Full Course'>Full Course</option> */}\r\n                       {/*<option value='Tutor pay pending'>\r\n                        Tutor pay pending\r\n                      </option>\r\n                      <option value='Client payment pending'>\r\n                        Client payment pending\r\n                      </option>\r\n                      <option value='Session today'>Session today</option>\r\n                      <option value='Session tomorrow'>Session tomorrow</option>\r\n                      <option value='Assignment pending'>\r\n                        Assignment pending\r\n                      </option>\r\n                      <option value='Tutors notified'>Tutors notified</option>\r\n                      <option value='Tutor is working'>Tutor is working</option>\r\n                      <option value='Take payment'>Take payment</option>\r\n                      <option value='Pay tutor'>Pay tutor</option>\r\n                      <option value='More work available'>\r\n                        More work available\r\n                      </option>\r\n                      <option value='Not available tomorrow'>\r\n                        Not available tomorrow\r\n                      </option> */}\r\n                    </select>\r\n                    {/* {taglabel === 'other' ? (\r\n                  <input\r\n                    type='text'\r\n                    name='other_degree'\r\n                    style={{marginLeft: '20px', width: '70px'}}\r\n                    placeholder='tag name'\r\n                    // value={other_degree}\r\n                    // onChange={handleOther}\r\n                    // autoComplete='none'\r\n                    // required\r\n                  />\r\n                ) : null} */}\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      fontSize: '14px',\r\n                      fontWeight: '600',\r\n                    }}\r\n                  >\r\n                    Label: {currentChat.tags || taglabel || '--'}\r\n                  </div>\r\n                  {/* <div style={{ display: 'flex', marginLeft: '460px' }}>\r\n                    <MoreVertIcon style={{ alignSelf: 'center' }} />\r\n                  </div> */}\r\n                  <div\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      flex: '10%',\r\n                      justifyContent: 'flex-end',\r\n                      marginRight: '15px',\r\n                    }}\r\n                  >\r\n                    <div>Assign to:</div>\r\n                    <div className='select-list'>\r\n                      <select\r\n                        name='agentlabel'\r\n                        id='agentlabel'\r\n                        value={agentlabel}\r\n                        className='select-list2'\r\n                        onChange={handleAgentChange}\r\n                      >\r\n                        <option value='Admin'>Admin</option>\r\n                        <option value='Chaitanya'>Chaitanya</option>\r\n                        <option value='Nityananda'>Nityananda</option>\r\n                        <option value='Advaita'>Advaita</option>\r\n                        <option value='Abhay'>Abhay</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </header>\r\n                {finalMessage?.length == 0 || msgLoad ? (\r\n                  <div className='chatBoxTop'>\r\n                    <ReactLoading\r\n                      type='spinningBubbles'\r\n                      color='#2ca6d6'\r\n                      className='loadingIcon'\r\n                    />\r\n                    <div className='no_message'>\r\n                      {finalMessage?.length == 0 && (\r\n                        <p className='no_messageText'>\r\n                          You have not started conversation with this person!\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <div\r\n                      className='chatBoxTop'\r\n                      // style={{display: 'flex', flexDirection: 'column-reverse'}}\r\n                      onScroll={fetchMoreData}\r\n                      ref={listInnerRef}\r\n                    >\r\n                      {finalMessage.length > 0 && (\r\n                        <div\r\n                          style={{\r\n                            textAlign: 'center',\r\n                            textAlign: '-webkit-center',\r\n                          }}\r\n                        >\r\n                          {/* <LoadingButton\r\n                            onClick={handleLoadMoreMsgClick}\r\n                            endIcon={<ReplayIcon />}\r\n                            loading={loadingMsg}\r\n                            loadingPosition='end'\r\n                            variant='outlined'\r\n                          >\r\n                            Load more\r\n                          </LoadingButton> */}\r\n                          <IconButton><ReplayIcon onClick={handleLoadMoreMsgClick} /></IconButton>\r\n                        </div>\r\n                      )}\r\n                      {finalMessage.map((m, i, j) => (\r\n                        <div ref={scrollRef} key={i}>\r\n                          <Message\r\n                            message={m}\r\n                            msgArr={j}\r\n                            own={m.owner}\r\n                            ownAlt={m.isOwner}\r\n                            setForward={setForward}\r\n                            mulForward={mulForward}\r\n                            setMulForward={setMulForward}\r\n                            setVisible={setVisible}\r\n                            setShowSelector={setShowSelector}\r\n                            showSelector={showSelector}\r\n                            apiUrl={apiUrl}\r\n                            status={status}\r\n                            msgId={msgId}\r\n                          />\r\n                        </div>\r\n                      ))}\r\n\r\n                      {visible && (\r\n                        <div>\r\n                          <ForwardMsg\r\n                            conversations={conversations}\r\n                            visible={visible}\r\n                            setVisible={setVisible}\r\n                            forward={forward}\r\n                            forwarded={forwarded}\r\n                            setForwarded={setForwarded}\r\n                            mulForward={mulForward}\r\n                            setMulForward={setMulForward}\r\n                            setForwardMsg={setForwardMsg}\r\n                            apiKey={apiKey}\r\n                            convCount={convCount}\r\n                            contactPage={contactPage}\r\n                            handleContactList={handleContactList}\r\n                            contactListLoading={contactListLoading}\r\n                            getCustomersUrl={getCustomersUrl}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {myFiles.length > 0 && file ? (\r\n                  <div id='id01' className='modal_'>\r\n                    <form className='modal-content_'>\r\n                      <header\r\n                        style={{\r\n                          height: '148px',\r\n                          backgroundColor: '#0B1929',\r\n                          position: 'absolute',\r\n                          width: '450px',\r\n                          borderRadius: '5px',\r\n                          padding: '12px 12px 0px 12px',\r\n                        }}\r\n                      >\r\n                        <CloseIcon\r\n                          fontSize='medium'\r\n                          style={{\r\n                            color: '#f2efef',\r\n                            margin: '12px 10px -5px 10px',\r\n                            cursor: 'pointer',\r\n                          }}\r\n                          onClick={closeFileModal}\r\n                        />\r\n                        <span\r\n                          style={{\r\n                            fontSize: '18px',\r\n                            margin: '0px 0px 0px 10px',\r\n                            fontWeight: '400',\r\n                            color: '#ffff',\r\n                          }}\r\n                        >\r\n                          Send the file\r\n                        </span>\r\n                        {/* <iframe src={myFiles[0].fileList} height=\"200\" width=\"300\" title=\"description\"></iframe> */}\r\n                        <div\r\n                          style={{ padding: '15px', color: 'rgb(219 218 218)' }}\r\n                        >\r\n                          {file?.name}\r\n                        </div>\r\n                        <input\r\n                          className='chatMessageInput'\r\n                          placeholder='Add a caption...'\r\n                          value={caption}\r\n                          onChange={(e) => setCaption(e.target.value)}\r\n                        />\r\n                        <SendIcon\r\n                          style={{\r\n                            color: '#ffff',\r\n                            cursor: 'pointer',\r\n                            float: 'right',\r\n                            padding: '5px 10px',\r\n                            fontSize: '30px',\r\n                          }}\r\n                          onClick={handleFileSubmit}\r\n                        />\r\n                        {loading && (\r\n                          <div style={{ paddingTop: '10px' }}>\r\n                            <LinearProgress />\r\n                          </div>\r\n                        )}\r\n                        {errMsg && <div className='errMsgText'>{errMsg}</div>}\r\n                      </header>\r\n                    </form>\r\n                  </div>\r\n                ) : null}\r\n                <footer className='chatBoxBottom'>\r\n\r\n                  {/* show templates */}\r\n                  {/* <div\r\n                    style={{\r\n                      width: '-webkit-fill-available',\r\n                      // overflowY: 'scroll',\r\n                      // overflowX: 'hidden',\r\n                      maxHeight: '199px',\r\n                    }}\r\n                  >\r\n                    {showTemplateMsg ? (\r\n                      <div>\r\n                        <header\r\n                          style={{\r\n                            display: 'flex',\r\n                            flexDirection: 'row',\r\n                            backgroundColor: '#ffff',\r\n                            height: '3rem',\r\n                            borderBottom: '1px solid #f0f0f0',\r\n                          }}\r\n                        >\r\n                          <CloseIcon\r\n                            fontSize='medium'\r\n                            style={{\r\n                              color: 'gray',\r\n                              margin: '12px 16px 0px',\r\n                              cursor: 'pointer',\r\n                            }}\r\n                            onClick={closeTemplateTab}\r\n                          />\r\n                          <div\r\n                            style={{ display: 'flex', alignItems: 'center' }}\r\n                          >\r\n                            Choose Template\r\n                          </div>\r\n                        </header>\r\n                        <div\r\n                          style={{\r\n                            height: '150px',\r\n                            zIndex: '1',\r\n                            // marginBottom: '-46px',\r\n                            backgroundColor: '#ffff',\r\n                            overflowY: 'scroll',\r\n                            overflowX: 'hidden',\r\n                          }}\r\n                        >\r\n                          {templateMessage &&\r\n                            templateMessage?.map((i) => {\r\n                              return (\r\n                                <>\r\n                                  {i.status === 'approved' ? (\r\n                                    <div\r\n                                      className='templateCard'\r\n                                      onClick={() => handleSendTemplate(i)}\r\n                                    >\r\n                                      <p\r\n                                        style={{\r\n                                          fontWeight: 'bold',\r\n                                          fontStyle: 'italic',\r\n                                        }}\r\n                                      >\r\n                                        {i.name}\r\n                                      </p>\r\n                                      <p>\r\n                                        {\r\n                                          i.components.filter(\r\n                                            (j) => j.type === 'BODY'\r\n                                          )[0].text\r\n                                        }\r\n                                      </p>\r\n                                    </div>\r\n                                  ) : null}\r\n                                </>\r\n                              );\r\n                            })}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div> */}\r\n                  <div\r\n                    style={{\r\n                      width: '-webkit-fill-available',\r\n                      overflowY: 'scroll',\r\n                      overflowX: 'hidden',\r\n                      maxHeight: '199px',\r\n                    }}\r\n                  >\r\n                    {filteredQuickReplyText &&\r\n                      filteredQuickReplyText?.map((i) => {\r\n                        return (\r\n                          <div\r\n                            style={{\r\n                              display: 'flex',\r\n                              flexDirection: 'row',\r\n                              justifyContent: 'flex-start',\r\n                              backgroundColor: 'rgb(223 223 223)',\r\n                              padding: '15px 20px',\r\n                              borderBottom: '1px solid rgb(209 209 209)',\r\n                              cursor: 'pointer',\r\n                            }}\r\n                            onClick={() => setNewMessage(i.message)}\r\n                          >\r\n                            <span\r\n                              style={{ fontWeight: '600', marginRight: '5px' }}\r\n                            >\r\n                              {i.shortcut}\r\n                            </span>\r\n                            {i.message}\r\n                          </div>\r\n                        );\r\n                      })}\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      display: 'flex',\r\n                      flexDirection: 'row',\r\n                      width: '-webkit-fill-available',\r\n                      height: '4.3rem',\r\n                      justifyContent: 'space-evenly',\r\n                      alignItems: 'center',\r\n                    }}\r\n                  >\r\n                    {showSelector ? (\r\n                      <div style={{ display: 'flex', flex: '100%' }}>\r\n                        <CloseIcon\r\n                          style={{\r\n                            flex: '5%',\r\n                            cursor: 'pointer',\r\n                            fontSize: '30px',\r\n                            marginLeft: '5px',\r\n                          }}\r\n                          onClick={() => {\r\n                            setShowSelector(false);\r\n                            setMulForward([]);\r\n                          }}\r\n                        />\r\n                        <div style={{ flex: '90%' }}></div>\r\n                        <ReplyIcon\r\n                          style={{ flex: '5%' }}\r\n                          className='forward_final'\r\n                          onClick={() => {\r\n                            setVisible(true);\r\n                            setShowSelector(false);\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <div className='attachFile'>\r\n                          <AttachFileIcon\r\n                            fontSize='medium'\r\n                            className='attachButton'\r\n                          />\r\n                          <input\r\n                            id='myFile'\r\n                            name='myFile'\r\n                            type='file'\r\n                            className='attachInput'\r\n                            onChange={(e) => handleFiles(e.target.files[0])}\r\n                          />\r\n                        </div>\r\n                        <Tooltip\r\n                          open={openTooltipForm}\r\n                          onClose={handleCloseTooltipForm}\r\n                          onOpen={handleOpenTooltipForm}\r\n                          title='CREATE FORM'\r\n                        >\r\n                          <FormCreation clientId={currentChat.uid} clientWaId = {currentChat.wa_id} clientName = {currentChat.name} agent = {currentChat.agent} />\r\n                        </Tooltip>\r\n                        <Tooltip\r\n                          open={openTooltip}\r\n                          onClose={handleCloseTooltip}\r\n                          onOpen={handleOpenTooltip}\r\n                          // title='SEND TEMPLATE'\r\n                          title='INITIATE CONVERSATION'\r\n                        >\r\n                          <SpeakerNotesIcon\r\n                            className='templateMsg'\r\n                            // onClick={getTemplateMsg}\r\n                            onClick={handleSendTemplate}\r\n                          />\r\n                        </Tooltip>\r\n                        <textarea\r\n                          className='chatMessageInput'\r\n                          placeholder='Type a message...'\r\n                          value={newMessage}\r\n                          onChange={(e) => {\r\n                            setNewMessage(e.target.value);\r\n                            typeMsg(e);\r\n                          }}\r\n                          onKeyPress={handleKeyPress}\r\n                        />\r\n                        {newMessage.length > 0 ? (\r\n                         <>\r\n                         &nbsp;\r\n                          <SendIcon\r\n                            fontSize='medium'\r\n                            style={{fontSize: '29px'}}\r\n                            className='chatSubmitButton'\r\n                            onClick={handleSubmit}\r\n                          />\r\n                          {/* <NoteAddIcon\r\n                            fontSize='medium'\r\n                            style={{fontSize: '25px'}}\r\n                            className='chatSubmitButton'\r\n                            onClick={handleSendNote}\r\n                          /> */}\r\n                          <span className='chatSubmitButton'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                          <SpeedDial\r\n                            ariaLabel=\"SpeedDial openIcon example\"\r\n                            style={{left: '97%', height: '29px'}}\r\n                            sx={{ position: 'absolute', bottom: 16, right: 16 }}\r\n                            icon={<NoteAddIcon fontSize='medium' style={{fontSize: '26px', color:'#9B9B9B'}} openIcon={<SendIcon fontSize='medium' style={{fontSize: '26px', color:'#1977f2'}} />} />}\r\n                          >\r\n                            {actions.map((action) => (\r\n                              <SpeedDialAction\r\n                                key={action.name}\r\n                                icon={action.icon}\r\n                                tooltipTitle={action.name}\r\n                              />\r\n                            ))}\r\n                          </SpeedDial>\r\n                         </>\r\n                        ) : (\r\n                          <MicIcon fontSize='large' className='micButton' />\r\n                        )}\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </footer>\r\n              </>\r\n            ) : (\r\n              <img\r\n                src={chatDemo}\r\n                // height='600'\r\n                // width='600'\r\n                style={{\r\n                  alignSelf: 'center',\r\n                  marginTop: '130px',\r\n                  height: '60vh',\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <RightSec newSessions={newSessions} interestedTutors={interestedTutors} clientPayment={clientPayment} tutorPayout={tutorPayout} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Messenger;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}