{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"className\"];import axios from'axios';import{useEffect,useState,useRef}from'react';import'./conversation.css';import{msgUrl,alertMsgUrl,pinChatUrl,markChatUrl,stickComment,fetchStickComment}from'../../serviceUrls/Message-Services';import NotificationsIcon from'@material-ui/icons/Notifications';import{io}from'socket.io-client';import moment from'moment';import PushPinIcon from'@mui/icons-material/PushPin';import Button from'@mui/material/Button';import Menu from'@mui/material/Menu';import MenuItem from'@mui/material/MenuItem';import KeyboardArrowDownIcon from'@mui/icons-material/KeyboardArrowDown';import Badge from'@mui/material/Badge';import Avatar from'@mui/material/Avatar';import StickComments from\"../dialogs/StickComments\";import InfoIcon from\"@mui/icons-material/Info\";import{styled}from\"@mui/material/styles\";import Tooltip,{tooltipClasses}from\"@mui/material/Tooltip\";import Typography from\"@mui/material/Typography\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HtmlTooltip=styled(function(_ref){var className=_ref.className,props=_objectWithoutProperties(_ref,_excluded);return/*#__PURE__*/_jsx(Tooltip,_objectSpread(_objectSpread({},props),{},{classes:{popper:className}}));})(function(_ref2){var theme=_ref2.theme;return _defineProperty({},\"& .\".concat(tooltipClasses.tooltip),{backgroundColor:\"rgba(80, 80, 80, 0.92)\",color:\"#ffff\",fontWeight:\"500\",maxWidth:350,fontSize:theme.typography.pxToRem(12),border:\"1px solid rgba(80, 80, 80, 0.92)\",overflowX:\"hidden\",overflowY:\"scroll\",maxHeight:\"300px\"});});// import useSound from 'use-sound';\n// import notification from '../../assets/notification.mp3';\nexport default function Conversation(_ref4){var _conversation$name;var apiUrl=_ref4.apiUrl,conversation=_ref4.conversation,currentUser=_ref4.currentUser,currentChat=_ref4.currentChat,finalMessage=_ref4.finalMessage,arrivalMessage=_ref4.arrivalMessage,alertMsg=_ref4.alertMsg,alert=_ref4.alert,setAlert=_ref4.setAlert,setPinned=_ref4.setPinned,setMarkChat=_ref4.setMarkChat,setAlertUpdate=_ref4.setAlertUpdate;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),alertText=_useState4[0],setAlertText=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),alertMessage=_useState6[0],setAlertMessage=_useState6[1];// const [hide, setHide] = useState(false);\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),msgCount=_useState8[0],setMsgCount=_useState8[1];var socket=useRef();var alertIcon=useRef();var PF=process.env.REACT_APP_PUBLIC_FOLDER;var headerKey={Accept:'application/json',Authorization:'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxMTYyMWZkZi0wYjJjLTQxYzAtOWZmMS1iZDk5NWZmYTQ2ZTUiLCJ1bmlxdWVfbmFtZSI6Im9mZmljZUB0dXRvcnBvaW50LmluIiwibmFtZWlkIjoib2ZmaWNlQHR1dG9ycG9pbnQuaW4iLCJlbWFpbCI6Im9mZmljZUB0dXRvcnBvaW50LmluIiwiYXV0aF90aW1lIjoiMDgvMDQvMjAyMSAwODoxMTowMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFETUlOSVNUUkFUT1IiLCJleHAiOjI1MzQwMjMwMDgwMCwiaXNzIjoiQ2xhcmVfQUkiLCJhdWQiOiJDbGFyZV9BSSJ9.lSSh1EL29ksj23Y_rTSrLhYVwhOFyddK1c6bKU-_HB4'};var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),anchorEl=_useState10[0],setAnchorEl=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),stickComments=_useState12[0],setStickComments=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),noteDetails=_useState14[0],setNoteDetails=_useState14[1];var open=Boolean(anchorEl);var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};console.log(msg);// useEffect(() => {\n//   const friendId = conversation.id;\n//   const getUser = async () => {\n//     try {\n//       const res = await axios(getCustomersUrl + `/${friendId}`, {headers: {...headerKey}});\n//       setUser(res.data);\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   };\n//   getUser();\n// }, [conversation]);\n// useEffect(() => {\n//   socket.current = io('ws://localhost:8900');\n//   socket.current.on('getAlert', (msg) => {\n//     // storeFiles(msg); //store incoming files data to excel\n//     setAlertMsg([msg]);\n//   });\n// }, []);\n// const [play] = useSound(notification);\n// useEffect(() => {\n//   const getMessages = async () => {\n//     try {\n//       const res = await axios.get(\n//         msgUrl + `/${conversation?.wa_id}?page=0&limit=20`,\n//         {\n//           headers: { ...headerKey },\n//         }\n//       );\n//       console.log(res.data);\n//       // setMessages(() =>\n//       //   res?.data?.messages?.items\n//       //     .filter((f) => f.eventType === 'message')\n//       //     .reverse()\n//       // );\n//       setMsg([...res?.data]);\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   };\n//   getMessages();\n// }, [newNotification, alertMsg]);\n// console.log(arrivalMessage.length);\n// // useEffect(() => {\n// //   play();\n// // }, [arrivalMessage?.length])\n// useEffect(() => {\n//   const getAlert = async () => {\n//     try {\n//       const res = await axios.get(alertMsgUrl + `/${conversation?.wa_id}`, {\n//         headers: {},\n//       });\n//       console.log(res.data);\n//       // setMessages(() =>\n//       //   res?.data?.messages?.items\n//       //     .filter((f) => f.eventType === 'message')\n//       //     .reverse()\n//       // );\n//       setMsg([...res?.data]);\n//       setMsgCount(() => res?.data?.filter((i) => i.status === 'newMsg' && i.wa_id == conversation?.wa_id).length);\n//       setHide(false);\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   };\n//   getAlert();\n// }, [alertMsg, newNotification]);\n// console.log(alertMessage);\n// useEffect(() => {\n//   setMsgCount(\n//     () =>\n//       alertMessage?.filter(\n//         (i) => i.status === 'newMsg' && i.wa_id == conversation?.wa_id\n//       ).length\n//   );\n// }, [alertMessage, alertMsg, newNotification]);\nvar updateAlert=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(wa_id){var payload,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(conversation.newMsgCount>0)){_context.next=12;break;}_context.prev=1;payload={newMsgCount:0,timestamp:Math.floor(new Date().getTime()/1000.0)};_context.next=5;return axios.put(\"\".concat(apiUrl||localStorage.getItem('api'),\"/api/conversations/\").concat(wa_id),payload,{headers:{}});case 5:response=_context.sent;setAlertUpdate(Math.floor(new Date().getTime()/1000.0));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function updateAlert(_x){return _ref5.apply(this,arguments);};}();console.log(alertMessage);var diff_hours=function diff_hours(dt1){var diff=new Date().getTime()/1000.0-dt1;diff/=60*60;return Math.abs(Math.round(diff));};// const filteredArrivalMessage = alertMsg?.filter(\n//   (i) => i.wAid === conversation.wAid\n// );\n// const newNoti = (id) => {\n//   let filtered = alertText.filter((i) => i.waId === id);\n//   console.log(filtered);\n//   return { arr: filtered, len: filtered.length };\n// };\n// useEffect(() => {\n//   setAlertText([...alertText, ...alertMsg]);\n//   setAlert(alert + 1);\n//   // return () => {\n//   //   setAlertText([])\n//   // }\n// }, [alertMsg]);\n// let filteredAlert = alertText?.filter((i) => i.waId === conversation?.wAid);\n// console.log(alertMsg);\n// console.log(alertText);\n// console.log(alert);\nvar handlePinChat=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(waId,pin){var _res$data;var payload,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload={pinContact:!pin};_context2.next=3;return axios.put(pinChatUrl+\"/\".concat(waId),payload,{headers:''});case 3:res=_context2.sent;setPinned(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.updatedAt);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePinChat(_x2,_x3){return _ref6.apply(this,arguments);};}();var handleMarkChat=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(waId,markChat){var _res$data2;var payload,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload={markAsUnread:!markChat};_context3.next=3;return axios.put(markChatUrl+\"/\".concat(waId),payload,{headers:''});case 3:res=_context3.sent;setMarkChat(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.updatedAt);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleMarkChat(_x4,_x5){return _ref7.apply(this,arguments);};}();var handleStickComments=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(whatsId,stickComments){var payload,res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload={comments:stickComments};_context4.next=3;return axios.put(stickComment+\"/\".concat(whatsId),payload,{headers:''});case 3:res=_context4.sent;fetchStickComments(whatsId);// setStickComments(res?.data?.comments);\nhandleClose();case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleStickComments(_x6,_x7){return _ref8.apply(this,arguments);};}();var fetchStickComments=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(waId){var res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get(fetchStickComment+\"/\".concat(waId));case 2:res=_context5.sent;if(res.data){setStickComments(res.data);}case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchStickComments(_x8){return _ref9.apply(this,arguments);};}();var getNoteDetails=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(waId){var response;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.get(\"\".concat(localStorage.getItem(\"api\"),\"/api/messages/getNotes/\").concat(waId));case 3:response=_context6.sent;setNoteDetails(response.data);_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[0,7]]);}));return function getNoteDetails(_x9){return _ref10.apply(this,arguments);};}();var shortText=function shortText(text){if(text.length>17){return\"\".concat(text.slice(0,17),\"..\");}else if(text.length<=17){return text;}};return/*#__PURE__*/_jsx(\"div\",{className:(currentChat===null||currentChat===void 0?void 0:currentChat.wa_id)==(conversation===null||conversation===void 0?void 0:conversation.wa_id)?'conversation highlighted':'conversation',onClick:function onClick(){updateAlert(conversation===null||conversation===void 0?void 0:conversation.wa_id);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"userTab\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"conversationImg\",children:conversation===null||conversation===void 0?void 0:(_conversation$name=conversation.name)===null||_conversation$name===void 0?void 0:_conversation$name.slice(0,2)}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingBottom:'5px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"conversationName\",children:[\"\".concat(conversation===null||conversation===void 0?void 0:conversation.name).concat(conversation===null||conversation===void 0?void 0:conversation.wa_id.slice(0,3)),/*#__PURE__*/_jsx(HtmlTooltip,{placement:\"right\",title:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{color:\"inherit\",style:{fontSize:\"13.5px\",fontWeight:\"600\",marginBottom:\"5px\"},children:noteDetails&&noteDetails.length>0?'Notes: ':'No Notes'}),noteDetails&&noteDetails.length>0&&/*#__PURE__*/_jsx(Typography,{color:\"inherit\",style:{fontSize:\"13.5px\",fontWeight:\"600\",marginBottom:\"5px\",maxHeight:\"500px\",overflowY:\"scroll\"},children:noteDetails.map(function(i){var _i$clientNotes,_i$clientNotes2,_i$clientNotes3;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',fontSize:\"12px\",fontWeight:\"normal\",padding:'8px 5px',borderBottom:'1px solid #ffff'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flex:'60%',fontSize:'13px',fontWeight:'600',color:(i===null||i===void 0?void 0:(_i$clientNotes=i.clientNotes)===null||_i$clientNotes===void 0?void 0:_i$clientNotes.priority)==='high'?'red':(i===null||i===void 0?void 0:(_i$clientNotes2=i.clientNotes)===null||_i$clientNotes2===void 0?void 0:_i$clientNotes2.priority)==='medium'?'royalblue':'#565555'},children:i===null||i===void 0?void 0:(_i$clientNotes3=i.clientNotes)===null||_i$clientNotes3===void 0?void 0:_i$clientNotes3.noteText}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignSelf:'self-end',fontSize:'11px'},children:moment(new Date(i.timestamp*1000)).format('lll')})]});})})]}),children:/*#__PURE__*/_jsx(InfoIcon,{fontSize:\"small\",style:{fontSize:\"12px\",cursor:\"pointer\",marginLeft:\"1px\"},onMouseEnter:function onMouseEnter(){return getNoteDetails(conversation===null||conversation===void 0?void 0:conversation.wa_id);}})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px'},children:[\"ED\".concat(conversation===null||conversation===void 0?void 0:conversation.uid),/*#__PURE__*/_jsx(\"span\",{className:\"usertag_\",children:shortText(conversation===null||conversation===void 0?void 0:conversation.tags)})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flex:'35%',flexDirection:'column',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',flex:'1',justifyContent:'flex-end',padding:'10px',fontSize:'12px',fontWeight:'normal'},children:[(conversation===null||conversation===void 0?void 0:conversation.pinContact)&&/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'14px',transform:'rotate(45deg)',cursor:'pointer'},children:/*#__PURE__*/_jsx(PushPinIcon,{style:{fontSize:'15px'}})}),diff_hours(conversation===null||conversation===void 0?void 0:conversation.timestamp)<24?moment(new Date((conversation===null||conversation===void 0?void 0:conversation.timestamp)*1000).toISOString()).format('hh:mm a'):moment(new Date((conversation===null||conversation===void 0?void 0:conversation.timestamp)*1000).toISOString()).format('L')]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',alignSelf:'flex-end'},children:[/*#__PURE__*/_jsx(\"span\",{style:{padding:'0px 10px',marginRight:'5px'},children:conversation.markAsUnread&&/*#__PURE__*/_jsx(Badge,{badgeContent:'',color:\"primary\"})}),conversation.newMsgCount>0&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'0px 10px',marginRight:'5px'},children:/*#__PURE__*/_jsx(Badge,{badgeContent:conversation.newMsgCount,color:\"success\"})}),/*#__PURE__*/_jsxs(\"span\",{style:{paddingRight:'5px'},children:[/*#__PURE__*/_jsx(KeyboardArrowDownIcon,{fontSize:\"small\",color:\"action\",onClick:function onClick(e){e.stopPropagation();handleClick(e);}}),/*#__PURE__*/_jsxs(Menu,{id:\"basic-menu\",anchorEl:anchorEl,open:open,onClose:handleClose,MenuListProps:{'aria-labelledby':'basic-button'},children:[/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(e){e.stopPropagation();handlePinChat(conversation===null||conversation===void 0?void 0:conversation.wa_id,conversation===null||conversation===void 0?void 0:conversation.pinContact);handleClose();},children:conversation!==null&&conversation!==void 0&&conversation.pinContact?'Unpin chat':'Pin chat'}),/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(e){e.stopPropagation();handleMarkChat(conversation===null||conversation===void 0?void 0:conversation.wa_id,conversation===null||conversation===void 0?void 0:conversation.markAsUnread);handleClose();},children:conversation!==null&&conversation!==void 0&&conversation.markAsUnread?'Mark as read':'Mark as unread'}),/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(e){e.stopPropagation();// setWhatsId(conversation?.wa_id)\n// fetchStickComments(conversation?.wa_id)\n},children:/*#__PURE__*/_jsx(StickComments,{handleStickComments:handleStickComments,fetchStickComments:fetchStickComments,wa_id:conversation===null||conversation===void 0?void 0:conversation.wa_id,setStickComments:setStickComments,stickComments:stickComments})})]})]})]})]})]})});}","map":{"version":3,"names":["axios","useEffect","useState","useRef","msgUrl","alertMsgUrl","pinChatUrl","markChatUrl","stickComment","fetchStickComment","NotificationsIcon","io","moment","PushPinIcon","Button","Menu","MenuItem","KeyboardArrowDownIcon","Badge","Avatar","StickComments","InfoIcon","styled","Tooltip","tooltipClasses","Typography","HtmlTooltip","className","props","popper","theme","tooltip","backgroundColor","color","fontWeight","maxWidth","fontSize","typography","pxToRem","border","overflowX","overflowY","maxHeight","Conversation","apiUrl","conversation","currentUser","currentChat","finalMessage","arrivalMessage","alertMsg","alert","setAlert","setPinned","setMarkChat","setAlertUpdate","msg","setMsg","alertText","setAlertText","alertMessage","setAlertMessage","msgCount","setMsgCount","socket","alertIcon","PF","process","env","REACT_APP_PUBLIC_FOLDER","headerKey","Accept","Authorization","anchorEl","setAnchorEl","stickComments","setStickComments","noteDetails","setNoteDetails","open","Boolean","handleClick","event","currentTarget","handleClose","console","log","updateAlert","wa_id","newMsgCount","payload","timestamp","Math","floor","Date","getTime","put","localStorage","getItem","headers","response","diff_hours","dt1","diff","abs","round","handlePinChat","waId","pin","pinContact","res","data","updatedAt","handleMarkChat","markChat","markAsUnread","handleStickComments","whatsId","comments","fetchStickComments","get","getNoteDetails","shortText","text","length","slice","name","paddingBottom","marginBottom","map","i","display","justifyContent","padding","borderBottom","flex","clientNotes","priority","noteText","alignSelf","format","cursor","marginLeft","uid","tags","flexDirection","marginRight","transform","toISOString","paddingRight","e","stopPropagation"],"sources":["C:/Users/AEPL/Desktop/Git Clones/Dummy_project/Backend/dummy1/src/components/conversations/Conversation.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport './conversation.css';\r\nimport {\r\n  msgUrl,\r\n  alertMsgUrl,\r\n  pinChatUrl,\r\n  markChatUrl,\r\n  stickComment,\r\n  fetchStickComment\r\n} from '../../serviceUrls/Message-Services';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport { io } from 'socket.io-client';\r\nimport moment from 'moment';\r\nimport PushPinIcon from '@mui/icons-material/PushPin';\r\nimport Button from '@mui/material/Button';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\r\nimport Badge from '@mui/material/Badge';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport StickComments from \"../dialogs/StickComments\"\r\nimport InfoIcon from \"@mui/icons-material/Info\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Tooltip, { tooltipClasses } from \"@mui/material/Tooltip\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nconst HtmlTooltip = styled(({ className, ...props }) => (\r\n  <Tooltip {...props} classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: \"rgba(80, 80, 80, 0.92)\",\r\n    color: \"#ffff\",\r\n    fontWeight: \"500\",\r\n    maxWidth: 350,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: \"1px solid rgba(80, 80, 80, 0.92)\",\r\n    overflowX: \"hidden\",\r\n    overflowY: \"scroll\",\r\n    maxHeight: \"300px\"\r\n  },\r\n}));\r\n// import useSound from 'use-sound';\r\n\r\n// import notification from '../../assets/notification.mp3';\r\n\r\nexport default function Conversation({\r\n  apiUrl,\r\n  conversation,\r\n  currentUser,\r\n  currentChat,\r\n  finalMessage,\r\n  arrivalMessage,\r\n  alertMsg,\r\n  alert,\r\n  setAlert,\r\n  setPinned,\r\n  setMarkChat,\r\n  setAlertUpdate,\r\n}) {\r\n  const [msg, setMsg] = useState([]);\r\n  const [alertText, setAlertText] = useState([]);\r\n  const [alertMessage, setAlertMessage] = useState([]);\r\n  // const [hide, setHide] = useState(false);\r\n  const [msgCount, setMsgCount] = useState();\r\n\r\n  const socket = useRef();\r\n  const alertIcon = useRef();\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const headerKey = {\r\n    Accept: 'application/json',\r\n    Authorization:\r\n      'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxMTYyMWZkZi0wYjJjLTQxYzAtOWZmMS1iZDk5NWZmYTQ2ZTUiLCJ1bmlxdWVfbmFtZSI6Im9mZmljZUB0dXRvcnBvaW50LmluIiwibmFtZWlkIjoib2ZmaWNlQHR1dG9ycG9pbnQuaW4iLCJlbWFpbCI6Im9mZmljZUB0dXRvcnBvaW50LmluIiwiYXV0aF90aW1lIjoiMDgvMDQvMjAyMSAwODoxMTowMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFETUlOSVNUUkFUT1IiLCJleHAiOjI1MzQwMjMwMDgwMCwiaXNzIjoiQ2xhcmVfQUkiLCJhdWQiOiJDbGFyZV9BSSJ9.lSSh1EL29ksj23Y_rTSrLhYVwhOFyddK1c6bKU-_HB4',\r\n  };\r\n\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [stickComments,setStickComments] =useState();\r\n  const [noteDetails, setNoteDetails] = useState();\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  console.log(msg);\r\n  // useEffect(() => {\r\n  //   const friendId = conversation.id;\r\n\r\n  //   const getUser = async () => {\r\n  //     try {\r\n  //       const res = await axios(getCustomersUrl + `/${friendId}`, {headers: {...headerKey}});\r\n  //       setUser(res.data);\r\n  //     } catch (err) {\r\n  //       console.log(err);\r\n  //     }\r\n  //   };\r\n  //   getUser();\r\n  // }, [conversation]);\r\n\r\n  // useEffect(() => {\r\n  //   socket.current = io('ws://localhost:8900');\r\n  //   socket.current.on('getAlert', (msg) => {\r\n  //     // storeFiles(msg); //store incoming files data to excel\r\n  //     setAlertMsg([msg]);\r\n  //   });\r\n  // }, []);\r\n\r\n  // const [play] = useSound(notification);\r\n\r\n  // useEffect(() => {\r\n  //   const getMessages = async () => {\r\n  //     try {\r\n  //       const res = await axios.get(\r\n  //         msgUrl + `/${conversation?.wa_id}?page=0&limit=20`,\r\n  //         {\r\n  //           headers: { ...headerKey },\r\n  //         }\r\n  //       );\r\n  //       console.log(res.data);\r\n  //       // setMessages(() =>\r\n  //       //   res?.data?.messages?.items\r\n  //       //     .filter((f) => f.eventType === 'message')\r\n  //       //     .reverse()\r\n  //       // );\r\n  //       setMsg([...res?.data]);\r\n  //     } catch (err) {\r\n  //       console.log(err);\r\n  //     }\r\n  //   };\r\n  //   getMessages();\r\n  // }, [newNotification, alertMsg]);\r\n\r\n  // console.log(arrivalMessage.length);\r\n\r\n  // // useEffect(() => {\r\n  // //   play();\r\n  // // }, [arrivalMessage?.length])\r\n\r\n  // useEffect(() => {\r\n  //   const getAlert = async () => {\r\n  //     try {\r\n  //       const res = await axios.get(alertMsgUrl + `/${conversation?.wa_id}`, {\r\n  //         headers: {},\r\n  //       });\r\n  //       console.log(res.data);\r\n  //       // setMessages(() =>\r\n  //       //   res?.data?.messages?.items\r\n  //       //     .filter((f) => f.eventType === 'message')\r\n  //       //     .reverse()\r\n  //       // );\r\n  //       setMsg([...res?.data]);\r\n  //       setMsgCount(() => res?.data?.filter((i) => i.status === 'newMsg' && i.wa_id == conversation?.wa_id).length);\r\n  //       setHide(false);\r\n  //     } catch (err) {\r\n  //       console.log(err);\r\n  //     }\r\n  //   };\r\n  //   getAlert();\r\n  // }, [alertMsg, newNotification]);\r\n\r\n  // console.log(alertMessage);\r\n\r\n  // useEffect(() => {\r\n  //   setMsgCount(\r\n  //     () =>\r\n  //       alertMessage?.filter(\r\n  //         (i) => i.status === 'newMsg' && i.wa_id == conversation?.wa_id\r\n  //       ).length\r\n  //   );\r\n  // }, [alertMessage, alertMsg, newNotification]);\r\n\r\n  const updateAlert = async (wa_id) => {\r\n    if (conversation.newMsgCount > 0) {\r\n      try {\r\n        const payload = {\r\n          newMsgCount: 0,\r\n          timestamp: Math.floor(new Date().getTime() / 1000.0),\r\n        };\r\n        const response = await axios.put(\r\n          `${apiUrl || localStorage.getItem('api')}/api/conversations/${wa_id}`,\r\n          payload,\r\n          {\r\n            headers: {},\r\n          }\r\n        );\r\n        setAlertUpdate(Math.floor(new Date().getTime() / 1000.0));\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  console.log(alertMessage);\r\n\r\n  const diff_hours = (dt1) => {\r\n    var diff = new Date().getTime() / 1000.0 - dt1;\r\n    diff /= 60 * 60;\r\n    return Math.abs(Math.round(diff));\r\n  };\r\n\r\n  // const filteredArrivalMessage = alertMsg?.filter(\r\n  //   (i) => i.wAid === conversation.wAid\r\n  // );\r\n\r\n  // const newNoti = (id) => {\r\n  //   let filtered = alertText.filter((i) => i.waId === id);\r\n  //   console.log(filtered);\r\n  //   return { arr: filtered, len: filtered.length };\r\n  // };\r\n\r\n  // useEffect(() => {\r\n  //   setAlertText([...alertText, ...alertMsg]);\r\n  //   setAlert(alert + 1);\r\n  //   // return () => {\r\n  //   //   setAlertText([])\r\n  //   // }\r\n  // }, [alertMsg]);\r\n\r\n  // let filteredAlert = alertText?.filter((i) => i.waId === conversation?.wAid);\r\n\r\n  // console.log(alertMsg);\r\n  // console.log(alertText);\r\n  // console.log(alert);\r\n\r\n  const handlePinChat = async (waId, pin) => {\r\n    const payload = {\r\n      pinContact: !pin,\r\n    };\r\n    const res = await axios.put(pinChatUrl + `/${waId}`, payload, {\r\n      headers: '',\r\n    });\r\n    setPinned(res?.data?.updatedAt);\r\n  };\r\n\r\n  const handleMarkChat = async (waId, markChat) => {\r\n    const payload = {\r\n      markAsUnread: !markChat,\r\n    };\r\n    const res = await axios.put(markChatUrl + `/${waId}`, payload, {\r\n      headers: '',\r\n    });\r\n    setMarkChat(res?.data?.updatedAt);\r\n  };\r\n\r\n  const handleStickComments = async (whatsId, stickComments) => {\r\n    const payload = {\r\n      comments: stickComments,\r\n    };\r\n    const res = await axios.put(stickComment + `/${whatsId}`, payload, {\r\n      headers: '',\r\n    });\r\n    fetchStickComments(whatsId)\r\n    // setStickComments(res?.data?.comments);\r\n    handleClose()\r\n  };\r\n\r\n  const fetchStickComments = async (waId) => {\r\n  \r\n    const res = await axios.get(fetchStickComment + `/${waId}`);\r\n    if(res.data){\r\n      setStickComments(res.data)\r\n    }\r\n   \r\n  };\r\n\r\n  const getNoteDetails = async (waId) => {\r\n    try{\r\n      const response = await axios.get(`${localStorage.getItem(\"api\")}/api/messages/getNotes/${waId}`);\r\n      setNoteDetails(response.data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n  }\r\n\r\n  const shortText = (text) => {\r\n    if(text.length > 17) {\r\n      return `${text.slice(0, 17)}..`;\r\n    }\r\n    else if(text.length <= 17) {\r\n      return text;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        currentChat?.wa_id == conversation?.wa_id\r\n          ? 'conversation highlighted'\r\n          : 'conversation'\r\n      }\r\n      onClick={() => {\r\n        updateAlert(conversation?.wa_id);\r\n      }}\r\n    >\r\n      <div className='userTab'>\r\n        <Avatar className='conversationImg'>\r\n          {conversation?.name?.slice(0, 2)}\r\n        </Avatar>\r\n        <div style={{ paddingBottom: '5px' }}>\r\n          <div className='conversationName'>{`${\r\n            conversation?.name\r\n          }${conversation?.wa_id.slice(0, 3)}`}\r\n            <HtmlTooltip\r\n                placement=\"right\"\r\n                title={\r\n                  <>\r\n                    <Typography\r\n                      color=\"inherit\"\r\n                      style={{\r\n                        fontSize: \"13.5px\",\r\n                        fontWeight: \"600\",\r\n                        marginBottom: \"5px\",\r\n                      }}\r\n                    >\r\n                    {noteDetails && noteDetails.length > 0 ? 'Notes: ' : 'No Notes'}\r\n                    </Typography>\r\n                    {noteDetails && noteDetails.length > 0 && (\r\n                      <Typography\r\n                        color=\"inherit\"\r\n                        style={{\r\n                          fontSize: \"13.5px\",\r\n                          fontWeight: \"600\",\r\n                          marginBottom: \"5px\",\r\n                          maxHeight:\"500px\",\r\n                          overflowY:\"scroll\"\r\n                        }}\r\n                      >\r\n                        {noteDetails.map((i) => \r\n                        <div\r\n                          style={{ display: 'flex', justifyContent: 'space-between', fontSize: \"12px\", fontWeight: \"normal\", padding: '8px 5px', borderBottom: '1px solid #ffff' }}\r\n                        >\r\n                          <div style={{display: 'flex', flex: '60%', fontSize: '13px', fontWeight: '600', color: i?.clientNotes?.priority === 'high' ? 'red' : i?.clientNotes?.priority === 'medium' ? 'royalblue' : '#565555'}}>{i?.clientNotes?.noteText}</div>\r\n                          <div style={{display: 'flex', alignSelf: 'self-end', fontSize: '11px'}}>\r\n                            {moment(new Date(i.timestamp * 1000)).format('lll')}\r\n                          </div>\r\n                        </div>)}\r\n                      </Typography>\r\n                    )}\r\n                   \r\n                  </>\r\n                }\r\n              >\r\n                <InfoIcon\r\n                  fontSize=\"small\"\r\n                  style={{\r\n                    fontSize: \"12px\",\r\n                    cursor: \"pointer\",\r\n                    marginLeft: \"1px\",\r\n                  }}\r\n                  onMouseEnter={() => getNoteDetails(conversation?.wa_id)}\r\n                />\r\n            </HtmlTooltip>\r\n          </div>\r\n          <div style={{ fontSize: '12px' }}>\r\n            {`ED${conversation?.uid}`}\r\n            <span className='usertag_'>{shortText(conversation?.tags)}</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            flex: '35%',\r\n            flexDirection: 'column',\r\n            justifyContent: 'flex-end',\r\n          }}\r\n        >\r\n          <span\r\n            style={{\r\n              display: 'flex',\r\n              flex: '1',\r\n              justifyContent: 'flex-end',\r\n              padding: '10px',\r\n              fontSize: '12px',\r\n              fontWeight: 'normal',\r\n            }}\r\n          >\r\n            {conversation?.pinContact && (\r\n              <span\r\n                style={{\r\n                  marginRight: '14px',\r\n                  transform: 'rotate(45deg)',\r\n                  cursor: 'pointer',\r\n                }}\r\n              >\r\n                <PushPinIcon style={{ fontSize: '15px' }} />\r\n              </span>\r\n            )}\r\n            {diff_hours(conversation?.timestamp) < 24\r\n              ? moment(\r\n                  new Date(conversation?.timestamp * 1000).toISOString()\r\n                ).format('hh:mm a')\r\n              : moment(\r\n                  new Date(conversation?.timestamp * 1000).toISOString()\r\n                ).format('L')}\r\n          </span>\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              flexDirection: 'row',\r\n              alignSelf: 'flex-end',\r\n            }}\r\n          >\r\n            <span\r\n              style={{\r\n                padding: '0px 10px',\r\n                marginRight: '5px',\r\n              }}\r\n            >\r\n              {conversation.markAsUnread && (\r\n                <Badge badgeContent={''} color='primary'></Badge>\r\n              )}\r\n            </span>\r\n            {conversation.newMsgCount > 0 && (\r\n              <span\r\n                style={{\r\n                  padding: '0px 10px',\r\n                  marginRight: '5px',\r\n                }}\r\n              >\r\n                <Badge\r\n                  badgeContent={conversation.newMsgCount}\r\n                  color='success'\r\n                ></Badge>\r\n              </span>\r\n            )}\r\n            <span style={{ paddingRight: '5px' }}>\r\n              <KeyboardArrowDownIcon\r\n                fontSize='small'\r\n                color='action'\r\n                onClick={(e) => {\r\n                  e.stopPropagation(); \r\n                  handleClick(e);\r\n                }}\r\n              />\r\n              <Menu\r\n                id='basic-menu'\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n                MenuListProps={{\r\n                  'aria-labelledby': 'basic-button',\r\n                }}\r\n              >\r\n                <MenuItem\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handlePinChat(\r\n                      conversation?.wa_id,\r\n                      conversation?.pinContact\r\n                    );\r\n                    handleClose();\r\n                  }}\r\n                >\r\n                  {conversation?.pinContact ? 'Unpin chat' : 'Pin chat'}\r\n                </MenuItem>\r\n                <MenuItem\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleMarkChat(\r\n                      conversation?.wa_id,\r\n                      conversation?.markAsUnread\r\n                    );\r\n                    handleClose();\r\n                  }}\r\n                >\r\n                  {conversation?.markAsUnread\r\n                    ? 'Mark as read'\r\n                    : 'Mark as unread'}\r\n                </MenuItem>\r\n                <MenuItem\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    // setWhatsId(conversation?.wa_id)\r\n                    // fetchStickComments(conversation?.wa_id)\r\n                  }}\r\n                >\r\n                  <StickComments handleStickComments={handleStickComments} fetchStickComments={fetchStickComments} wa_id={conversation?.wa_id} setStickComments={setStickComments} stickComments={stickComments}/>\r\n                  {/* {conversation?.pinContact ? 'Unpin chat' : 'Pin chat'} */}\r\n                </MenuItem>\r\n              </Menu>\r\n            </span>\r\n          </div>\r\n          {/* {filteredAlert.length > 0 ? (\r\n            <div\r\n              style={{\r\n                display: 'flex',\r\n                justifyContent: 'flex-end',\r\n                padding: '0px 10px 0px 0px',\r\n              }}\r\n              ref={alertIcon}\r\n            >\r\n              <NotificationsIcon style={{ color: '#03D755' }} />\r\n            </div>\r\n          ) : null} */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}